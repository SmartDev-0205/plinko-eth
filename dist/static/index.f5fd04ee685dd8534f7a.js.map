{"version":3,"file":"index.f5fd04ee685dd8534f7a.js","mappings":"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BA,cAAmBV,GAOflN,YAAYmN,EAAmBc,EAAgBhP,GAC3CiB,MAAMiN,GAJH,KAAAM,EAAI,IAAIL,GAAQ,EAAG,IACnB,KAAAc,OAAS,IAAId,GAAQ,EAAG,GAI3BhN,KAAK6N,OAASA,EACd7N,KAAKnB,MAAQA,CACjB,CAEOkP,KAAKC,GACRA,EAAIC,YACJD,EAAIE,IAAIlO,KAAK+M,SAASE,EAAGjN,KAAK+M,SAASG,EAAGlN,KAAK6N,OAAQ,EAAa,EAAV/R,KAAKqS,IAC/DH,EAAII,UAAYpO,KAAKnB,MACrBmP,EAAIK,MACR,GCpBSC,GAA6D,CACtE,EAAG,CACC,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,KACA,MACA,KACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,KACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,KACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,KACA,KACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,KACA,KACA,KACA,MACA,KACA,KACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,MACA,MACA,QAGR,GAAI,CACA,EAAG,CACC,KACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,KACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,KACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,KACA,MACA,MACA,MACA,MAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,OAEJ,EAAG,CACC,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,KACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,KACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,GAAI,CACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,GAAI,CACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MAEJ,GAAI,CACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,KACA,KACA,MACA,KACA,MACA,MACA,MACA,QAGR,GAAI,CACA,EAAG,CAAC,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,OACpE,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEJ,EAAG,CACC,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,KACA,MACA,MACA,MACA,KACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,EAAG,CACC,MACA,MACA,MACA,MACA,MACA,KACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,GAAI,CACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,GAAI,CACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,GAAI,CACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,OAEJ,GAAI,CACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,GAAI,CACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,GAAI,CACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJ,GAAI,CACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,SChrBZ,IAAgB,YAAc,qBAAqB,YAAc,qBAAqB,WAAa,oBAAoB,WAAa,oBAAoB,iBAAmB,0BAA0B,gBAAkB,yBAAyB,gBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,kBAAkB,yBAAyB,iBAAiB,wBAAwB,iBAAiB,wBAAwB,iBAAiB,wBAAwB,iBAAiB,wBAAwB,iBAAiB,yBCiB1nCC,GAAaA,EAAEC,aAAYC,aAAYC,iBACzC,MAAMC,EAAuBzP,KAAWC,GAAAA,WAAkBsP,EAAY,CAAC,CAACtP,GAAAA,iBAAwBqP,IAE1FI,EAAkB1P,KAAWC,GAAAA,YAAmB,CAAC,CAACA,GAAAA,kBAAyBqP,IAEjF,OACIpP,EAAAA,cAAA,OAAKN,UAAW8P,GACZxP,EAAAA,cAAA,OAAKN,UAAW6P,IAChBvP,EAAAA,cAAA,QAAMN,UAAWK,GAAAA,YAAmB,GAAGuP,MACrC,EAwBd,GApBoBG,EAAEC,SAAQN,aAAYO,mBACtC,MAAMC,EAAMF,EAAOjiB,OACboiB,EAAc,IAAIH,EAAOhiB,MAAM,GAAGoiB,aAAcJ,GAChDjQ,EAAQ,IAAIsQ,MAAMH,GAAKI,QAAQ5S,KAAKyQ,GAAM9N,GAAM,cAA0B,GAAX6P,EAAM,MAAU/B,OAC/EoC,EAAa,IAAIxQ,EAAM/R,MAAM,GAAGoiB,aAAcrQ,GAEpD,OACIO,EAAAA,cAAA,OAAKN,UAAWK,GAAAA,aACX8P,EAAYzS,KAAI,CAACrE,EAAOmX,IACrBlQ,EAAAA,cAACmP,GAAU,CACP1M,IAAK,GAAGmN,KAAOM,IACfd,WAAYA,GAAcO,IAAiBO,EAC3CZ,WAAYvW,EAAQoX,GAAAA,sBACpBd,WAAYY,EAAWC,OAG7B,EC1Bd,GAlBA,cAAkBxC,GAIdlN,YAAYmN,EAAmBc,EAAgBhP,GAC3CiB,MAAMiN,GACN/M,KAAK6N,OAASA,EACd7N,KAAKnB,MAAQA,CACjB,CAEOkP,KAAKC,GACRA,EAAIC,YACJD,EAAIE,IAAIlO,KAAK+M,SAASE,EAAGjN,KAAK+M,SAASG,EAAGlN,KAAK6N,OAAQ,EAAa,EAAV/R,KAAKqS,IAC/DH,EAAII,UAAYpO,KAAKnB,MACrBmP,EAAIK,MACR,GC8DJ,GA5EA,cAAmBvB,GAKflN,YAAY4P,EAAc3Q,GACtBiB,MAAM,IAAIkN,GAAQ,EAAG,IAJR,KAAAyC,UAAY,IACZ,KAAAC,KAAc,GAI3B1P,KAAKwP,KAAOA,EAGZ,MAAMG,GAAY,EAAI,EAAI3P,KAAKyP,YAAczP,KAAKwP,KAAO,GACnDI,EAAc9T,KAAK2R,KAAK,KAAOkC,EAAWA,GAC1CE,EAAY,EAAID,GAAeJ,EAAO,GAAKxP,KAAKyP,UACtD,IAAK,IAAIK,EAAI,EAAGA,EAAI9P,KAAKwP,KAAO,EAAGM,IAAK,CACpC,MAAMC,GAAcJ,EAAWG,EAAK,EAC9BE,GAAQF,EAAI,GAAKF,EAAc,EAAIC,EAEzC,IAAK,IAAII,EAAI,EAAGA,EAAIH,EAAI,EAAGG,IAAK,CAC5B,MAAMC,EAAOH,EAAYE,EAAIN,EAC7B3P,KAAK0P,KAAKS,KAAK,IAAIC,GAAI,IAAIpD,GAAQkD,EAAMF,GAAOhQ,KAAKyP,UAAW5Q,G,EAG5E,CAEOwR,gBACHC,EACAC,EACA1C,GAGA,MAAM2C,GAAkBxQ,KAAKyP,UAAY5B,IAAW7N,KAAKyP,UAAY5B,GAC/D4C,EAAYF,EAAIjD,SAASgD,GACzBI,EAAeD,EAAUlD,eAE/B,IAAK,MAAMoD,KAAO3Q,KAAK0P,KAAM,CAEzB,MAAM/O,EAAI7E,KAAK2I,IAAI,EAAGgM,EAAU9C,IAAIgD,EAAI5D,SAASO,SAASgD,IAAUI,GAC9DE,EAAeN,EAAMlD,IAAIqD,EAAUtD,SAASrR,KAAKC,IAAI,EAAG4E,KACxDkQ,EAAaP,EAAMlD,IAAIqD,EAAUtD,SAASxM,IAE1CmQ,EAAcF,EAAatD,SAASqD,EAAI5D,UAAUQ,eAElDwD,EAA0BF,EAAWvD,SAASqD,EAAI5D,UAAUQ,eAElE,GAAIuD,EAAcN,EACd,SAIJ,MAAMQ,EAAkClV,KAAK2R,KAAK+C,EAAiBO,GAC7DE,EAAqBX,EAAMhD,SAASuD,GAAYrD,YAAcwD,EAC9DE,EAAiBZ,EAAMlD,IAAIqD,EAAU7C,YAAYT,SAAS8D,IAG1DE,EAASD,EAAe5D,SAASqD,EAAI5D,UAAUa,YASrD,MAAO,CAACsD,iBAAgBC,S,CAIhC,CAEOpD,KAAKC,GACR,IAAK,MAAM2C,KAAO3Q,KAAK0P,KACnBiB,EAAI5C,KAAKC,EAEjB,GC5EJ,GAA2B,UCA3B,GAA2B,UC2B3B,MAAMoD,WAAehS,EAAAA,UAcjBQ,YAAmBC,GACfC,MAAMD,GAdF,KAAAmO,IAAuC,KACvC,KAAAqD,OAASjS,EAAAA,YAET,KAAAkS,YAAoF,GACpF,KAAAC,iBAAkB,EAClB,KAAAC,iBAAmB,IAAIxE,GAAQ,EAAG,MAClC,KAAAyE,YAAc,EACd,KAAAC,YAAc,EAEd,KAAAC,EAAI,GACJ,KAAAC,eAAiB,IACjB,KAAAC,MAAQ,IA0BT,KAAAC,QAAU,CAACC,EAAmBC,KACjC,MAAMC,EAAW3D,GAAetO,KAAKH,MAAM2P,MAAMuC,GAAWC,EAAY,IAClEE,EAAU,IAAI9c,SAAe+Q,IAC/BnG,KAAKsR,YAAYnB,KAAK,CAClBgC,KAAM,IAAIC,GAAK,IAAIpF,GAAQiF,GAAW,KAAMjS,KAAKqS,WFrEhB,WEsEjCN,YACAO,iBAAkBnM,GACpB,IASN,OAPKnG,KAAKuR,kBACNvR,KAAKuR,iBAAkB,EACvBvR,KAAK0R,YAAc,EACnB1R,KAAKyR,YAActmB,KAAKonB,MACxBC,sBAAsBxS,KAAKyS,YAGxBP,CAAO,EAGV,KAAAQ,eAAiB,KACrB,MAAM1E,EAAMhO,KAAKgO,IAEjB,GAAY,OAARA,EACA,OAGJ,MAAMvB,EAAQuB,EAAI2E,OAAOlG,MACnBD,EAASwB,EAAI2E,OAAOnG,OAE1BwB,EAAI4E,UAAU,EAAG,EAAGnG,EAAOD,GAC3BwB,EAAI6E,OACJ7E,EAAI8E,MAAMrG,EAAQ,EAAGD,EAAS,GAC9BwB,EAAI+E,UAAU,EAAK,GACnB/S,KAAK0P,KAAK3B,KAAKC,GACfhO,KAAKsR,YAAY0B,SAAS/F,GAAMA,EAAEkF,KAAKpE,KAAKC,KAC5CA,EAAIiF,SAAS,EAGV,KAAAC,SAAW,KACd,MAMMC,EAAsB,IAAIhE,MAAMnP,KAAKH,MAAM2P,KAAO,IAAIhT,KAAK4W,GAAM,KAEjEC,EAAO,IAAIC,GAAAA,EAAK,aACtB,IAAK,IAAIxD,EAAI,EAAGA,EANF,IAMaA,IAAK,CAC5B,MAAMyD,EAAMzX,KAAK6O,OAVR,GAUqB7O,KAAK6O,MANzB1N,GAM+BoW,EAAKG,OAAiB,MAAU,IACnEC,EAAOzT,KAAK0T,aAAaH,GAE/B,GAAIE,IAAS,GAAKA,GAAQ,EACtB,SAGJ,MAEME,EAAWR,EAFCrX,KAAK8X,OAAQH,EAAO,GAAK,GAAMzT,KAAKH,MAAM2P,KAAO,KAG/DmE,EAAS9mB,QAAU,IAIvB8mB,EAASxD,KAAKoD,E,CAGlB,IAAIM,EAAY,GAChB,IAAK,IAAIN,EAAM,EAAGA,EAAMJ,EAAQtmB,OAAQ0mB,IACpCM,GAAa,GAAGN,OAASJ,EAAQI,GAAKO,KAAK,W,EAI5C,KAAAJ,aAAgBzB,IACnB,MAAME,EAAO,IAAIC,GAAK,IAAIpF,GAAQiF,GAAW,KAAMjS,KAAKqS,WAAY,SAE9D0B,EAAW,IACjB,IAAIC,EAAQ,EACZ,KAAO7B,EAAKpF,SAASG,EAAI,GAAK8G,IAAUD,GACpC/T,KAAKiU,YAAY9B,EAAM,EAAInS,KAAK4R,gBAGpC,OAAIoC,GAASD,GACD,EAGL5B,EAAKpF,SAASE,CAAC,EAGlB,KAAAgH,YAAc,CAAC9B,EAAY+B,KAC/B,MAAMC,EAAahC,EAAKpF,SAClBqH,EAAWjC,EAAK9E,EAChBgH,EAAOD,EAAShH,IAAIpN,KAAKwR,iBAAiBrE,SAAS+G,IACnDI,EAASH,EAAW/G,IAAIiH,EAAKlH,SAAS+G,IACtCK,EAAgBvU,KAAK0P,KAAKW,gBAAgB8D,EAAYG,EAAQnC,EAAKtE,QACzE,QAAsBra,IAAlB+gB,EAGA,OAFApC,EAAKpF,SAAWuH,OAChBnC,EAAK9E,EAAIgH,GAIb,MAAM,eAACnD,EAAc,OAAEC,GAAUoD,EAE3BC,EAAKxU,KAAKwR,iBAAiBhE,YAC3BiH,EAAKL,EAAS5G,YACdkH,EAAKxD,EAAe5D,SAAS6G,GAAY3G,YACzCmH,IAAkBF,EAAK3Y,KAAK2R,KAAK2G,EAAS7G,eAAiB,EAAIiH,EAAKE,KAAQ,EAAIF,GAChFI,EAAQV,EAAKS,EAEbE,EAAa1C,EAAK9E,EAAED,IAAIpN,KAAKwR,iBAAiBrE,SAASwH,IAUvDG,EAAM3D,EAAOhE,SAAkC,EAAzB0H,EAAWlH,IAAIwD,IAErC4D,EADaF,EAAWvH,SAASwH,GACb3H,SAASnN,KAAK2R,GAExCQ,EAAK9E,EAAI0H,EAAO3H,IAAIpN,KAAKwR,iBAAiBrE,SAASyH,IACnDzC,EAAKpF,SAAWmE,EAAe9D,IAAI+E,EAAK9E,EAAEF,SAASyH,GAAO,EAGtD,KAAAnC,UAAY,KAChB,MAAMuC,EAAU7pB,KAAKonB,MACf0C,EAAYD,EAAUhV,KAAKyR,YACjCzR,KAAKyR,YAAcuD,EACnBhV,KAAK0R,aAAeuD,EAAYjV,KAAK6R,MACrC,MAAMqC,EAAK,IAAOlU,KAAK4R,eAEvB,KAAO5R,KAAK0R,aAAewC,GAAI,CAC3B,IAAK,MAAM,KAAC/B,KAASnS,KAAKsR,YACtBtR,KAAKiU,YAAY9B,EAAM,EAAInS,KAAK4R,gBAEpC5R,KAAK0R,aAAewC,C,CAGxB,MAAMgB,EAAgBlV,KAAKsR,YAAYxU,QAAQqY,GAAaA,EAAShD,KAAKpF,SAASG,GAAK,IACxFlN,KAAKsR,YAActR,KAAKsR,YAAYxU,QAAQqY,GAAaA,EAAShD,KAAKpF,SAASG,EAAI,IACpFlN,KAAK0S,iBAED1S,KAAKsR,YAAYzkB,OAAS,GAC1B2lB,sBAAsBxS,KAAKyS,WAG/B,IAAK,MAAM0C,KAAYD,EACnBC,EAAS7C,mBAGmB,IAA5BtS,KAAKsR,YAAYzkB,SACjBmT,KAAKuR,iBAAkB,E,EAIvB,KAAA6D,YAAepH,IACnBhO,KAAKgO,IAAMA,CAAG,EAGV,KAAAqH,SAAY5I,SACFjZ,IAAViZ,IAEJzM,KAAKE,SAAS,CACVmI,KAAMoE,IAEVzM,KAAK0S,iBAAgB,EA7LrB,MAAM,KAAClD,EAAI,UAAEvhB,GAAa+R,KAAKH,MAE/BG,KAAK0P,KAAO,IAAI4F,GAAK9F,EAAMvhB,EAAYsnB,GAAuBC,IAC9DxV,KAAKqS,WAAc,IAAa7C,EAEhCxP,KAAK3T,MAAQ,CACTgc,KAAM,IAEd,CAEOoN,oBACHzV,KAAK0S,gBACT,CAEOgD,qBACH,MAAM,KAAClG,EAAI,UAAEvhB,GAAa+R,KAAKH,MAE/BG,KAAK0P,KAAO,IAAI4F,GAAK9F,EAAMvhB,EAAYsnB,GAAuBC,IAC9DxV,KAAKqS,WAAc,IAAa7C,EAChCxP,KAAK0S,gBACT,CA4KOlS,SACH,MAAM,KAAC6H,GAAQrI,KAAK3T,OACd,KAACmjB,EAAI,aAAET,EAAY,KAAE4G,EAAI,WAAEnH,GAAcxO,KAAKH,MAC9CiP,EAAS8G,GAAAA,cAAcD,GAAMnG,GAGnC,OACIpQ,EAAAA,cAAA,OAAKN,UClP6L,kBDmP9LM,EAAAA,cAAA,OAAKN,UCnPuN,qBDoPxNM,EAAAA,cAAA,OAAKsN,IAAK1M,KAAKqR,OAAQvS,UCpP8N,iBDqPjPM,EAAAA,cAACyW,GAAAA,GAAmB,CAACC,aAAW,EAACC,cAAY,EAACV,SAAUrV,KAAKqV,WAC7DjW,EAAAA,cAACkN,GAAU,CAACG,MAAOpE,EAAMmE,OAAQnE,EAAMuE,WAAY5M,KAAKoV,cACxDhW,EAAAA,cAACyP,GAAW,CAACC,OAAQA,EAAQN,WAAYA,EAAYO,aAAcA,MAKvF,EAGJ,YE/PA,IAAgB,KAAO,eCmCvB,MAAMiH,WAAW5W,EAAAA,cAGbQ,YAAYC,GACRC,MAAMD,GAHH,KAAAnE,OAAS0D,EAAAA,YAWR,KAAA6W,WAAa,K,MACE,QAAnB/X,EAAA8B,KAAKtE,OAAOwa,eAAO,IAAAhY,GAAAA,EAAEgV,UAAU,EAP/BlT,KAAK3T,MAAQ,CACT8pB,MAAO,EAEf,CAOA3V,SACI,MAAM,qBACF4V,EAAoB,MACpBje,EAAK,KACLqX,EAAI,KACJmG,EAAI,YACJha,EAAW,OACXxI,EAAM,WACNqb,EAAU,SACVjW,EAAQ,UACRtK,EAAS,cACTooB,EAAa,aACbC,EAAY,cACZlL,EAAa,aACbmL,EAAY,aACZC,EAAY,WACZC,EAAU,WACVC,EAAU,EACV/V,GACAX,KAAKH,MAEH8W,EAAY7N,GAAO3V,EAAO+E,KAEhC,OACIkH,EAAAA,cAAA,WACIA,EAAAA,cAACwX,GAAG,CAACC,WAAS,GACVzX,EAAAA,cAAC0X,GAAG,CAAChY,UAAWK,GAAAA,OAAc4X,GAAI,CAAC1O,KAAM,EAAG2O,MAAO,GAAIC,GAAI,CAAC5O,KAAM,EAAG2O,MAAO,IACxE5X,EAAAA,cAACgS,GAAM,CACH1E,IAAK1M,KAAKtE,OACV8T,KAAMA,EACNmG,KAAMA,EACN1nB,UAAWA,EACXugB,WAAYA,EACZO,aAAc4H,KAGtBvX,EAAAA,cAAC0X,GAAG,CAACC,GAAI,EAAGE,GAAI,GACZ7X,EAAAA,cAAA,OAAKN,UAAWK,GAAAA,MACZC,EAAAA,cAAC8X,GAAS,CAACpY,UAAU,qBACjBM,EAAAA,cAAC+X,GAAK,KAAExW,EAAE,iBACVvB,EAAAA,cAAC+L,GAAU,CACPhT,MAAOA,EACP4D,IAAK/P,EACLye,KAAMze,EACNyY,IAAK9I,EACLyN,SAAUgC,KAGlBhM,EAAAA,cAACwX,GAAG,CAACC,WAAS,GACVzX,EAAAA,cAAC0X,GAAG,CAACM,GAAI,CAAC/O,KAAM,GAAIgP,GAAI,CAAChP,KAAM,KAC3BjJ,EAAAA,cAAC8X,GAAS,KACN9X,EAAAA,cAAC+X,GAAK,KAAExW,EAAE,SACVvB,EAAAA,cAACsM,GAAM,CACHlD,SAAU4N,EACVje,MAAOwd,EAAK5K,WACZvB,QAAUF,GAAQiN,EAAa5qB,OAAOC,SAAS0d,EAAK,MAEpDlK,EAAAA,cAAA,UAAQjH,MAAO,GAAIwI,EAAE,YACrBvB,EAAAA,cAAA,UAAQjH,MAAO,GAAIwI,EAAE,eACrBvB,EAAAA,cAAA,UAAQjH,MAAO,GAAIwI,EAAE,gBAIjCvB,EAAAA,cAAC0X,GAAG,CAACM,GAAI,CAAC/O,KAAM,GAAIgP,GAAI,CAAChP,KAAM,KAC3BjJ,EAAAA,cAAC8X,GAAS,KACN9X,EAAAA,cAAC+X,GAAK,KAAExW,EAAE,SACVvB,EAAAA,cAACsM,GAAM,CACHlD,SAAU4N,EACVje,MAAOqX,EAAKzE,WACZvB,QAAUF,GAAQkN,EAAa7qB,OAAOC,SAAS0d,EAAK,MAEpDlK,EAAAA,cAAA,UAAQjH,MAAO,GAAC,KAChBiH,EAAAA,cAAA,UAAQjH,MAAO,IAAE,MACjBiH,EAAAA,cAAA,UAAQjH,MAAO,IAAE,UAKjCiH,EAAAA,cAACqM,GAAM,CAAC3M,UAAU,iBAAiBsJ,OAAK,EAACvJ,MAAM,UAAUS,QAASmX,GAC7D9V,EAAE,QAEPvB,EAAAA,cAAC2J,GAAAA,GAAK,CAACjK,UAAU,OAAO3G,MAAOke,EAAe7N,UAAQ,IACtDpJ,EAAAA,cAACqM,GAAM,CAAC3M,UAAU,YAAYsJ,OAAK,EAACvJ,MAAM,UAAUS,QAASoX,GACxD/V,EAAE,gBAQnBvB,EAAAA,cAACkY,GAAK,CAACrX,OAAQ1H,EAAU4H,OAAQmW,GAC7BlX,EAAAA,cAACiN,GAAS,OAI1B,EAGJ,UAAetK,EAAAA,GAAAA,IAAgB,cAAe,CAACwV,SAAS,GAAxD,CAA+DvB,I,uTC7H/D,MAAMwB,GAAY/kB,EAAQ,MACpBglB,GAAWhlB,EAAQ,OAoCzB,MAAM2e,WAAehS,EAAAA,cAIjBQ,YAAYC,GACRC,MAAMD,GAJF,KAAA6X,cAAe,EAChB,KAAAC,GAAKvY,EAAAA,YAyBJ,KAAAwY,WAAa,IAAWjlB,GAAA,gCAC5B,MAAMrG,EAAU0T,KAAKH,MAAMjO,KAAKtF,QAC1BsF,EAAOoO,KAAKH,MAAMjO,KAAKA,KAE7B,GADApG,QAAQC,IAAI,0CAA2CuU,KAAKH,MAAMjO,OAC5DA,IAAQtF,EAAU,OACxB,MAAMyH,EAAW,IAAInC,EAAKiB,IAAImB,SAASwjB,GAAWnsB,GAGlD,OAFAG,QAAQC,IAAI,kBAAmBsI,GACpBA,EAASkQ,QAAQ4T,eAAevrB,GAAS6X,KAAK,CAACtP,KAAMvI,GAEpE,IAEQ,KAAAwrB,WAAa,IAAWnlB,GAAA,gCAC5B,MAAMrG,EAAU0T,KAAKH,MAAMjO,KAAKtF,QAC1BsF,EAAOoO,KAAKH,MAAMjO,KAAKA,KAC7B,IAAKA,EAAM,OACX,MAAMmC,EAAW,IAAInC,EAAKiB,IAAImB,SAASwjB,GAAWnsB,GAClDG,QAAQC,IAAI,kBAAmBsI,GAC/B,MAAMgkB,EAAahkB,EAASkQ,QAAQ8T,WAOpC,OANAvsB,QAAQC,IAAIuU,KAAKH,MAAMnE,OAAOxD,IAAM,KAC3B6f,EAAW/X,KAAKH,MAAMnE,OAAOxD,IAAM,KAAKkO,KAAK,CAClDvR,KAAMvI,EACN6L,MAAO6H,KAAKH,MAAMnE,OAAOvD,MAAQ2D,KAAAkc,IAAA,GAAM,GACvC3R,IAAK,MAGb,IAEQ,KAAA4R,gBAAkB,IAAWtlB,GAAA,gCACjC,MAAMrG,EAAU0T,KAAKH,MAAMjO,KAAKtF,QAC1BsF,EAAOoO,KAAKH,MAAMjO,KAAKA,KAC7B,IAAKA,EAAM,OACX,MACMsmB,EADgB,IAAItmB,EAAKiB,IAAImB,SAASyjB,GAAUlsB,GACxB0Y,QAAQiU,QACtC,IAAIC,EAASnY,KAAKH,MAAMnE,OAAOvD,MAAM4S,WAUrC,aATMmN,EAAQ7sB,EAAkByI,KAAAA,MAAAA,MAAiBqkB,EAAQ,SAAS/R,KAAK,CACnEvR,KAAMvI,KAKD8rB,EAFQ,IAAIxmB,EAAKiB,IAAImB,SAASwjB,GAAWnsB,GAChB4Y,QAAQmU,kBAChBpY,KAAKH,MAAMnE,OAAOxD,IAAM,IAAKpE,KAAAA,MAAAA,MAAiBqkB,EAAQ,SAAS/R,KAAK,CAC1FvR,KAAMvI,GAGd,IAEQ,KAAAoqB,WAAa,IAAW/jB,GAAA,gCAC5B,MAAMrG,EAAU0T,KAAKH,MAAMjO,KAAKtF,QAC1BsF,EAAOoO,KAAKH,MAAMjO,KAAKA,KAC7B,IAAKA,EAAM,OACX,MACMymB,EADW,IAAIzmB,EAAKiB,IAAImB,SAASwjB,GAAWnsB,GACZ4Y,QAAQoU,2BACxCA,IAAuBjS,KAAK,CAC9BvR,KAAMvI,GAEd,IAEQ,KAAAgsB,UAAY,IAAW3lB,GAAA,gCAC3B,MAAMrG,EAAU0T,KAAKH,MAAMjO,KAAKtF,QAC1BsF,EAAOoO,KAAKH,MAAMjO,KAAKA,KAC7B,IAAKA,EAAM,OACX,MAAMmC,EAAW,IAAInC,EAAKiB,IAAImB,SAASwjB,GAAWnsB,GAIlD,OAHAG,QAAQC,IAAI,iCAAkCsI,IAErCwkB,EADUxkB,EAASkQ,QAAQqU,aACdnU,KAAK,CAACtP,KAAMvI,EAAS+Z,IAAK,MAEpD,IAEQ,KAAAiQ,aAAe,KACnB,MAAM,WAACjU,EAAU,KAAErI,GAAQgG,KAAKH,MAChCwC,GAAYrI,EAAKzB,SAAS,EAGtB,KAAAke,WAAa,IAAW9jB,GAAA,gC,QAC5BqN,KAAKE,SAAS,CAACsY,SAAS,IACxB,MAAM,OAAC9c,EAAM,UAAE9L,EAAS,SAAEmL,EAAQ,WAAE7M,EAAU,iBAAEP,EAAgB,cAAE8qB,EAAa,UAAEpe,EAAS,SAAEqe,GACxF1Y,KAAKH,MACTrU,QAAQC,IAAI,6BAA8BiQ,EAAOxD,KAC5B4D,KAAK6O,MAAMjP,EAAOvD,OAC3BuD,EAAOxD,IACF2D,GAAAA,SAAAA,OAFjB,MAIM8c,ElCrKR,SACF/e,EACA1B,EACA2B,EACA6e,EACAD,EACApe,GAEA,OAAKqe,EAIAD,EAOoB,UAArBpe,EAAUb,OACHoO,GAAY,qDAGE,eAArBvN,EAAUb,OACHoO,GACH,iIAKiB,WAArBvN,EAAUb,OACHoO,GAAY,sEAGnBvN,EAAUX,MAAQW,EAAU9H,QAAUvG,EAC/B4b,GAAY,+EAGhB,CAACzE,aAAa,EAAM0E,aAAc,IAzB9BD,GACH,6IALGA,GAAY,oCA8B3B,CkC8HuBzE,CAAYvJ,EAAU1B,EAAK0gB,EAAcF,EAAUD,EAAepe,GACjF,GAAKse,EAAL,CAEAntB,QAAQC,IAAI,cACZ,UACUuU,KAAKiY,kBACXzsB,QAAQC,IAAI,yEACZ,IAAIotB,QAAmB7Y,KAAKsY,YAC5B9sB,QAAQC,IAAI,gBAAiBotB,GAC7B,IAAI7G,EAAoB,KAExBxmB,QAAQC,IAAI,mBAAoBotB,GAChC7Y,KAAKE,SAAS,CACV4Y,aAAc9Y,KAAK3T,MAAMysB,aAAe,UAEP,QAA/BC,EAAe,QAAf7a,EAAA8B,KAAK2X,GAAGzB,eAAO,IAAAhY,OAAA,EAAAA,EAAExC,OAAOwa,eAAO,IAAA6C,OAAA,EAAAA,EAAEjH,QAAQ+G,EAAY7G,GAC3DxmB,QAAQC,IAAI,oC,CACd,MAAO0C,GACLD,EAAWC,GACX6R,KAAKE,SAAS,CAACsY,SAAS,G,CAE5BxY,KAAKE,SAAS,CAACsY,SAAS,GApBL,CAqBvB,IAEQ,KAAApN,cAAiBjT,IACrB,MAAM,YAAC6gB,GAAehZ,KAAKH,MAC3BmZ,EAAY7gB,EAAM,EAGd,KAAAoe,aAAgBZ,IAEpB,MAAM,OAACja,EAAM,UAAEud,GAAajZ,KAAKH,OAC3B,IAAC3H,GAAOwD,EAEdud,EADsB,IAAPtD,EAAczd,EAAM,IAClB,EAGb,KAAAse,aAAgB0C,IAEpB,MAAM,OAACxd,EAAM,UAAEud,GAAajZ,KAAKH,OAC3B,IAAC3H,GAAOwD,EAEdud,EADuC,IAAxBnd,KAAK8X,MAAM1b,EAAM,KAAaghB,EAC5B,EAGb,KAAAC,UAAaC,IACjB,MAAM,KAACpf,GAAQgG,KAAKH,OACd,MAACpH,GAASuB,EAEZvB,GC7NN,SAAwB2gB,GAC1BA,EAAM3H,YAAc,EACpB2H,EAAMC,MACV,CD2NYC,CAAcF,E,EAzJlBpZ,KAAK3T,MAAQ,CACTmiB,YAAY,EACZsK,aAAc,EACd3lB,OAAQ,CAACkU,OAAQ,EAAGnP,IAAK,EAAGoP,KAAK,EAAOL,WAAY,GACpDsS,OAAQ,IACRf,SAAS,EAEjB,CAEA/C,oBACI+D,aAAY,KACRxZ,KAAK4X,aAAapoB,MAAMiqB,IAChBA,GACAzZ,KAAKE,SAAS,CACVqZ,OAAQzlB,KAAAA,MAAAA,QAAmB2lB,EAAc,U,GAGnD,GACH,IACP,CA0IAjZ,SACI,MAAM,UAACvS,EAAS,KAAE+L,EAAI,UAAEK,EAAS,OAAEqB,GAAUsE,KAAKH,OAC5C,IAAC3H,EAAG,MAAEC,GAASuD,GACf,aAACod,EAAY,WAAEtK,EAAU,OAAErb,EAAM,QAAEqlB,GAAWxY,KAAK3T,MAEzD,IAAIsP,GAAcC,EAAAA,GAAAA,QAAOC,GAAAA,SAAAA,OAAiB3D,EAAKjM,ErFxL3B,GqF2LpB,GAFA0P,EAAc,KAEW,UAArBtB,EAAUb,OAAoB,CAC9B,MAAMiL,EAAM3I,KAAKC,IAAI1B,EAAUX,MAAQW,EAAU9H,QAASoJ,GAC1DA,EAAcG,KAAK2I,IAAIA,EAAKzY,E,CAGhC,OACIoT,EAAAA,cAAAA,EAAAA,SAAA,KACIA,EAAAA,cAACsa,GAAAA,EAAM,KACHta,EAAAA,cAAA,uBACAA,EAAAA,cAAA,QAAMrJ,KAAK,cAAc4jB,QAAQ,8CAErCva,EAAAA,cAAC4W,GAAE,CACCI,qBAAsB0C,EAAe,EACrCpM,IAAK1M,KAAK2X,GACV1pB,UAAWA,EACX0nB,KAAM7Z,KAAK8X,MAAM1b,EAAM,KACvBsX,KAAMtX,EAAM,IACZC,MAAOA,EACPke,cAAerW,KAAK3T,MAAMktB,OAC1B5d,YAAaA,EACbyP,cAAepL,KAAKoL,cACpBqL,WAAYzW,KAAKyW,WACjBF,aAAcvW,KAAKuW,aACnBC,aAAcxW,KAAKwW,aACnBhI,WAAYA,EACZrb,OAAM+G,OAAAC,OAAA,GAAMhH,GACZoF,SAAUyB,EAAKzB,SACf+d,aAActW,KAAKsW,aACnBI,WAAY1W,KAAK0W,aAEpB8B,EACGpZ,EAAAA,cAAA,OACIN,UAAU,yGACVuL,MAAO,CAACuP,gBAAiB,UAAWC,OAAQ,IAAOC,QAAS,KAE5D1a,EAAAA,cAAA,OAAKN,UAAU,cACXM,EAAAA,cAAA,YACAA,EAAAA,cAAA,YACAA,EAAAA,cAAA,YACAA,EAAAA,cAAA,YACAA,EAAAA,cAAA,YACAA,EAAAA,cAAA,YACAA,EAAAA,cAAA,YACAA,EAAAA,cAAA,aAEJA,EAAAA,cAAA,KAAGN,UAAU,mBAAiB,eAGlCM,EAAAA,cAAAA,EAAAA,SAAA,MAIhB,EAGJ,UAAe4C,EAAAA,GAAAA,KApQSC,EAAE5E,QAAO/Q,UAASsF,OAAMwL,UAC5C,MAAM,KAACpD,EAAI,UAAEK,EAAS,OAAEqB,GAAU2B,EAElC,MAAO,CACHob,eAAiC,KAFf7mB,EAAKtF,SAAWsF,EAAKmC,UAAYnC,EAAKA,MAAQmS,GAAanS,EAAKS,UAGlF2H,OACAK,YACAqe,SAA0B,OAAhBpsB,EAAQC,IAClBmP,SACAzN,UAAWmP,EAAInP,UACf2D,OACH,IAGuBxD,IAAkB,CAC1C2M,SAAUA,CAAC7C,EAAaC,EAAeyB,IAAqBxL,EAAS2M,GAAS7C,EAAKC,EAAOyB,IAC1FhK,UAAYC,GAAazB,EAASwB,EAAUC,IAC5CopB,UAAY/gB,GAAgB9J,EErCH8J,KAClB,CAACrK,KAAMC,GAAkBoK,QFoCK+gB,CAAU/gB,IAC/C8gB,YAAc7gB,GAAkB/J,EE1CL+J,KACpB,CAACtK,KAAMC,GAAoBqK,UFyCO6gB,CAAY7gB,IACrDkK,WAAa1B,GAAevS,EAASiU,GAAW1B,IAChDhT,iBAAmBC,GAAoBQ,EAAST,EAAiBC,IACjEM,WAAaC,GAAmBD,EAAWC,EAAOC,MA+OtD,CAA4DgjB,IG7O5D,MAAM2I,WAAa3a,EAAAA,UACfQ,YAAYC,GACRC,MAAMD,GAGV,KAAAma,WAAa,CAAC7hB,EAAe8hB,KACzB,MAAM,WAACD,EAAU,WAAE9rB,GAAc8R,KAAKH,MACtCma,EAAW7hB,EAAO8hB,GAAMtqB,MAAMzB,EAAW,EAG7C,KAAAwX,QAAU,KACN,MAAM,QAACA,EAAO,WAAExX,GAAc8R,KAAKH,MACnC6F,IAAU/V,MAAMzB,EAAW,EAG/B,KAAAsY,YAAc,KACV,MAAM,kBAAC0T,EAAiB,WAAEhsB,GAAc8R,KAAKH,MAC7Cqa,IAAoBvqB,MAAMzB,EAAW,EAGzC,KAAAisB,YAAc,KACV,MAAM,YAACA,EAAW,WAAEjsB,GAAc8R,KAAKH,MACvCsa,IAAcxqB,MAAMzB,EAAW,EAGnC,KAAA+X,SAAW,KACP,MAAM,SAACA,EAAQ,WAAE/X,GAAc8R,KAAKH,MACpCoG,IAAWtW,MAAMzB,EAAW,EAGhC,KAAAooB,aAAgB3lB,IACZ,MAAM,WAAC0R,GAAcrC,KAAKH,MAC1BwC,EAAW1R,EAAK,EAGpB,KAAAypB,mBAAsBzpB,IAClB,MAAM,iBAAC2R,GAAoBtC,KAAKH,MAChCyC,EAAiB3R,EAAK,EAG1B,KAAA0pB,cAAiBjgB,IACb,MAAM,YAACmI,GAAevC,KAAKH,MAC3B0C,EAAYnI,EAAQ,CAvCxB,CA0CAoG,SACI,MAAM,UAACnG,EAAS,KAAEL,EAAI,UAAE/G,EAAS,SAAEylB,GAAY1Y,KAAKH,OAC9C,SAACtH,EAAQ,eAAEC,EAAc,MAAEC,GAASuB,EAE1C,OACIoF,EAAAA,cAAA,WACIA,EAAAA,cAACkb,GAAO,CAAC7S,MAAI,GACTrI,EAAAA,cAAC4B,GAAS,KACN5B,EAAAA,cAAA,OAAKN,UCxGH,kBDyGEM,EAAAA,cAAA,OAAKN,UCzGwB,sBD0GzBM,EAAAA,cAACgS,GAAM,UAOnC,EAGJ,UAAepP,EAAAA,GAAAA,KA/FSC,EAAE5E,QAAOzL,OAAMtF,cACnC,MAAM,UAAC+N,EAAS,KAAEL,GAAQqD,EAE1B,MAAO,CACHhD,YACAL,OACA/G,UAAWrB,EACX8mB,SAA0B,OAAhBpsB,EAAQC,IACrB,IAGuB6B,GAAuB8L,OAAAC,OAAAD,OAAAC,OAAC,CAAC,GAC9C+H,EAAAA,GAAAA,IACC,CACII,iBAAgB,GAChBD,WAAU,GACVE,YAAWA,IAEfnU,IACH,CACD4rB,WAAYA,CAAC7hB,EAAe8hB,IAAiB7rB,EzCsZ3C,SAAqBsL,EAAeuB,GACtC,MAAO,CAAO7M,EAAoB0B,IAAsB6C,GAAA,gCACpD,MAAMM,EAAYnD,IAAW8B,KACvBmC,EAAWd,EAAUc,SACrBzH,EAAU2G,EAAU3G,QACpB+N,EAAYvK,IAAWuN,MAAMhD,UAC7Bb,EAASa,EAAUb,OAEzB,IAAKtM,IACD,MAAM,IAAImB,MACN,6FAIR,IAAK0V,GAAa9Q,EAAUZ,SACxB,MAAM,IAAIhE,MAAM,wCAGpB,IAAK/B,IAAYyH,IAAad,EAAUrB,KACpC,MAAM,IAAIvD,MAAM,+CAGpB,IAAKsU,GAActI,GACf,MAAM,IAAIhM,MAAM,wBAAwBmL,2BAG5C,MAAMwgB,EAAajmB,EAASkQ,QAAQ+V,WAC9BvgB,GAAY8gB,EAAAA,GAAAA,iBAAgBtf,GA/LJuf,IAAC5oB,EAAY6C,EAkM3C,WAlM+B7C,EAiMsBqB,EAAUrB,KAjMpB6C,EAiM0B4F,EAAUO,mBAhM9EnG,EAIED,GAAsB5C,EAAM6C,GAAiBjF,MAAMsU,GAAwB,OAAZA,IAH3D1O,QAAQ+Q,SAAQ,KAiMnB,MAAM,IAAI9X,MAAM,oEAGpB,MACMM,SADiBzC,EAAAA,EAAAA,KAAW,4BACZyC,KAChB6L,EAAgB7L,EAAK6L,cACrBigB,EAAiB9rB,EAAK8rB,eACtBC,EAAe/rB,EAAK+rB,aACpB3jB,EAAYpI,EAAKoI,UAEvB3I,EAASwU,GAAgBnJ,EAAWe,EAAed,UAE7C,IAAItE,SAAc,CAAC+Q,EAAS9Q,KAC9B2kB,EAAWvgB,EAAU,GAAIghB,EAAgBC,EAAclgB,EAAezD,GACjEqP,KAAK,CACFvR,KAAMvI,EACN6L,OAAOwiB,EAAAA,GAAAA,eAAcjhB,GAAOqR,WAC5B1E,IAAK,OAER1S,GAAG,SAAUxF,IACVkH,EAAOlH,EAAM,IAEhBwF,GAAG,mBAAoBc,IACpBrG,EAASwU,GAAgBnJ,EAAWe,EAAed,EAAOjF,GAAiB,IAE9Ed,GAAG,WAAYmQ,IACRD,GAAoBC,KACpB1V,EAAS2U,GAAa,wBACtB1N,EAAO,IAAIhH,MAAM,oC,IAGxBsF,GAAG,gBAAgB,CAACuE,EAAa4L,KAE9B,GAAY,IAAR5L,EAAW,CACX,MAAMmR,EAAQvF,EAAQa,OAASb,EAAQa,OAAOiW,eAAiB,KAC/D,GAAI/W,GAAoBC,KAAauF,EACjCjb,EAAS2U,GAAa,wBACtB1N,EAAO,IAAIhH,MAAM,wCACd,CACH,MAAMqM,EAAU2O,EAAMzE,aAAqBlK,OACrCH,EAAc8O,EAAMzE,aAAqBpK,cACzCF,EAAY+O,EAAMzE,aAAqBM,YACH,WAAtCpV,IAAWuN,MAAMhD,UAAUb,QAC3BpL,EAAS6U,GAAkBvI,EAAQH,EAAYD,IAEnD6L,G,MAIXxW,OAAOxB,IACJkH,EAAOlH,EAAM,GACf,GAEd,GACJ,CyC3e0D6rB,CAAW7hB,EAAO8hB,IACxEvU,QAASA,IAAMtX,EAASsX,MACxBwU,kBAAmBA,IAAM9rB,EzC0zBvB,WACF,OAAcA,GAAsBuE,GAAA,gCAChC,MAAMQ,QAAe/E,EAASoY,MAE9B,OADApY,EAASwB,EAAUuD,EAAOtD,MACnBsD,CACX,GACJ,CyCh0BsC+mB,IAClCC,YAAaA,IAAM/rB,EzCmmBjB,WACF,MAAO,CAAOA,EAAoB0B,IAAsB6C,GAAA,gCACpD,MAAMtG,EAAQyD,IACRuK,EAAYhO,EAAMgR,MAAMhD,UACxB/N,EAAUD,EAAMuF,KAAKtF,QACrBsF,EAAOvF,EAAMuF,KAAKA,KAClBmC,EAAW1H,EAAMuF,KAAKmC,SACtB1B,EAAUhG,EAAMuF,KAAKS,QAErBqI,EAASL,EAAUK,OACnBf,EAAUU,EAAUV,QACpBC,EAAWS,EAAUT,SACrB1B,EAAMmC,EAAUnC,IAChB4B,EAAaO,EAAUP,WACvBe,EAAYR,EAAUQ,UAG5B,GAFwB9G,EAAS8mB,QAAQ1qB,SAEpCyB,IAAStF,IAAYyH,EACtB,MAAM,IAAI1F,MAAM,+CAGpB,IAAK0V,GAAa1R,GACd,MAAM,IAAIhE,MAAM,0CAGpB,IAAKgV,GAA2BhJ,GAC5B,MAAM,IAAIhM,MAAM,uBAAuBgM,EAAUb,iCAGrD,IAAKa,EAAUE,aAAeF,EAAUC,eAAuB9G,IAAXkH,EAChD,MAAM,IAAIrM,MAAM,kBAGpB,GAAgB,IAAZsL,EAAe,CACf,MAAMmhB,EAAmB/mB,EAASkQ,QAAQ8W,2BACpC,IAAI3lB,SAAQ,CAAC+Q,EAAS9Q,IACxBylB,EAAiBpgB,GACZ0L,KAAK,CAACvR,KAAMvI,EAAS6L,MAAO,EAAGkO,IAAK,OACpC1S,GAAG,mBAAoBc,IACpBrG,EAASkV,GAA6B7O,GAAiB,IAE1Dd,GAAG,SAAUxF,IACVkH,EAAOlH,EAAM,IAEhBqB,MAAMsU,IACCD,GAAoBC,GACpB1V,GAzfjB,CAACA,EAAoB0B,KAJV,gCAKcA,IAAWuN,MAAMhD,UANxBb,OAOjBpL,EAASsU,MAETpU,EAAAA,GAAsB,uC,IAufNF,EAASqV,GAAqB,IAAItY,M,IAGzCwE,OAAOxB,IACJkH,EAAOlH,EAAM,K,KAGtB,CACH,IAAIoM,GAAaW,EAAAA,GAAAA,QAAOb,EAAUE,YAC9BD,GAAWY,EAAAA,GAAAA,QAAOb,EAAUC,UAChC,MAAMnC,GAAQwiB,EAAAA,GAAAA,eAActgB,EAAUR,UAAoBkR,WAC1D,IAAIxY,GAAUooB,EAAAA,GAAAA,eAAc7gB,GAAYiR,WACpC9P,EAAWZ,EAAUC,SAEA,eAArBD,EAAUb,SACVe,EAAaF,EAAUE,WACvBD,EAAWD,EAAUC,SACrB/H,GAAUooB,EAAAA,GAAAA,eAActgB,EAAU9H,SAASwY,WAC3C9P,EAAWZ,EAAUZ,UAAUE,IAGnC,MAAMqhB,EAAsBjnB,EAASkQ,QAAQ+W,0BACvC,IAAI5lB,SAAQ,CAAC+Q,EAAS9Q,IACxB2lB,EACIrhB,EACAC,EACA1B,EACAC,EACA5F,EACAgI,EACAD,EACAI,EACAG,EACAI,GAECmL,KAAK,CAACvR,KAAMvI,EAAS+Z,IAAK,OAC1B1S,GAAG,mBAAoBc,IACpBrG,EAASkV,GAA6B7O,GAAiB,IAE1Dd,GAAG,SAAUxF,IACVkH,EAAOlH,EAAM,IAEhBqB,MAAMsU,IACCD,GAAoBC,GACpB1V,EAASsU,MAETtU,EAASqV,GAAqB,IAAItY,M,IAGzCwE,OAAOxB,IACJkH,EAAOlH,EAAM,K,CAIjC,GACJ,CyC1sBgCgsB,IAC5BlU,SAAUA,IAAM7X,EAAS6X,MACzB/X,WAAaC,GAAiBD,EAAWC,EAAOC,MAsEpD,CAA4D2rB,IEpH5D,GAAuB,cCMjBkB,GAAUA,IACZ7b,EAAAA,cAAA,OAAKN,UAAWK,IACZC,EAAAA,cAAC8b,GAAI,CAACtZ,KAAK,UAAUuZ,MAAI,EAAC9S,KAAK,QAIjC+S,GAAUA,IACZhc,EAAAA,cAAA,OAAKN,UAAWK,IACZC,EAAAA,cAAA,QAAMN,UAAU,eAAa,uBAI/Buc,GAAWA,IACbjc,EAAAA,cAAA,OAAKN,UAAWK,IACZC,EAAAA,cAAA,QAAMN,UAAU,eAAa,kBAiBrC,MAAMwc,WAA4Blc,EAAAA,UAO9BQ,YAAYC,GACRC,MAAMD,GAENG,KAAK3T,MAAQ,CACTsC,UAAM6E,EACNrF,WAAOqF,EAEf,CAEQ+nB,UAAUC,GACdtvB,EAAAA,EAAAA,IACYsvB,GACPhsB,MAAMd,IACH,MAAMC,EAAOD,EAASC,KACtBqR,KAAKE,SAAS,CAACvR,QAAM,IAExBgB,OAAOxB,IACJ6R,KAAKE,SAAS,CAAC/R,SAAO,GAElC,CAEAsnB,oBACI,MAAM,IAAC+F,GAAOxb,KAAKH,MAEnBG,KAAKub,UAAUC,EACnB,CAEA9F,mBAAmB+F,GACf,MAAM,IAACD,GAAOxb,KAAKH,MAEf2b,IAAQC,EAAUD,KAClBxb,KAAKub,UAAUC,EAEvB,CAEAhb,SACI,MAAM,QAACkb,EAAO,SAAEC,EAAQ,QAAEnD,EAAO,QAAEoD,GAAW5b,KAAKH,OAC7C,KAAClR,EAAI,MAAER,GAAS6R,KAAK3T,MAE3B,OAAIsC,EACOitB,EAAQjtB,GACRR,EACHA,EAAMO,UAAsC,MAA1BP,EAAMO,SAAS8K,OAC1BmiB,EAAWA,IAAa,KAExBD,EAAUA,IAAY,KAG1BlD,EAAUA,IAAY,IAErC,EAxDO8C,GAAAhR,aAAe,CAClBkO,QAASA,IAAMpZ,EAAAA,cAAC6b,GAAO,MACvBU,SAAUA,IAAMvc,EAAAA,cAACic,GAAQ,MACzBK,QAASA,IAAMtc,EAAAA,cAACgc,GAAO,OAwD/B,Y,2BC/EA,MAeA,GAfiBld,I,IAAA,GAACjO,EAAE,OAAEgQ,EAAM,OAAEE,EAAM,SAAEiC,EAAQ,UAAErB,EAAS,UAAE8a,EAAY,OAAM,OAAEtS,GAAMrL,EAAKa,E,yUAAIC,CAAAd,EAA7E,sEAA0F,OACvGkB,EAAAA,cAAC0c,GAAAA,GAAgB5hB,OAAAC,OAAA,CACblK,GAAIA,EACJgQ,OAAQA,EACRE,OAAQA,EACRY,UAAWA,EACX8a,UAAWA,EACXxR,MAAO,CAACwP,OAAQ,IAAOkC,SAAU,WAC7Bhd,EAAI,CACRwK,OAAQA,IAERnK,EAAAA,cAAC4c,GAAAA,EAAW,KAAE5Z,GACC,EChBvB,MAAM6Z,WAAwB7c,EAAAA,UAG1BQ,YAAYC,GACRC,MAAMD,GASV,KAAAM,OAAS,KACLH,KAAKE,SAAS,CAACgc,aAAa,GAAO,EAGvC,KAAAC,OAAS,KACLnc,KAAKE,SAAS,CAACgc,aAAa,IAC5BE,YAAW,KACPpc,KAAKE,SAAS,CAACgc,aAAa,GAAO,GACpC,IAAK,EAfRlc,KAAK3T,MAAQ,CACT6vB,aAAa,GAGjBlc,KAAK0M,IAAMtN,EAAAA,WACf,CAaAoB,SACI,MAAM,YAAC0b,GAAelc,KAAK3T,OACrB,QAACstB,EAAO,QAAE/rB,GAAWoS,KAAKH,MAEhC,OACIT,EAAAA,cAAA,YACIA,EAAAA,cAACid,KAAoB,CAACC,KAAM3C,EAASwC,OAAQnc,KAAKmc,QAC9C/c,EAAAA,cAAA,QAAMsN,IAAK1M,KAAK0M,KACX,IACDtN,EAAAA,cAACuC,GAAU,CACPC,KAAK,QACLtC,QAASA,KACC,IAEX,MAGVU,KAAK0M,IAAIwJ,SACN9W,EAAAA,cAACmd,GAAO,CAACtc,OAAQic,EAAa3S,OAAQvJ,KAAK0M,IAAIwJ,QAAS/V,OAAQH,KAAKG,QACjEf,EAAAA,cAAA,QAAMN,UAAU,gBAAgBlR,GAAoB,YAKxE,EAGJ,YCjEA,GAAgF,mBAAhF,GAAiH,qBCuCjH,GA1BiB4uB,EAAE3sB,MAAK4B,mBACpB2N,EAAAA,cAAA,OAAKN,UDdkB,mBCenBM,EAAAA,cAAA,iBAEKvP,EAAII,GAAE,IAAEmP,EAAAA,cAACqd,GAAe,CAAC7uB,QAAS,yBAA0B+rB,QAAS,OAAO9pB,EAAII,QAErFmP,EAAAA,cAAA,YAAOsd,IAAM7sB,EAAI8sB,WAAWC,OAAO,QACnCxd,EAAAA,cAAA,wBACc,IACVA,EAAAA,cAAA,UAAQN,UDtB6H,kBCsBlGQ,QAASA,IAAM7N,EAAc5B,EAAIE,OAC/DF,EAAIE,KAAKyG,WAGlB4I,EAAAA,cAAA,OAAKN,UD1BwC,gBC2BzCM,EAAAA,cAAA,OAAKN,UAAWK,IACZC,EAAAA,cAAA,QAAMN,UAAWK,IAAiB,WAClCC,EAAAA,cAAC2M,GAAK,CAACC,KAAMnc,EAAIsI,SAErBiH,EAAAA,cAAA,OAAKN,UAAWK,IACZC,EAAAA,cAAA,QAAMN,UAAWK,IAAiB,UAClCC,EAAAA,cAAC2M,GAAK,CAACG,SAAO,EAACF,KAAMnc,EAAIuM,YCJzC,IAAe4F,EAAAA,GAAAA,KAlBU3V,IACrB,MAAM,IAAC+Q,GAAO/Q,EAEd,MAAO,CACH4B,UAAWmP,EAAInP,UAClB,GAaL,EARsB4uB,EAAE5uB,YAAWoZ,SAAQ2K,gBACvC,MAAM2D,EAAO7Z,KAAK8X,MAAMvM,EAAS,KAC3BmI,EAAOnI,EAAS,IAChB0H,EAAejG,GAAOkJ,GAE5B,OAAO5S,EAAAA,cAACgS,GAAM,CAACnjB,UAAWA,EAAWuhB,KAAMA,EAAMmG,KAAMA,EAAMnH,YAAY,EAAMO,aAAcA,GAAgB,ICPjH,GAVe+N,EAAE7sB,KAAIkI,QAAO2G,gBACxB,MAAMG,EAAaC,KAAW,eAAgBJ,GAE9C,OACIM,EAAAA,cAAA,QAAMnP,GAAIA,EAAI6O,UAAWG,GACpB9G,EACE,ECNf,MAEA,GAFkB+F,I,IAAIa,E,yUAAIC,CAAAd,EAAR,IAAqB,OAAAkB,EAAAA,cAAC2d,GAAAA,GAAiB7iB,OAAAC,OAAA,GAAK4E,GAAQ,ECYtE,GATuBie,EAAEjnB,OAAMkK,SAAQX,aAE/BF,EAAAA,cAACqM,GAAM,CAAC5M,MAAM,OAAOuJ,OAAK,EAAC9I,QAASA,GAChCF,EAAAA,cAAA,YAAOrJ,GACPqJ,EAAAA,cAAC8b,GAAI,CAACpc,UChBM,eDgBkB8C,KAAK,aAAayG,KAAK,KAAK4U,SAAUhd,EAAS,SAAMzM,KEhB/F,GAA8D,gBCcxD0pB,GAAQA,EAAExT,WACZA,EAAQtK,EAAAA,cAACC,GAAe,CAACuC,KAAK,QAAQ/C,MAAM,YAAeO,EAAAA,cAACC,GAAe,CAACuC,KAAK,QAAQ/C,MAAM,WAEnG,MAAMse,WAAqB/d,EAAAA,cACvBQ,YAAYC,GACRC,MAAMD,EACV,CAEAW,SACI,MAAM,IAAC3Q,GAAOmQ,KAAKH,MAEbud,GAAgBtW,EAAAA,GAAAA,YAAWjX,EAAIoL,SAAUpL,EAAIyK,UAC7C+iB,GAAkBvW,EAAAA,GAAAA,YAAWjX,EAAImL,WAAYnL,EAAI0K,YAGjD+iB,EAAgBztB,EAAI6K,OAAS,KAjBhB,6CAiB4C7O,EAEzD0xB,GAAezX,EAAAA,GAAAA,iBACjBjW,EACAnE,EACAmE,EAAIgW,gBACJhW,EAAIiL,QACJjL,EAAIE,KAAKI,QARY,GAWnBqtB,GAAiB1X,EAAAA,GAAAA,iBACnBjW,EACAnE,EACAmE,EAAIgW,gBACJhW,EAAIgL,UACJyiB,EAhBqB,GAoBnBtL,GAAYhL,EAAAA,GAAAA,kBAAiBnX,EAAI+J,SAAU/J,EAAImL,WAAYnL,EAAIoL,SAAUpL,EAAIqI,KAE7EulB,EAAiB5tB,EAAImiB,YAAcA,EAEzC,OACI5S,EAAAA,cAAA,OAAKN,UDrDc,wBCsDfM,EAAAA,cAAA,OAAKN,UAAWK,IACZC,EAAAA,cAAA,4CACAA,EAAAA,cAAC8d,GAAK,CAACxT,MAAO0T,KAElBhe,EAAAA,cAAA,OAAKN,UAAWK,IACZC,EAAAA,cAAA,gDACAA,EAAAA,cAAC8d,GAAK,CAACxT,MAAO2T,KAElBje,EAAAA,cAAA,OAAKN,UAAWK,IACZC,EAAAA,cAAA,sCACAA,EAAAA,cAAC8d,GAAK,CAACxT,MAAO6T,KAElBne,EAAAA,cAAA,OAAKN,UAAWK,IACZC,EAAAA,cAAA,wCACAA,EAAAA,cAAC8d,GAAK,CAACxT,MAAO8T,KAElBpe,EAAAA,cAAA,OAAKN,UAAWK,IACZC,EAAAA,cAAA,kCACAA,EAAAA,cAAC8d,GAAK,CAACxT,MAAO+T,KAI9B,EAGJ,YC9DMC,GAAQA,EAAEztB,KAAI8F,OAAMpH,UACtByQ,EAAAA,cAAA,OAAKN,UClB+E,mCDmBhFM,EAAAA,cAAA,YAAOrJ,GACPqJ,EAAAA,cAAC0d,GAAM,CAAChe,UCpBoI,kCDoB1F7O,GAAIA,EAAIkI,MAAOxJ,KAIzE,MAAMgvB,WAAyBve,EAAAA,cAC3BQ,YAAYC,GACRC,MAAMD,GAMV,KAAAM,OAAS,KACLH,KAAKE,SAAS,CAACD,QAASD,KAAK3T,MAAM4T,QAAQ,EAN3CD,KAAK3T,MAAQ,CACT4T,QAAQ,EAEhB,CAMAO,SACI,MAAM,OAACP,GAAUD,KAAK3T,OAChB,IAACwD,GAAOmQ,KAAKH,MACb1H,EAAQtI,EAAIsI,MAAQpM,EACpBwG,EAAU1C,EAAI0C,QAAUxG,EAE9B,OACIqT,EAAAA,cAAA,OAAKN,UC3CkB,4BD4CnBM,EAAAA,cAAC4d,GAAc,CAACjnB,KAAK,yBAAyBkK,OAAQA,EAAQX,QAASU,KAAKG,SAC5Ef,EAAAA,cAACkC,GAAQ,CAACrB,OAAQA,EAAQoK,MAAO,CAACoC,MAAO,SACrCrN,EAAAA,cAAA,WACIA,EAAAA,cAACse,GAAK,CAACztB,GAAI,OAAOJ,EAAII,aAAc8F,KAAK,WAAWpH,KAAMkB,EAAI8J,UAC9DyF,EAAAA,cAACse,GAAK,CAACztB,GAAI,OAAOJ,EAAII,cAAe8F,KAAK,YAAYpH,KAAMkB,EAAI+J,WAChEwF,EAAAA,cAACse,GAAK,CAACztB,GAAI,OAAOJ,EAAII,SAAU8F,KAAK,SAASpH,KAAMkB,EAAIqI,MACxDkH,EAAAA,cAACse,GAAK,CAACztB,GAAI,OAAOJ,EAAII,cAAe8F,KAAK,kBAAkBpH,KAAMwJ,IAClEiH,EAAAA,cAACse,GAAK,CAACztB,GAAI,OAAOJ,EAAII,aAAc8F,KAAK,gBAAgBpH,KAAM4D,IAC/D6M,EAAAA,cAACse,GAAK,CAACztB,GAAI,OAAOJ,EAAII,gBAAiB8F,KAAK,cAAcpH,KAAMkB,EAAI0K,aACpE6E,EAAAA,cAACse,GAAK,CAACztB,GAAI,OAAOJ,EAAII,cAAe8F,KAAK,YAAYpH,KAAMkB,EAAIyK,WAChE8E,EAAAA,cAACse,GAAK,CAACztB,GAAI,OAAOJ,EAAII,gBAAiB8F,KAAK,cAAcpH,KAAMkB,EAAImL,aACpEoE,EAAAA,cAACse,GAAK,CAACztB,GAAI,OAAOJ,EAAII,cAAe8F,KAAK,YAAYpH,KAAMkB,EAAIoL,WAChEmE,EAAAA,cAACse,GAAK,CAACztB,GAAI,OAAOJ,EAAII,YAAa8F,KAAK,UAAUpH,KAAMkB,EAAI6K,SAC5D0E,EAAAA,cAACse,GAAK,CACFztB,GAAI,OAAOJ,EAAII,qBACf8F,KAAK,mBACLpH,KAAMkB,EAAIgW,kBAEdzG,EAAAA,cAACse,GAAK,CAACztB,GAAI,OAAOJ,EAAII,eAAgB8F,KAAK,mBAAmBpH,KAAMkB,EAAIgL,YACxEuE,EAAAA,cAACse,GAAK,CAACztB,GAAI,OAAOJ,EAAII,aAAc8F,KAAK,iBAAiBpH,KAAMkB,EAAIiL,WAExEsE,EAAAA,cAAC+d,GAAY,CAACttB,IAAKA,KAInC,EAGJ,YEvDM+tB,GAAmBA,EAAEhkB,WAAUyN,SAAQ2K,gBACzC,OAAQpY,GACJ,KAAKiC,GAAAA,SAAAA,WACL,KAAKA,GAAAA,SAAAA,OACD,OAAOuD,EAAAA,cAACyd,GAAa,CAACxV,OAAQA,EAAQ2K,UAAWA,IACrD,QACI,OAAO,KAAK,EAkBxB,MAAM6L,WAAgBze,EAAAA,UAClBQ,YAAYC,GACRC,MAAMD,EACV,CAEAW,SACI,MAAM,IAAC3Q,EAAG,cAAE4B,GAAiBuO,KAAKH,MAElC,OACIT,EAAAA,cAAA,WACIA,EAAAA,cAACod,GAAQ,CAAC3sB,IAAKA,EAAK4B,cAAgB1B,GAAS0B,EAAc,CAAC1B,WAC5DqP,EAAAA,cAACwe,GAAgB,CAACvW,OAAQxX,EAAIqI,IAAK8Z,UAAWniB,EAAImiB,UAAWpY,SAAU/J,EAAI+J,WAC3EwF,EAAAA,cAACue,GAAgB,CAAC9tB,IAAKA,IAGnC,EAGJ,UAAemS,EAAAA,GAAAA,IAAQ,MAhCK5T,IACxB8T,EAAAA,GAAAA,IACI,CACIzQ,cAAaA,IAEjBrD,IA2BR,CAAiDyvB,IC1CjD,GAPYC,EAAEjuB,MAAKkuB,WACfluB,EACIuP,EAAAA,cAACye,GAAO,CAAChuB,IAAKA,IAEduP,EAAAA,cAACkc,GAAU,CAAUE,IAAK,aAAauC,IAASnC,QAAU/rB,GAAQuP,EAAAA,cAACye,GAAO,CAAChuB,IAAKA,MCAxF,IAAemuB,EAAAA,GAAAA,IAAa,CAACjoB,KAAM,OAAnC,EANiBkoB,EAAEttB,OAAMutB,aAAYruB,MAAKkuB,WACtC3e,EAAAA,cAACkY,GAAK,CAACnX,OAAQ+d,EAAYje,OAAQtP,GAC/ByO,EAAAA,cAAC0e,GAAG,CAACC,MAAOA,EAAOluB,IAAKA,OCFhC,IAAekS,EAAAA,GAAAA,KAAf,EAFsBoc,EAAExd,OAAwBvB,EAAAA,cAAA,cCMhD,IAAe4e,EAAAA,GAAAA,IAAa,CAACjoB,KAAM,iBAAnC,EAN2BqoB,EAAEztB,OAAMutB,gBAC/B9e,EAAAA,cAACkY,GAAK,CAACnX,OAAQ+d,EAAYje,OAAQtP,GAC/ByO,EAAAA,cAAC+e,GAAa,SCGtB,MAEA,GAFcjgB,I,IAAA,OAACmgB,GAAS,GAAKngB,EAAKa,E,yUAAIC,CAAAd,EAAxB,YAAqC,OAAAkB,EAAAA,cAACkf,GAAAA,GAAapkB,OAAAC,OAAA,CAACkkB,OAAQA,GAAYtf,GAAQ,ECF9F,MAIA,GAJkBb,I,IAAA,OAACmgB,GAAS,EAAK,MAAExf,GAAKX,EAAKa,E,yUAAIC,CAAAd,EAA/B,oBAA4C,OAC1DkB,EAAAA,cAACmf,GAAAA,GAAiBrkB,OAAAC,OAAA,CAACkkB,OAAQA,EAAQxf,MAAOA,GAAWE,GAAQ,ECcjE,MAAM/I,WAAiBoJ,EAAAA,UACnBQ,YAAYC,GACRC,MAAMD,GAMV,KAAAtJ,SAAYhJ,IACR,MAAM,SAACgJ,GAAYyJ,KAAKH,OAClB,SAACrJ,GAAYwJ,KAAK3T,MAExBkK,EAASC,GACTjJ,EAAEixB,gBAAgB,EAGtB,KAAAC,WAAcjoB,IACV,MAAMmT,EAAU3J,KAAK0e,iBAAiBloB,GACtCwJ,KAAKE,SAAS,CACV1J,WACAmT,WACF,EAGN,KAAA+U,iBAAoBloB,KCjDlB,SAA0BA,GAC5B,OAAOA,EAAS3J,QAAU,IAAM2J,EAAS3J,QAAU,GAAK,eAAe+b,KAAKpS,EAChF,CDgDYmoB,CAAgBnoB,IAEW,IAApBA,EAAS3J,aAChB,EAzBJmT,KAAK3T,MAAQ,CACTmK,SAAU,GAElB,CA4BAgK,SACI,MAAM,aAAClK,GAAgB0J,KAAKH,OACtB,SAACrJ,EAAQ,QAAEmT,GAAW3J,KAAK3T,MAEjC,OACI+S,EAAAA,cAAA,WACIA,EAAAA,cAAA,MAAIN,UAAU,eAAa,YAC3BM,EAAAA,cAACwf,GAAI,CAACC,SAAU7e,KAAKzJ,UACjB6I,EAAAA,cAAC8X,GAAS,KACN9X,EAAAA,cAAC2J,GAAK,CACFY,QAASA,EACTO,gBAAc,EACd/R,MAAO3B,EACPyT,YAAY,WACZT,QAASxJ,KAAKye,aAElBrf,EAAAA,cAAC0f,GAAQ,+EAEb1f,EAAAA,cAAA,uKAIAA,EAAAA,cAACqM,GAAM,CAAC5M,MAAM,UAAUhR,KAAK,SAAS2a,UAAsB,IAAZmB,EAAkBrK,QAASU,KAAKzJ,UAAQ,YAGxF6I,EAAAA,cAACqM,GAAM,CAAC5M,MAAM,OAAOS,QAAShJ,GAAY,uBAM1D,EAGJ,UAAe0L,EAAAA,GAAAA,SAAQxO,GApFKpF,IACxB8T,EAAAA,GAAAA,IACI,CACI3L,SAAQ,GACRD,aAAYA,IAEhBlI,IA8ER,CAAsD4H,IE/EtD,IAAegoB,EAAAA,GAAAA,IAAa,CAACjoB,KAAM,YAAnC,EAN2BqoB,EAAEztB,OAAMutB,gBAC/B9e,EAAAA,cAACkY,GAAK,CAACnX,OAAQ+d,EAAYje,OAAQtP,GAC/ByO,EAAAA,cAACpJ,GAAQ,SCKX+oB,GAAaA,EAAE5mB,QAAOpC,OAAMmW,WAAU,EAAO8S,SAAQ,KACvD5f,EAAAA,cAAA,OAAKN,UCfsC,gBDgBvCM,EAAAA,cAAA,MAAIN,UChBkE,wBDgBjC/I,GACrCqJ,EAAAA,cAAA,cAAM4f,EAAQ5f,EAAAA,cAAC2M,GAAK,CAACG,QAASA,EAASF,KAAM7T,IAAYA,IAmBjE,IAAe4J,EAAAA,GAAAA,KAAf,EAXkBkd,EAAE/nB,QAAOyJ,MACvB,MAAM,OAACvE,EAAM,QAAEC,EAAO,QAAEC,GAAWpF,EACnC,OACIkI,EAAAA,cAAA,MAAIN,UC5BY,gBD6BZM,EAAAA,cAAC2f,GAAU,CAAC5mB,MAAOkE,EAAStG,KAAM4K,EAAE,aACpCvB,EAAAA,cAAC2f,GAAU,CAAC7S,SAAO,EAAC/T,MAAOiE,EAAQrG,KAAM4K,EAAE,YAC3CvB,EAAAA,cAAC2f,GAAU,CAACC,OAAO,EAAO7mB,MAAOmE,EAASvG,KAAM4K,EAAE,WACjD,IEvBb,GANgBue,EAAE/uB,aACdiP,EAAAA,cAAA,KAAG+f,IAAI,aAAa5V,OAAO,SAASzH,KAAM,gCAAgC3R,IAAW2O,UCJ/D,kBDKjB3O,GEMK,MAAOivB,WAAiBhgB,EAAAA,cAClCQ,YAAYC,GACRC,MAAMD,EACV,CAEAW,SACI,MAAM,KAACzQ,GAAQiQ,KAAKH,MAEpB,OACIT,EAAAA,cAAA,OAAKN,UCpBU,mBDqBXM,EAAAA,cAAA,MAAIN,UAAU,eACT/O,EAAKyG,SACN4I,EAAAA,cAACqd,GAAe,CAAC7uB,QAAS,yBAA0B+rB,QAAS,QAAQ5pB,EAAKyG,cAE9E4I,EAAAA,cAAC8f,GAAO,CAAC/uB,QAASJ,EAAKI,UACvBiP,EAAAA,cAACkc,GAAU,CACPE,IAAK,eAAezrB,EAAKI,UACzByrB,QAAU1kB,GAAUkI,EAAAA,cAAC6f,GAAS,CAAC/nB,MAAOA,MAItD,EEvBJ,MAOA,GAPamoB,EAAE3tB,WAAU3B,UACrBA,EACIqP,EAAAA,cAACggB,GAAQ,CAACrvB,KAAMA,IAEhBqP,EAAAA,cAACkc,GAAU,CAACE,IAAK,cAAc9pB,IAAYkqB,QAAU7rB,GAASqP,EAAAA,cAACggB,GAAQ,CAACrvB,KAAMA,MCCtF,IAAeiuB,EAAAA,GAAAA,IAAa,CAACjoB,KAAM,QAAnC,EANkBupB,EAAE3uB,OAAMutB,aAAYnuB,OAAM2B,cACxC0N,EAAAA,cAACkY,GAAK,CAACnX,OAAQ+d,EAAYje,OAAQtP,GAC/ByO,EAAAA,cAACigB,GAAI,CAAC3tB,SAAUA,EAAU3B,KAAMA,OCKxC,GATewvB,IACXngB,EAAAA,cAACA,EAAAA,SAAc,KACXA,EAAAA,cAACgf,GAAkB,MACnBhf,EAAAA,cAACogB,GAAa,MACdpgB,EAAAA,cAAC6e,GAAQ,MACT7e,EAAAA,cAACkgB,GAAS,OCkBlB,MAAMG,WAAoBrgB,EAAAA,UACtBQ,YAAYC,GACRC,MAAMD,EACV,CAEA4V,oBACI,MAAM,cAACtQ,EAAa,SAAEua,EAAQ,KAAE9tB,GAAQoO,KAAKH,MAE5B,OAAb6f,GAAqB9tB,EAAKA,MAAQA,EAAKtF,SAAWsF,EAAKmC,UAAYgQ,GAAanS,EAAKS,UACrF8S,EAAcvT,EAAKS,QAAmBqtB,EAASvvB,QAEvD,CAEAyZ,0BAA0BC,GACtB,MAAM,cAAC1E,EAAeua,SAAUC,EAActlB,UAAWulB,EAAWhuB,KAAMiuB,GAAiBhW,GACpF6V,SAAUI,EAAazlB,UAAW0lB,EAAUnuB,KAAMouB,GAAgBhgB,KAAKH,MAGzD,OAAjB8f,GACAE,EAAcjuB,MACdiuB,EAAcvzB,SACduzB,EAAc9rB,UACdgQ,GAAa8b,EAAcxtB,WAC1BstB,IAAiBG,GACdD,EAAcvzB,UAAY0zB,EAAa1zB,SACvCuzB,EAAcxtB,UAAY2tB,EAAa3tB,UAE3C8S,EAAc0a,EAAcxtB,QAAmBstB,EAAaxvB,SAG5DyvB,IAAcG,GAAYJ,G7EgWhC,SAAyBxvB,EAAiBkK,GAC5C,IAAKnN,IAGD,OAFAoB,EAAAA,GAAsB,kCACtB9C,QAAQ4Z,KAAK,uDAGjBhY,aAAaC,QACT,aAAa8C,KAAWkK,EAAUhI,UAClC6C,KAAKC,UAAU,CAAC8qB,QAzXA,EAyX0B5lB,cAElD,C6EzWY6lB,CAAeP,EAAaxvB,QAASyvB,EAE7C,CAEApf,SACI,OAAO,IACX,EAGJ,UAAewB,EAAAA,GAAAA,KA7DU3V,IACrB,MAAM,MAACgR,EAAK,KAAEzL,GAAQvF,GAChB,UAACgO,GAAagD,EAEpB,MAAO,CACHhD,YACAqlB,SAAUvzB,EAAQE,GAClBuF,OACH,IAGuBxD,IACxB8T,EAAAA,GAAAA,IACI,CACIiD,cAAaA,IAEjB/W,IA6CR,CAA4DqxB,IC9D5D,MAAMU,WAAqB/gB,EAAAA,UAA3BQ,c,oBASY,KAAAwgB,mBAAsB/W,IAC1B,MAAM,UAAChP,GAAa2F,KAAKH,MAEzB,GAAyB,WAArBxF,EAAUb,OAAqB,CAC/B,MAAM5L,EAAU,mDAEhB,OADCyb,EAAMgX,YAAsBzyB,EACtBA,C,CAGK,CAMxB,CAvBI6nB,oBACIhiB,OAAO6sB,iBAAiB,eAAgBtgB,KAAKogB,mBACjD,CAEAG,uBACI9sB,OAAO+sB,oBAAoB,eAAgBxgB,KAAKogB,mBACpD,CAcA5f,SACI,OAAO,IACX,EAGJ,Y,yBCjCA,MCKMigB,GAAcA,IAAMrhB,EAAAA,cAAA,UAAQvR,KAAK,SAASiR,UAAU,4BAA2B,aAAY,UAMnF,MAAO4hB,WAAqBthB,EAAAA,UACtCQ,YAAYC,GACRC,MAAMD,EACV,CAEA+J,0BAA0BC,GACtB,GAAIA,EAAU9b,eAAiBiS,KAAKH,MAAM9R,cAA2C,OAA3B8b,EAAU9b,aAAuB,CACvF,MAAMA,EAAe8b,EAAU9b,aACL,YAAtBA,EAAaF,KACb8yB,GAAAA,GAAAA,QAAcvhB,EAAAA,cAAA,OAAKiL,MAAO,CAACoC,MAAO,QAASmU,SAAU,eAAgB7yB,EAAaH,UACrD,SAAtBG,EAAaF,KACpB8yB,GAAAA,GAAAA,KAAWvhB,EAAAA,cAAA,OAAKiL,MAAO,CAACoC,MAAO,QAASmU,SAAU,eAAgB7yB,EAAaH,UAE/E+yB,GAAAA,GAAAA,MACgE5yB,EAAaH,Q,CAIzF,CAEA4S,SACI,OACIpB,EAAAA,cAACyhB,GAAAA,GAAc,CACXjf,MAAM,EACNkf,eDnCe,sBCoCf/T,SAAS,WACTgU,UAAW,IACXC,iBAAiB,EACjBC,cAAY,EACZC,cAAc,EACdC,YAAa/hB,EAAAA,cAACqhB,GAAW,OAGrC,ECaJ,MAAMW,WAAYhiB,EAAAA,UAGdQ,YAAYC,GACRC,MAAMD,GAHF,KAAAwhB,oBAAqC,KAwCrC,KAAAC,SAAYrzB,IACZA,EACAszB,SAASC,gBAAgBC,aAAa,gBAAiB,QAEvDF,SAASC,gBAAgBC,aAAa,gBAAiB,Q,EAxC3DzhB,KAAK3T,MAAQ,CAACq1B,UAAW,MAEzB,MAAM,IAACn1B,EAAG,SAAE0K,GAAY+I,KAAKH,MAEjB,OAARtT,GACA0K,EAAS1K,EAEjB,CAEAkpB,oBACI,MAAM,aAAC7hB,EAAY,oBAAEZ,EAAmB,gBAAE4E,EAAe,+BAAErE,GAAkCyM,KAAKH,MAElGjI,IAEAhE,IACAoM,KAAKqhB,oBAAsB5tB,OAAO+lB,aAAY,IAAMxmB,KhI9Cf,KgI+CrCO,IAEAyM,KAAKshB,SAASthB,KAAKH,MAAM5R,UAC7B,CAEAynB,mBAAmB+F,GACXA,EAAUxtB,YAAc+R,KAAKH,MAAM5R,WACnC+R,KAAKshB,SAASthB,KAAKH,MAAM5R,WAG7B+R,KAAKH,MAAMjM,cACf,CAEA2sB,uB/GqBA9sB,OAAOC,SAASiuB,eAAe,mBAC/BluB,OAAOC,SAASiuB,eAAe,gB+GpBM,OAA7B3hB,KAAKqhB,qBACLO,cAAc5hB,KAAKqhB,oBAE3B,CAUA7gB,SACI,MAAM,SAACkf,EAAQ,aAAE3xB,EAAY,eAAE8zB,EAAc,UAAExnB,GAAa2F,KAAKH,MAIjE,OAF4B,OAAb6f,GAAqBA,EAASvvB,QAGzCiP,EAAAA,cAAAA,EAAAA,SAAA,KACIA,EAAAA,cAACsa,GAAAA,EAAM,KACHta,EAAAA,cAAA,sBACAA,EAAAA,cAAA,QACIrJ,KAAK,cACL4jB,QAAQ,qKAGhBva,EAAAA,cAAC+C,GAAM,KACH/C,EAAAA,cAAC0iB,GAAAA,GAAM,KACH1iB,EAAAA,cAAC2iB,GAAAA,GAAK,CAACC,KAAK,IAAIr1B,QAASyS,EAAAA,cAAC2a,GAAI,SAElC3a,EAAAA,cAACmgB,GAAM,MACPngB,EAAAA,cAAC+gB,GAAY,CAAC9lB,UAAWA,IACzB+E,EAAAA,cAACshB,GAAY,CAAC3yB,aAAcA,IAC5BqR,EAAAA,cAACqgB,GAAW,OAI5B,EAGJ,MC1HMwC,GCVeC,KACjB,IAAIC,EAA0B,KAE9B,MAWMC,EAAcA,KAXDC,KACf,GAAIF,IAAaE,EAAM,CACnB,MAAMC,EAAM7uB,OAAe6uB,GACvBA,IACAA,EAAG,MAAO,OAAQD,GAClBC,EAAG,OAAQ,WAAYD,IAE3BF,EAAWE,C,GAOfE,EAFiBC,EAAAA,GAAAA,MACKC,UAGfrjB,EAAAA,cAAC8iB,EAAgB,OAI5B,OADAE,EAAYM,YAAc,eAAeR,EAAiBQ,aAAeR,EAAiBnsB,MAAQ,eAC3FqsB,CAAW,EDbHO,ED0HJ3gB,EAAAA,GAAAA,KAtGiB3V,IAC5B,MAAM,QAACC,EAAO,IAAE8Q,EAAG,KAAExL,EAAI,MAAEyL,GAAShR,GAC9B,UAACgO,GAAagD,GACd,aAACtP,EAAY,UAAEE,GAAamP,EAGlC,MAAO,CACH7Q,IAHQD,EAAQC,IAIhBmzB,SAAUvzB,EAAQE,GAClBw1B,eAAgBjwB,EAAKtF,QACrByB,eACAE,YACAoM,YACAzI,KAAMA,EAAKA,KACd,IAGuBxD,GAAuB8L,OAAAC,OAAAD,OAAAC,OAAC,CAAC,GAC9C+H,EAAAA,GAAAA,IAAmB,CAACtO,aAAY,GAAEZ,oBAAmB,GAAEO,+BAA8BA,IAAGnF,IAAS,CACpG6I,SAAW9G,GAAoB8G,GAAS7I,EAAU+B,GAClDyH,gBAAiBA,IAAMA,GAAgBxJ,MAkF3C,CAA4DgzB,KCxH9C,MAAOwB,WAAaxjB,EAAAA,UAC9BoB,SACI,OACIpB,EAAAA,cAACyjB,GAAAA,GAAQ,CAACvkB,MAAO0B,KAAKH,MAAMvB,OACxBc,EAAAA,cAAC0jB,GAAAA,GAAM,KACH1jB,EAAAA,cAAC6iB,GAAU,OAI3B,E,4BEVJvF,IAAAA,OAAaqG,KCXP,WACF,MAAM,IAACrW,GAAOsW,GAAAA,EAAAA,MAAkBvvB,OAAOwvB,SAASC,QAE5CxW,IAEAjZ,OAAO0vB,QAAQC,aAAa,CAAC,EAAG7B,SAAS8B,MAAO5vB,OAAOwvB,SAASR,UAE5Cr1B,aAAayJ,QAAQ,cAErB6V,IAChBtf,aAAaC,QAAQ,WAAYqf,GACjCxgB,EAAAA,EAAAA,KAAW,iBAAkB,CAAC+D,GAAIyc,KAG9C,CDDA4W,GAIK7vB,OAAO8vB,iBACR9vB,OAAO8vB,eAAiBA,GAAAA,GAG5B,MAAMC,GAAOjC,SAASkC,eAAe,QACxB,OAATD,KACAhjB,EAAAA,EAAAA,QAAOpB,EAAAA,cAACwjB,GAAI,CAACtkB,MAAOA,KAAWklB,G,aE1BnC,IAAU1T,EAAE4T,EAAEC,EAAMC,EAAEnnB,EAAZqT,EAGPrc,OAHSiwB,EAGFnC,SAHIoC,EAGK,SAHM7T,EAAyB,sBAG0B,KAHtBA,EAAG,GAAEA,EAAG,IAAG,YAChEA,EAAG,GAAE+T,EAAE/T,EAAG,GAAE+T,GAAG,IAAI1T,KAAK2T,UAAU,EAAEhU,EAAG,GAAEiU,EAAE,EAAE,IAAI54B,KAAOy4B,EAAEF,EAAEM,cAAcL,GAC3ElnB,EAAEinB,EAAEO,qBAAqBN,GAAG,GAAGC,EAAEM,MAAM,EAAEN,EAAExiB,IACf,gDADqB3E,EAAE0nB,WAAWC,aAAaR,EAAEnnB,GAGzEhJ,OAAO6uB,KACP7uB,OAAO6uB,GAAG,SAAU,iBAAkB,QACtC7uB,OAAO6uB,GAAG,MAAO,eAAe,GAChC7uB,OAAO6uB,GAAG,OAAQ,Y","sources":["webpack:///./src/config/config.tsx","webpack:///./src/config/apiEndpoints.tsx","webpack:///./src/platform/modules/account/selectors.tsx","webpack:///./src/util/util.tsx","webpack:///./src/app/constants.tsx","webpack:///./src/platform/modules/utilities/actions.tsx","webpack:///./src/platform/modules/utilities/asyncActions.tsx","webpack:///./src/platform/modules/bets/constants.tsx","webpack:///./src/platform/modules/bets/asyncActions.tsx","webpack:///./src/platform/modules/bets/actions.tsx","webpack:///./src/platform/modules/chat/constants.tsx","webpack:///./src/platform/modules/chat/actions.tsx","webpack:///./src/platform/modules/chat/asyncActions.tsx","webpack:///./src/platform/modules/friends/constants.tsx","webpack:///./src/platform/modules/modals/actions.tsx","webpack:///./src/platform/modules/web3/constants.tsx","webpack:///./src/platform/modules/web3/actions.tsx","webpack:///./src/platform/modules/web3/asyncActions.tsx","webpack:///./src/platform/modules/account/constants.tsx","webpack:///./src/platform/modules/account/asyncActions.tsx","webpack:///./src/platform/modules/account/actions.tsx","webpack:///./src/platform/modules/friends/asyncActions.tsx","webpack:///./src/platform/modules/friends/actions.tsx","webpack:///./src/platform/modules/bets/reducer.tsx","webpack:///./src/platform/modules/chat/reducer.tsx","webpack:///./src/platform/modules/friends/reducer.tsx","webpack:///./src/pages/games/plinko/constants.tsx","webpack:///./src/pages/games/plinko/reducer.tsx","webpack:///./src/platform/modules/games/info/constants.tsx","webpack:///./src/platform/modules/games/info/reducer.tsx","webpack:///./src/platform/modules/games/state/constants.tsx","webpack:///./src/platform/modules/games/state/reducer.tsx","webpack:///./src/platform/modules/games/reducer.tsx","webpack:///./src/platform/modules/utilities/reducer.tsx","webpack:///./src/platform/modules/web3/reducer.tsx","webpack:///./src/rootReducer.tsx","webpack:///./src/platform/modules/account/reducer.tsx","webpack:///./src/store.tsx","webpack:///./src/config/interceptors.tsx","webpack:///./src/reusable/FontAwesomeIcon.scss?46a9","webpack:///./src/reusable/FontAwesomeIcon.tsx","webpack:///./src/reusable/IconButton.tsx","webpack:///./src/layout/Header.tsx","webpack:///./src/layout/Header.scss?2335","webpack:///./src/layout/Layout.tsx","webpack:///./src/platform/modules/games/info/actions.tsx","webpack:///./src/platform/modules/games/state/actions.tsx","webpack:///./src/platform/modules/games/state/asyncActions.tsx","webpack:///./src/contractUtils/index.tsx","webpack:///./src/reusable/Section.tsx","webpack:///./src/reusable/Container.tsx","webpack:///./src/pages/games/utilities.tsx","webpack:///./src/reusable/Row.tsx","webpack:///./src/reusable/Col.tsx","webpack:///./src/reusable/FormGroup.tsx","webpack:///./src/reusable/Label.tsx","webpack:///./src/reusable/Button.tsx","webpack:///./src/util/math.tsx","webpack:///./src/reusable/Input.scss?126e","webpack:///./src/reusable/Input.tsx","webpack:///./src/reusable/NumericInput.tsx","webpack:///./src/reusable/ValueInput.tsx","webpack:///./src/reusable/Select.tsx","webpack:///./src/reusable/Modal.tsx","webpack:///./src/reusable/Modal.scss?efe8","webpack:///./src/reusable/Ether.tsx","webpack:///./src/reusable/Ether.scss?bece","webpack:///./src/pages/games/reusable/HowToPlayBase.tsx","webpack:///./src/pages/games/reusable/HowToPlayBase.scss?077e","webpack:///./src/pages/games/plinko/components/HowToPlay.tsx","webpack:///./src/pages/games/reusable/PureCanvas.tsx","webpack:///./src/pages/games/plinko/components/Drawable.tsx","webpack:///./src/pages/games/plinko/components/Vector2.ts","webpack:///./src/pages/games/plinko/components/Ball.tsx","webpack:///./src/pages/games/plinko/components/lookupTables.tsx","webpack:///./src/pages/games/plinko/components/PayoutTable.scss?a964","webpack:///./src/pages/games/plinko/components/PayoutTable.tsx","webpack:///./src/pages/games/plinko/components/Pin.tsx","webpack:///./src/pages/games/plinko/components/Pins.tsx","webpack:///./src/pages/games/plinko/components/PlinkoDayColors.scss","webpack:///./src/pages/games/plinko/components/PlinkoNightColors.scss","webpack:///./src/pages/games/plinko/components/Plinko.tsx","webpack:///./src/pages/games/plinko/components/Plinko.scss?5e64","webpack:///./src/pages/games/plinko/components/Ui.scss?682e","webpack:///./src/pages/games/plinko/components/Ui.tsx","webpack:///./src/pages/games/plinko/Plinko.tsx","webpack:///./src/util/audio.tsx","webpack:///./src/pages/games/plinko/actions.tsx","webpack:///./src/pages/games/Game.tsx","webpack:///./src/pages/games/Game.scss?c8a2","webpack:///./src/reusable/DataLoader.scss?dfad","webpack:///./src/reusable/DataLoader.tsx","webpack:///./src/reusable/Popover.tsx","webpack:///./src/reusable/CopyToClipboard.tsx","webpack:///./src/platform/components/bet/BetInfo/Overview.scss?f97e","webpack:///./src/platform/components/bet/BetInfo/Overview.tsx","webpack:///./src/platform/components/bet/BetInfo/PlinkoBetInfo.tsx","webpack:///./src/reusable/Output.tsx","webpack:///./src/reusable/Collapse.tsx","webpack:///./src/platform/components/bet/BetInfo/CollapseButton.tsx","webpack:///./src/platform/components/bet/BetInfo/CollapsButton.scss?62ab","webpack:///./src/platform/components/bet/BetInfo/Verification.scss?c5ea","webpack:///./src/platform/components/bet/BetInfo/Verification.tsx","webpack:///./src/platform/components/bet/BetInfo/VerificationInfo.tsx","webpack:///./src/platform/components/bet/BetInfo/VerificationInfo.scss?6d8f","webpack:///./src/platform/components/bet/BetInfo/index.tsx","webpack:///./src/platform/components/bet/Bet.tsx","webpack:///./src/platform/components/modals/BetModal.tsx","webpack:///./src/reusable/MissingWallet.tsx","webpack:///./src/platform/components/modals/MissingWalletModal.tsx","webpack:///./src/reusable/Form.tsx","webpack:///./src/reusable/FormText.tsx","webpack:///./src/platform/components/user/Register.tsx","webpack:///./src/platform/modules/account/util.tsx","webpack:///./src/platform/components/modals/RegisterModal.tsx","webpack:///./src/pages/account/components/stats/GameStats.tsx","webpack:///./src/pages/account/components/stats/GameStats.scss?7604","webpack:///./src/reusable/Address.tsx","webpack:///./src/reusable/Address.scss?f229","webpack:///./src/platform/components/user/UserInfo.tsx","webpack:///./src/platform/components/user/UserInfo.scss?8570","webpack:///./src/platform/components/user/User.tsx","webpack:///./src/platform/components/modals/UserModal.tsx","webpack:///./src/platform/components/modals/Modals.tsx","webpack:///./src/platform/components/state/StateLoader.tsx","webpack:///./src/app/BeforeUnload.tsx","webpack:///./src/app/Notification.scss?739b","webpack:///./src/app/Notification.tsx","webpack:///./src/app/App.tsx","webpack:///./src/Root.tsx","webpack:///./src/app/withTracker.tsx","webpack:///./src/index.tsx","webpack:///./src/util/affiliate.tsx","webpack:///./src/googleanalytics.js"],"sourcesContent":["import {toChecksumAddress} from \"ethereumjs-util\";\r\nexport const NAME = \"Dicether\";\r\nexport const VERSION = process.env.VERSION || \"\";\r\nexport const BUILD_DATE = new Date(process.env.BUILD_DATE || new Date());\r\n\r\nexport const CONTRACT_ADDRESS = toChecksumAddress(process.env.CONTRACT_ADDRESS || \"\");\r\nexport const TOKEN_ADDRESS = toChecksumAddress(\"0xe5f129a4770d0e955c064b5d0adecdfc7726eff8\");\r\nconsole.log(\"address\", CONTRACT_ADDRESS, TOKEN_ADDRESS);\r\nexport const CHAIN_ID = Number.parseInt(process.env.CHAIN_ID || \"1\", 10);\r\nexport const SIGNATURE_VERSION = 2;\r\nexport const NEW_EIP_GAME_ID = 572;\r\nexport const NEW_EIP_GAME_ID_2 = 1759;\r\nexport const OLD_EIP_GAME_ID = 638;\r\n\r\nexport const SERVER_ADDRESS = toChecksumAddress(process.env.SERVER_ADDRESS || \"\");\r\n\r\nexport const DISCORD_URL = \"https://discord.gg/kD7FajM\";\r\nexport const REDDIT_URL = \"https://www.reddit.com/r/Dicether\";\r\nexport const CONTRACT_URL = `https://etherscan.io/address/${CONTRACT_ADDRESS}#code`;\r\nexport const CONTACT_URL = \"contact@dicether.com\";\r\nexport const BUGS_URL = \"bugs@dicether.com\";\r\nexport const TWITTER_URL = \"https://twitter.com/dicether\";\r\nexport const METAMASK_URL = \"https://metamask.io\";\r\nexport const TRUST_WALLET_URL = \"https://trustwalletapp.com\";\r\nexport const COINBASE_WALLET_URL = \"https://wallet.coinbase.com\";\r\nexport const GITHUB_URL = \"https://github.com/dicether\";\r\n\r\nexport const API_URL = process.env.API_URL || \"\";\r\nexport const SOCKET_URL = process.env.SOCKET_URL || \"\";\r\n\r\nexport const REALM = \"Dicether\";\r\n\r\nexport const ACCOUNT_BALANCE_POLL_INTERVAL = 5000;\r\n\r\nexport const FROM_WEI_TO_BASE = 1e18; // conversion from wei to base unit GWEI\r\nexport const FROM_BASE_TO_WEI = 1e18; // conversion from base unit GWEI to wei\r\n\r\nexport const NETWORK_NAME = \"Main\";\r\n\r\nexport const MIN_GAME_SESSION_VALUE = 1e7;\r\nexport const MAX_GAME_SESSION_VALUE = 30e9;\r\nexport const HOUSE_EDGE = 150;\r\nexport const HOUSE_EDGE_DIVISOR = 10000;\r\n\r\nexport const MIN_BET_VALUE = 1e9;\r\nexport const MAX_BET_VALUE = 1e20;\r\nexport const MIN_BANKROLL = 9e9;\r\nexport const KELLY_FACTOR = 1;\r\n\r\nexport const RANGE = 100;\r\nexport const MIN_NUMBER_DICE_1 = 1;\r\nexport const MAX_NUMBER_DICE_1 = 98;\r\nexport const MIN_NUMBER_DICE_2 = 2;\r\nexport const MAX_NUMBER_DICE_2 = 99;\r\n\r\nexport const SESSION_TIMEOUT = 48; // in hours\r\n","import axios from \"axios\";\r\nimport {API_URL} from \"./config\";\r\n\r\naxios.defaults.baseURL = API_URL;\r\n\r\nexport function changeAxiosAuthToken(jwt: string | null) {\r\n    if (jwt === null) {\r\n        delete axios.defaults.headers.common[\"Authorization\"];\r\n        delete axios.defaults.headers.common[\"CustomAuthorization\"];\r\n    } else {\r\n        axios.defaults.headers.common = {\r\n            Authorization: `Bearer ${jwt}`,\r\n            \"Content-Type\": \"application/json\",\r\n        };\r\n    }\r\n}\r\n","import jwtDecode from \"jwt-decode\";\r\nimport {createSelector} from \"reselect\";\r\n\r\nimport {State} from \"../../../rootReducer\";\r\nimport {User} from \"./types\";\r\n\r\nexport const getUser = createSelector([(state: State) => state.account.jwt], (jwt) => {\r\n    return jwt !== null ? jwtDecode<User>(jwt) : null;\r\n});\r\n","import {Action, AnyAction} from \"redux\";\r\n\r\nimport {State} from \"../rootReducer\";\r\n\r\nexport function fixedLengthAddElement<T>(array: T[], element: T, maxLength: number): T[] {\r\n    if (array.length >= maxLength) {\r\n        return [...array.slice(array.length - maxLength + 1), element];\r\n    } else {\r\n        return [...array, element];\r\n    }\r\n}\r\n\r\nexport function fixedLengthAddElementFront<T>(array: T[], element: T, maxLength: number): T[] {\r\n    if (array.length >= maxLength) {\r\n        return [element, ...array.slice(0, maxLength - 1)];\r\n    } else {\r\n        return [element, ...array];\r\n    }\r\n}\r\n\r\nexport type GetState = () => State;\r\n\r\nexport type $Values<T extends {[key: string]: unknown}> = T[keyof T];\r\n\r\nexport type ActionType<T extends {[id: string]: (...args: any[]) => any}> = ReturnType<$Values<T>>;\r\n\r\nexport type ActionCreateType<T extends {[key: string]: unknown}> = (...args: any[]) => {type: $Values<T>};\r\n\r\nexport type ThunkAction1<R, S> = (dispatch: Dispatch, getState: () => S) => R;\r\n\r\nexport type ThunkAction2<R> = (dispatch: Dispatch) => R;\r\n\r\nexport type ThunkAction<R, S> = ThunkAction1<R, S> | ThunkAction2<R>;\r\n\r\nexport interface Dispatch<A extends Action = AnyAction> {\r\n    <T extends A>(action: T): T;\r\n    <R>(asyncAction: ThunkAction<R, State>): R;\r\n}\r\n\r\nexport function createConstant<T>(p: T, prefix: string): T {\r\n    const res = prefix + \"/\" + (p as any);\r\n    return res as any;\r\n}\r\n\r\nexport function assertNever(t: never): never {\r\n    return t;\r\n}\r\n\r\nexport function isLocalStorageAvailable() {\r\n    const mod = \"test\";\r\n    try {\r\n        localStorage.setItem(mod, mod);\r\n        localStorage.removeItem(mod);\r\n        return true;\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport function isSessionStorageAvailable() {\r\n    const mod = \"test\";\r\n    try {\r\n        sessionStorage.setItem(mod, mod);\r\n        sessionStorage.removeItem(mod);\r\n        return true;\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport function truncate(str: string, n: number) {\r\n    if (n < 3) {\r\n        throw new Error(\"n needs to be at least 3\");\r\n    }\r\n\r\n    return str.length > n ? str.substr(0, n - 3) + \"...\" : str;\r\n}\r\n","import {createConstant} from \"../util/util\";\r\n\r\nfunction c<T>(p: T): T {\r\n    return createConstant(p, \"app\");\r\n}\r\n\r\nexport const CHANGE_NOTIFICATION = c(\"CHANGE_NOTIFICATION\");\r\nexport const TOGGLE_THEME = c(\"TOGGLE_THEME\");\r\n","import * as types from \"../../../app/constants\";\r\nimport {ActionCreateType} from \"../../../util/util\";\r\n\r\nconst ca = <T extends ActionCreateType<typeof types>>(a: T) => a;\r\n\r\nexport const showErrorMessage = ca((message: string) => {\r\n    const notification = {message, type: \"error\"};\r\n    return {type: types.CHANGE_NOTIFICATION, notification};\r\n});\r\n\r\nexport const showSuccessMessage = ca((message: string) => {\r\n    const notification = {message, type: \"success\"};\r\n    return {type: types.CHANGE_NOTIFICATION, notification};\r\n});\r\n\r\nexport const showInfoMessage = ca((message: string) => {\r\n    const notification = {message, type: \"info\"};\r\n    return {type: types.CHANGE_NOTIFICATION, notification};\r\n});\r\n\r\nexport const toggleTheme = ca((nightMode: boolean) => {\r\n    return {type: types.TOGGLE_THEME, nightMode};\r\n});\r\n","import * as Sentry from \"@sentry/browser\";\r\nimport {Dispatch} from \"../../../util/util\";\r\nimport {showErrorMessage} from \"./actions\";\r\n\r\nfunction extractFirstLine(str: string) {\r\n    const idx = str.indexOf(\"\\n\");\r\n    return idx !== -1 ? str.substr(0, idx) : str;\r\n}\r\n\r\nexport function catchError(error: any, dispatch: Dispatch) {\r\n    // sentry expects an error object\r\n    if (error instanceof Error) {\r\n        Sentry.withScope((scope) => {\r\n            scope.setExtra(\"error_object\", error);\r\n            Sentry.captureException(error);\r\n        });\r\n    } else {\r\n        Sentry.withScope((scope) => {\r\n            scope.setExtra(\"error_object\", error);\r\n            const sentryError = new Error(error.message);\r\n            Sentry.captureException(sentryError);\r\n        });\r\n    }\r\n\r\n    const response = error.response;\r\n    const data = response ? response.data : null;\r\n    const statusText = response ? response.statusText : null;\r\n    const message = data && data.error ? data.error.message : statusText || error.message || false;\r\n\r\n    if (message && message.length !== 0) {\r\n        let messageToShow = message;\r\n\r\n        // do not completely show very long messages\r\n        if (messageToShow.length > 100) {\r\n            messageToShow = extractFirstLine(message);\r\n        }\r\n        dispatch(showErrorMessage(messageToShow));\r\n    }\r\n}\r\n","import {createConstant} from \"../../../util/util\";\r\n\r\nfunction c<T>(p: T): T {\r\n    return createConstant(p, \"games\");\r\n}\r\n\r\nexport const CHANGE_BETS = c(\"CHANGE_BETS\");\r\nexport const ADD_BET = c(\"ADD_BET\");\r\nexport const CHANGE_MY_BETS = c(\"CHANGE_MY_BETS\");\r\nexport const ADD_MY_BET = c(\"ADD_MY_BET\");\r\n","import axios from \"axios\";\r\n\r\nimport {Dispatch, GetState} from \"../../../util/util\";\r\nimport {getUser} from \"../account/selectors\";\r\nimport {catchError} from \"../utilities/asyncActions\";\r\nimport {addBet, addMyBet, changeBets, changeMyBets} from \"./actions\";\r\nimport {Bet} from \"./types\";\r\n\r\nexport function loadBets() {\r\n    return (dispatch: Dispatch) => {\r\n        axios\r\n            .get(\"/bets/lastBets\")\r\n            .then((response) => {\r\n                const bets = response.data.bets;\r\n                return dispatch(changeBets(bets));\r\n            })\r\n            .catch((error) => {\r\n                catchError(error, dispatch);\r\n            });\r\n    };\r\n}\r\n\r\nexport function loadMyBets(_address: string) {\r\n    return (dispatch: Dispatch) => {\r\n        axios\r\n            .get(`/bets/myLastBets`)\r\n            .then((response) => {\r\n                const myBets = response.data.bets;\r\n                return dispatch(changeMyBets(myBets));\r\n            })\r\n            .catch((error) => {\r\n                catchError(error, dispatch);\r\n            });\r\n    };\r\n}\r\n\r\nexport function addNewBet(bet: Bet) {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        const state = getState();\r\n        const user = getUser(getState());\r\n        const bets = state.bets.allBets;\r\n\r\n        if (bets.length > 0 && bet.id !== bets[0].id + 1) {\r\n            // we missed some bets => reload bets\r\n            dispatch(loadBets());\r\n        } else {\r\n            dispatch(addBet(bet));\r\n        }\r\n\r\n        if (user !== null && user.address === bet.user.address) {\r\n            dispatch(addMyBet(bet));\r\n        }\r\n    };\r\n}\r\n","import * as types from \"./constants\";\r\n\r\nimport {ActionCreateType} from \"../../../util/util\";\r\nimport {Bet} from \"./types\";\r\n\r\nconst ca = <T extends ActionCreateType<typeof types>>(a: T) => a;\r\n\r\nexport const changeBets = ca((bets: Bet[]) => {\r\n    return {type: types.CHANGE_BETS, bets};\r\n});\r\n\r\nexport const addBet = ca((bet: Bet) => {\r\n    return {type: types.ADD_BET, bet};\r\n});\r\n\r\nexport const changeMyBets = ca((myBets: Bet[]) => {\r\n    return {type: types.CHANGE_MY_BETS, myBets};\r\n});\r\n\r\nexport const addMyBet = ca((myBet: Bet) => {\r\n    return {type: types.ADD_MY_BET, myBet};\r\n});\r\n","import {createConstant} from \"../../../util/util\";\r\n\r\nfunction c<T>(p: T): T {\r\n    return createConstant(p, \"chat/friends\");\r\n}\r\n\r\nexport const TOGGLE_CHAT = c(\"TOGGLE_CHAT\");\r\nexport const CHANGE_MESSAGES = c(\"CHANGE_MESSAGES\");\r\nexport const ADD_MESSAGE = c(\"ADD_MESSAGE\");\r\nexport const DELETE_MESSAGE = c(\"DELETE_MESSAGE\");\r\nexport const CHANGE_USERS_ONLINE = c(\"CHANGE_USERS_ONLINE\");\r\n","import {ActionCreateType} from \"../../../util/util\";\r\nimport * as types from \"./constants\";\r\nimport {Message} from \"./types\";\r\n\r\nconst ca = <T extends ActionCreateType<typeof types>>(a: T) => a;\r\n\r\nexport const toggleChat = ca((show: boolean) => {\r\n    return {type: types.TOGGLE_CHAT, show};\r\n});\r\n\r\nexport const changeMessages = ca((messages: Message[]) => {\r\n    return {type: types.CHANGE_MESSAGES, messages};\r\n});\r\n\r\nexport const addMessage = ca((message: Message) => {\r\n    return {type: types.ADD_MESSAGE, message};\r\n});\r\n\r\nexport const deleteMessage = ca((messageId: number) => {\r\n    return {type: types.DELETE_MESSAGE, messageId};\r\n});\r\n\r\nexport const changeUsersOnline = ca((numUsers: number) => {\r\n    return {type: types.CHANGE_USERS_ONLINE, numUsers};\r\n});\r\n","import axios from \"axios\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport {Dispatch, GetState} from \"../../../util/util\";\r\nimport {User} from \"../account/types\";\r\nimport {showInfoMessage, showSuccessMessage} from \"../utilities/actions\";\r\nimport {catchError} from \"../utilities/asyncActions\";\r\nimport {addMessage, changeMessages} from \"./actions\";\r\nimport {executeCommands} from \"./commands\";\r\nimport {Message} from \"./types\";\r\n\r\nexport function loadMessages() {\r\n    return (dispatch: Dispatch) => {\r\n        axios\r\n            .get(\"/chat/messages\")\r\n            .then((response) => {\r\n                const messages = response.data;\r\n                dispatch(changeMessages(messages));\r\n            })\r\n            .catch((error) => catchError(error, dispatch));\r\n    };\r\n}\r\n\r\nexport function sendMessage(message: string) {\r\n    return (dispatch: Dispatch) => {\r\n        // check if special message\r\n        if (executeCommands(dispatch, message)) {\r\n            return;\r\n        }\r\n\r\n        axios\r\n            .post(\"/chat/sendMessage\", {\r\n                message,\r\n            })\r\n            .catch((error) => catchError(error, dispatch));\r\n    };\r\n}\r\n\r\nexport function mute(address: string) {\r\n    return (dispatch: Dispatch) => {\r\n        axios\r\n            .post(\"/chat/muteUser\", {\r\n                address,\r\n            })\r\n            .then(() => {\r\n                dispatch(showSuccessMessage(\"Muted player!\"));\r\n            })\r\n            .catch((error) => catchError(error, dispatch));\r\n    };\r\n}\r\n\r\nexport function deleteMessage(messageId: number) {\r\n    return (dispatch: Dispatch) => {\r\n        axios\r\n            .post(\"/chat/deleteMessage\", {\r\n                messageId,\r\n            })\r\n            .catch((error) => catchError(error, dispatch));\r\n    };\r\n}\r\n\r\nexport function addNewMessage(message: Message) {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        const messages = getState().chat.messages;\r\n        if (messages.length > 0 && messages[messages.length - 1].id + 1 !== message.id) {\r\n            return dispatch(loadMessages());\r\n        }\r\n\r\n        const jwt = getState().account.jwt;\r\n        const userName = jwt ? jwtDecode<User>(jwt).username : undefined;\r\n        const msg = message.message;\r\n\r\n        if (\r\n            message.user.username !== userName &&\r\n            (msg.includes(\"@everybody\") || (userName && msg.includes(`@${userName}`)))\r\n        ) {\r\n            dispatch(showInfoMessage(`You were mentioned by ${message.user.username} in the chat!`));\r\n        }\r\n\r\n        dispatch(addMessage(message));\r\n    };\r\n}\r\n","import {createConstant} from \"../../../util/util\";\r\n\r\nfunction c<T>(p: T): T {\r\n    return createConstant(p, \"chat/friends\");\r\n}\r\n\r\nexport const CHANGE_FRIENDS = c(\"CHANGE_FRIENDS\");\r\nexport const ADD_FRIEND = c(\"ADD_FRIEND\");\r\nexport const CHANGE_RECEIVED_FRIEND_REQUESTS = c(\"CHANGE_RECEIVED_FRIEND_REQUESTS\");\r\nexport const ADD_RECEIVED_FRIEND_REQUEST = c(\"ADD_RECEIVED_FRIEND_REQUEST\");\r\nexport const REMOVE_RECEIVED_FRIEND_REQUEST = c(\"REMOVE_RECEIVED_FRIEND_REQUEST\");\r\nexport const CHANGE_SENT_FRIEND_REQUESTS = c(\"CHANGE_SENT_FRIEND_REQUESTS\");\r\nexport const ADD_SENT_FRIEND_REQUEST = c(\"ADD_SENT_FRIEND_REQUEST\");\r\nexport const REMOVE_SENT_FRIEND_REQUEST = c(\"REMOVE_SENT_FRIEND_REQUEST\");\r\nexport const TOGGLE_FRIEND_ONLINE = c(\"TOGGLE_FRIEND_ONLINE\");\r\n","import {hide, show} from \"redux-modal\";\r\n\r\nimport {Dispatch, GetState} from \"../../../util/util\";\r\nimport {User} from \"../account/types\";\r\nimport {Bet} from \"../bets/types\";\r\n\r\nexport function showMissingWalletModal() {\r\n    return show(\"missingWallet\");\r\n}\r\n\r\nexport function hideMissingWalletModal() {\r\n    return hide(\"missingWallet\");\r\n}\r\n\r\nfunction showRegisterModalInternal() {\r\n    return show(\"register\");\r\n}\r\n\r\nexport function hideRegisterModal() {\r\n    return hide(\"register\");\r\n}\r\n\r\nexport function showBetModal({bet, betId}: {bet?: Bet; betId?: number}) {\r\n    return show(\"bet\", {bet, betId});\r\n}\r\n\r\nexport function hideBetModal() {\r\n    return hide(\"bet\");\r\n}\r\n\r\nexport function showUserModal({user, userName}: {user?: User; userName?: string}) {\r\n    return show(\"user\", {user, userName});\r\n}\r\n\r\nexport function hideUserModal() {\r\n    return hide(\"user\");\r\n}\r\n\r\nexport function showRegisterModal() {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        if (!getState().web3.web3) {\r\n            dispatch(showMissingWalletModal());\r\n        } else {\r\n            dispatch(showRegisterModalInternal());\r\n        }\r\n    };\r\n}\r\n","import {createConstant} from \"../../../util/util\";\r\n\r\nfunction c<T>(p: T): T {\r\n    return createConstant(p, \"web3\");\r\n}\r\n\r\nexport const CHANGE_WEB3 = c(\"CHANGE_WEB3\");\r\nexport const CHANGE_ACCOUNT = c(\"CHANGE_ACCOUNT\");\r\nexport const CHANGE_NETWORK = c(\"CHANGE_NETWORK\");\r\nexport const CHANGE_CONTRACT = c(\"CHANGE_CONTRACT\");\r\nexport const CHANGE_BALANCE = c(\"CHANGE_BALANCE\");\r\n","import Web3 from \"web3\";\r\n\r\nimport {ActionCreateType} from \"../../../util/util\";\r\nimport * as types from \"./constants\";\r\n\r\nconst ca = <T extends ActionCreateType<typeof types>>(a: T) => a;\r\n\r\nexport const changeWeb3 = ca((web3: Web3 | null) => {\r\n    return {type: types.CHANGE_WEB3, web3};\r\n});\r\n\r\nexport const changeAccount = ca((account: string | null) => {\r\n    return {type: types.CHANGE_ACCOUNT, account};\r\n});\r\n\r\nexport const changeChainId = ca((chainId: number | null) => {\r\n    return {type: types.CHANGE_NETWORK, chainId};\r\n});\r\n\r\nexport const changeContract = ca((contract: any | null) => {\r\n    return {type: types.CHANGE_CONTRACT, contract};\r\n});\r\n\r\nexport const changeBalance = ca((balance: number | null) => {\r\n    return {type: types.CHANGE_BALANCE, balance};\r\n});\r\n","import {recoverTypedData} from \"@dicether/eip712\";\r\nimport * as Sentry from \"@sentry/browser\";\r\nimport BN from \"bn.js\";\r\nimport {toChecksumAddress} from \"ethereumjs-util\";\r\nimport Web3 from \"web3\";\r\nimport {AbstractProvider, TransactionReceipt} from \"web3-core\";\r\n\r\nimport {CONTRACT_ADDRESS, FROM_WEI_TO_BASE} from \"../../../config/config\";\r\nimport {Dispatch, GetState} from \"../../../util/util\";\r\nimport {changeAccount, changeBalance, changeContract, changeChainId, changeWeb3} from \"./actions\";\r\n\r\nconst stateChannelContractAbi = require(\"assets/json/GameChannelContract.json\");\r\n\r\nexport function fetchChainId() {\r\n    return async (dispatch: Dispatch, getState: GetState) => {\r\n        const chainId = getState().web3.chainId;\r\n        if (window.ethereum !== null) {\r\n            try {\r\n                const newChainId = parseInt(await window.ethereum.request({method: \"eth_chainId\", params: []}));\r\n                if (newChainId !== chainId) {\r\n                    dispatch(changeChainId(newChainId));\r\n                }\r\n            } catch (ex) {\r\n                console.log(\"Chain id fetching failed: \" + ex);\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nexport function fetchWeb3() {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        const web3Data = getState().web3;\r\n        if (window.ethereum && web3Data.web3 === null) {\r\n            const web3 = new Web3(window.ethereum);\r\n            const contract = new web3.eth.Contract(stateChannelContractAbi, CONTRACT_ADDRESS);\r\n            dispatch(changeWeb3(web3));\r\n            dispatch(changeContract(contract));\r\n        } else if (window.ethereum === undefined) {\r\n            dispatch(changeWeb3(null));\r\n        }\r\n    };\r\n}\r\n\r\nexport function fetchAccount() {\r\n    console.log(\"platform-------\");\r\n    return async (dispatch: Dispatch, getState: GetState) => {\r\n        const web3 = getState().web3.web3;\r\n        const curAccount = getState().web3.account;\r\n        if (web3 !== null) {\r\n            return web3.eth\r\n                .getAccounts()\r\n                .then((accounts) => {\r\n                    if (accounts.length === 0) {\r\n                        if (curAccount !== null) {\r\n                            dispatch(changeAccount(null));\r\n                        }\r\n                        return;\r\n                    }\r\n\r\n                    const account = toChecksumAddress(accounts[0]);\r\n                    if (account !== curAccount) {\r\n                        dispatch(changeAccount(account));\r\n                    }\r\n                })\r\n                .catch((error) => console.log(\"Account fetching failed: \" + error));\r\n        } else if (curAccount !== null) {\r\n            dispatch(changeAccount(null));\r\n        }\r\n    };\r\n}\r\n\r\nexport function fetchAccountBalance() {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        const web3State = getState().web3;\r\n        const account = web3State.account;\r\n        const web3 = web3State.web3;\r\n\r\n        if (web3 !== null && account !== null) {\r\n            web3.eth\r\n                .getBalance(account)\r\n                .then((result) => {\r\n                    const balance = new BN(result).div(new BN(FROM_WEI_TO_BASE)).toNumber();\r\n                    if (balance !== web3State.balance) {\r\n                        dispatch(changeBalance(balance));\r\n                    }\r\n                })\r\n                .catch((error) => console.log(\"Balance fetching failed: \" + error));\r\n        } else if (web3State.balance !== null) {\r\n            dispatch(changeBalance(null));\r\n        }\r\n    };\r\n}\r\n\r\nexport function registerAccountChainIdListener() {\r\n    return (dispatch: Dispatch) => {\r\n        if (window.ethereum === undefined) return;\r\n\r\n        window.ethereum.on(\"accountsChanged\", (accounts: string[]) => {\r\n            if (accounts.length === 0) {\r\n                dispatch(changeAccount(null));\r\n            } else {\r\n                const account = toChecksumAddress(accounts[0]);\r\n                dispatch(changeAccount(account));\r\n            }\r\n        });\r\n\r\n        window.ethereum.on(\"chainChanged\", (chainId: string) => {\r\n            dispatch(changeChainId(parseInt(chainId)));\r\n        });\r\n    };\r\n}\r\n\r\nexport function unregisterAccounChainIdListener() {\r\n    window.ethereum.removeListener(\"accountsChanged\");\r\n    window.ethereum.removeListener(\"chainChanged\");\r\n}\r\n\r\nexport function fetchAllWeb3() {\r\n    return (dispatch: Dispatch) => {\r\n        dispatch(fetchWeb3());\r\n        dispatch(fetchAccount());\r\n        dispatch(fetchChainId());\r\n        dispatch(fetchAccountBalance());\r\n    };\r\n}\r\n\r\nexport function getTransactionReceipt(web3: Web3, transactionHash: string): Promise<TransactionReceipt | null> {\r\n    return web3.eth.getTransactionReceipt(transactionHash);\r\n}\r\n\r\nexport async function requestAccounts(dispatch: Dispatch) {\r\n    try {\r\n        await (window as any).ethereum.enable();\r\n        await dispatch(fetchAccount());\r\n    } catch (error: any) {\r\n        console.log(error.message);\r\n    }\r\n}\r\n\r\nexport async function signTypedData(web3: Web3, from: string, typedData: any): Promise<string> {\r\n    const provider: AbstractProvider = web3.currentProvider as AbstractProvider;\r\n\r\n    // Use v4 for MetaMask as Ledger Nano used with MataMask supports only version 4\r\n    const isMetaMask = (provider as any).isMetaMask !== undefined;\r\n    const method = `eth_signTypedData_v${isMetaMask ? 4 : 3}`;\r\n    const params = [from, JSON.stringify(typedData)];\r\n\r\n    if (!provider.request) return Promise.reject(\"provider.request undefined!\");\r\n\r\n    const sig = await provider.request({\r\n        method,\r\n        params,\r\n    });\r\n\r\n    const recoveredAddress = recoverTypedData(typedData, sig);\r\n    if (recoveredAddress !== from) {\r\n        Sentry.captureMessage(\r\n            `Invalid sig ${sig} of data ${JSON.stringify(typedData)} recovered ${recoveredAddress} instead of ${from}.`\r\n        );\r\n    }\r\n    return sig;\r\n}\r\n","import {createConstant} from \"../../../util/util\";\r\n\r\nfunction c<T>(p: T): T {\r\n    return createConstant(p, \"account\");\r\n}\r\n\r\nexport const CHANGE_FIRST_VISITED = c(\"CHANGE_FIRST_VISITED\");\r\nexport const CHANGE_JWT = c(\"CHANGE_JWT\");\r\nexport const CHANGE_USER_STATS = c(\"CHANGE_USER_STATS\");\r\nexport const CHANGE_USER_BETS = c(\"CHANGE_USER_BETS\");\r\nexport const CHANGE_GAME_SESSIONS = c(\"CHANGE_GAME_SESSIONS\");\r\n","import * as Sentry from \"@sentry/browser\";\r\nimport axios from \"axios\";\r\nimport jwtDecode from \"jwt-decode\";\r\n\r\nimport {changeAxiosAuthToken} from \"../../../config/apiEndpoints\";\r\nimport {REALM} from \"../../../config/config\";\r\nimport {Dispatch, GetState, isLocalStorageAvailable} from \"../../../util/util\";\r\nimport {loadBets, loadMyBets} from \"../bets/asyncActions\";\r\nimport {loadMessages} from \"../chat/asyncActions\";\r\nimport {loadFriendRequests, loadFriends} from \"../friends/asyncActions\";\r\nimport {hideRegisterModal, showMissingWalletModal} from \"../modals/actions\";\r\nimport {showErrorMessage} from \"../utilities/actions\";\r\nimport {catchError} from \"../utilities/asyncActions\";\r\nimport {requestAccounts, signTypedData} from \"../web3/asyncActions\";\r\nimport {changeFirstVisitedS, changeJWTS, changeMyGameSessions, changeMyStats} from \"./actions\";\r\nimport {User} from \"./types\";\r\n\r\nconst authenticateTypes = {\r\n    EIP712Domain: [{name: \"name\", type: \"string\"}],\r\n    Authenticate: [\r\n        {name: \"address\", type: \"address\"},\r\n        {name: \"nonce\", type: \"uint64\"},\r\n    ],\r\n};\r\n\r\nconst registerTypes = {\r\n    EIP712Domain: [{name: \"name\", type: \"string\"}],\r\n    Register: [\r\n        {name: \"address\", type: \"address\"},\r\n        {name: \"username\", type: \"string\"},\r\n    ],\r\n};\r\n\r\nexport function changeFirstVisited(firstVisited: boolean) {\r\n    return (dispatch: Dispatch) => {\r\n        if (isLocalStorageAvailable()) {\r\n            localStorage.setItem(\"visited\", String(firstVisited));\r\n        }\r\n        dispatch(changeFirstVisitedS(firstVisited));\r\n    };\r\n}\r\n\r\nexport function changeJWT(jwt: string | null) {\r\n    return (dispatch: Dispatch) => {\r\n        changeAxiosAuthToken(jwt);\r\n        if (jwt === null) {\r\n            sessionStorage.removeItem(\"jwt\");\r\n        } else {\r\n            sessionStorage.setItem(\"jwt\", jwt);\r\n        }\r\n        dispatch(changeJWTS(jwt));\r\n    };\r\n}\r\n\r\nexport function authenticate() {\r\n    return async (dispatch: Dispatch, getState: GetState) => {\r\n        const web3State = getState().web3;\r\n        const web3 = web3State.web3;\r\n        if (web3 === null) {\r\n            dispatch(showMissingWalletModal());\r\n            return undefined;\r\n        }\r\n\r\n        if (web3State.account === null) {\r\n            await requestAccounts(dispatch);\r\n        }\r\n        const web3Account = getState().web3.account;\r\n        if (web3Account === null) {\r\n            dispatch(showErrorMessage(\"Error: You need to log in to your web3 wallet!!\"));\r\n            return;\r\n        }\r\n        return;\r\n    };\r\n}\r\n\r\nexport function register(username: string) {\r\n    return async (dispatch: Dispatch, getState: GetState) => {\r\n        const web3State = getState().web3;\r\n        const web3 = web3State.web3;\r\n\r\n        if (web3 === null) {\r\n            dispatch(showMissingWalletModal());\r\n            return undefined;\r\n        }\r\n\r\n        if (web3State.account === null) {\r\n            await requestAccounts(dispatch);\r\n        }\r\n        const web3Account = getState().web3.account;\r\n        if (web3Account === null) {\r\n            dispatch(showErrorMessage(\"Error: You need to log in to your web3 wallet!!\"));\r\n            return;\r\n        }\r\n\r\n        const typedData = {\r\n            types: registerTypes,\r\n            primaryType: \"Register\",\r\n            domain: {name: REALM},\r\n            message: {address: web3Account, username},\r\n        };\r\n\r\n        const referredBy = localStorage.getItem(\"referral\");\r\n\r\n        return signTypedData(web3, web3Account, typedData)\r\n            .then((result) => {\r\n                return axios.post(\"/auth/register\", {\r\n                    realm: REALM,\r\n                    address: web3Account,\r\n                    username,\r\n                    signature: result,\r\n                    referredBy: referredBy ? referredBy : undefined,\r\n                });\r\n            })\r\n            .then((response) => {\r\n                dispatch(hideRegisterModal());\r\n                initUser(dispatch, response.data.jwt);\r\n            })\r\n            .catch((error) => catchError(error, dispatch));\r\n    };\r\n}\r\n\r\nexport function deauthenticate() {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        if (getState().account.jwt !== null) {\r\n            dispatch(changeJWT(null));\r\n            dispatch({type: \"USER_LOGOUT\"});\r\n            loadDefaultData(dispatch);\r\n            Sentry.configureScope((scope) => scope.setUser({}));\r\n        }\r\n    };\r\n}\r\n\r\nexport function loadStats(address: string) {\r\n    return (dispatch: Dispatch) => {\r\n        return axios\r\n            .get(`/stats/user/${address}`)\r\n            .then((result) => dispatch(changeMyStats(result.data)))\r\n            .catch((error) => catchError(error, dispatch));\r\n    };\r\n}\r\n\r\nexport function loadGameSessions(address: string) {\r\n    return (dispatch: Dispatch) => {\r\n        return axios\r\n            .get(`/gameSessions/${address}`)\r\n            .then((result) => dispatch(changeMyGameSessions(result.data)))\r\n            .catch((error) => catchError(error, dispatch));\r\n    };\r\n}\r\n\r\nexport function initUser(dispatch: Dispatch, jwt: string) {\r\n    const {address, username} = jwtDecode<User>(jwt);\r\n    dispatch(changeJWT(jwt));\r\n    dispatch(loadStats(address)).catch(console.log);\r\n    dispatch(loadGameSessions(address)).catch(console.log);\r\n    dispatch(loadMyBets(address));\r\n    dispatch(loadFriends(address)).catch(console.log);\r\n    dispatch(loadFriendRequests(address)).catch(console.log);\r\n    Sentry.configureScope((scope) =>\r\n        scope.setUser({\r\n            username,\r\n            address,\r\n        })\r\n    );\r\n}\r\n\r\nexport function loadDefaultData(dispatch: Dispatch) {\r\n    dispatch(loadBets());\r\n    dispatch(loadMessages());\r\n}\r\n","import {ActionCreateType} from \"../../../util/util\";\r\nimport * as types from \"./constants\";\r\nimport {GameSession, Stats} from \"./types\";\r\n\r\nconst ca = <T extends ActionCreateType<typeof types>>(a: T) => a;\r\n\r\nexport const changeFirstVisitedS = ca((firstVisited: boolean) => {\r\n    return {type: types.CHANGE_FIRST_VISITED, firstVisited};\r\n});\r\n\r\nexport const changeJWTS = ca((jwt: string | null) => {\r\n    return {type: types.CHANGE_JWT, jwt};\r\n});\r\n\r\nexport const changeMyStats = ca((stats: Stats) => {\r\n    return {type: types.CHANGE_USER_STATS, stats};\r\n});\r\n\r\nexport const changeMyGameSessions = ca((gameSessions: GameSession[]) => {\r\n    return {type: types.CHANGE_GAME_SESSIONS, gameSessions};\r\n});\r\n","import axios from \"axios\";\r\nimport {Dispatch} from \"../../../util/util\";\r\nimport {catchError} from \"../utilities/asyncActions\";\r\nimport {\r\n    addFriendS,\r\n    addSentFriendRequest,\r\n    changeFriends,\r\n    changeReceivedFriendRequests,\r\n    changeSentFriendRequests,\r\n    removeReceivedFriendRequest,\r\n    removeSentFriendRequest,\r\n} from \"./actions\";\r\nimport {Friend} from \"./types\";\r\n\r\nexport function sendFriendRequest(address: string) {\r\n    return (dispatch: Dispatch) => {\r\n        return axios\r\n            .post(\"/chat/sendFriendRequest\", {\r\n                address,\r\n            })\r\n            .then((response) => dispatch(addSentFriendRequest(response.data)))\r\n            .catch((error) => catchError(error, dispatch));\r\n    };\r\n}\r\n\r\nexport function declineFriendRequest(address: string) {\r\n    return (dispatch: Dispatch) => {\r\n        return axios\r\n            .post(\"/chat/declineFriendRequest\", {\r\n                address,\r\n            })\r\n            .then(() => dispatch(removeReceivedFriendRequest(address)))\r\n            .catch((error) => catchError(error, dispatch));\r\n    };\r\n}\r\n\r\nexport function addFriend(friend: Friend) {\r\n    return (dispatch: Dispatch) => {\r\n        dispatch(removeReceivedFriendRequest(friend.user.address));\r\n        dispatch(removeSentFriendRequest(friend.user.address));\r\n        dispatch(addFriendS(friend));\r\n    };\r\n}\r\n\r\nexport function declinedFriendRequest(address: string) {\r\n    return (dispatch: Dispatch) => {\r\n        dispatch(removeSentFriendRequest(address));\r\n    };\r\n}\r\n\r\nexport function cancelFriendRequest(address: string) {\r\n    return (dispatch: Dispatch) => {\r\n        return axios\r\n            .post(\"/chat/cancelFriendRequest\", {\r\n                address,\r\n            })\r\n            .then(() => dispatch(removeSentFriendRequest(address)))\r\n            .catch((error) => catchError(error, dispatch));\r\n    };\r\n}\r\n\r\nexport function acceptFriendRequest(address: string) {\r\n    return (dispatch: Dispatch) => {\r\n        return axios\r\n            .post(\"/chat/acceptFriendRequest\", {\r\n                address,\r\n            })\r\n            .then((response) => {\r\n                dispatch(addFriend(response.data));\r\n                dispatch(removeReceivedFriendRequest(address));\r\n            })\r\n            .catch((error) => catchError(error, dispatch));\r\n    };\r\n}\r\n\r\nexport function loadFriendRequests(_address: string) {\r\n    return (dispatch: Dispatch) => {\r\n        return axios\r\n            .get(\"/chat/friendRequests\")\r\n            .then((response) => {\r\n                const data = response.data;\r\n                dispatch(changeSentFriendRequests(data.sentFriendRequests));\r\n                dispatch(changeReceivedFriendRequests(data.receivedFriendRequests));\r\n            })\r\n            .catch((error) => catchError(error, dispatch));\r\n    };\r\n}\r\n\r\nexport function loadFriends(_address: string) {\r\n    return (dispatch: Dispatch) => {\r\n        return axios\r\n            .get(\"/chat/friends\")\r\n            .then((response) => dispatch(changeFriends(response.data)))\r\n            .catch((error) => catchError(error, dispatch));\r\n    };\r\n}\r\n","import * as types from \"./constants\";\r\n\r\nimport {ActionCreateType} from \"../../../util/util\";\r\nimport {Friend, FriendRequest} from \"./types\";\r\n\r\nconst ca = <T extends ActionCreateType<typeof types>>(a: T) => a;\r\n\r\nexport const changeFriends = ca((friends: Friend[]) => {\r\n    return {type: types.CHANGE_FRIENDS, friends};\r\n});\r\n\r\nexport const addFriendS = ca((friend: Friend) => {\r\n    return {type: types.ADD_FRIEND, friend};\r\n});\r\n\r\nexport const changeReceivedFriendRequests = ca((receivedFriendRequests: FriendRequest[]) => {\r\n    return {type: types.CHANGE_RECEIVED_FRIEND_REQUESTS, receivedFriendRequests};\r\n});\r\n\r\nexport const addReceivedFriendRequest = ca((receivedFriendRequest: FriendRequest) => {\r\n    return {type: types.ADD_RECEIVED_FRIEND_REQUEST, receivedFriendRequest};\r\n});\r\n\r\nexport const changeSentFriendRequests = ca((sentFriendRequests: FriendRequest[]) => {\r\n    return {type: types.CHANGE_SENT_FRIEND_REQUESTS, sentFriendRequests};\r\n});\r\n\r\nexport const addSentFriendRequest = ca((sentFriendRequest: FriendRequest) => {\r\n    return {type: types.ADD_SENT_FRIEND_REQUEST, sentFriendRequest};\r\n});\r\n\r\nexport const removeReceivedFriendRequest = ca((address: string) => {\r\n    return {type: types.REMOVE_RECEIVED_FRIEND_REQUEST, address};\r\n});\r\n\r\nexport const removeSentFriendRequest = ca((address: string) => {\r\n    return {type: types.REMOVE_SENT_FRIEND_REQUEST, address};\r\n});\r\n\r\nexport const toggleFriendOnline = ca((address: string, online: boolean) => {\r\n    return {type: types.TOGGLE_FRIEND_ONLINE, status: {address, online}};\r\n});\r\n","import * as types from \"./constants\";\r\n\r\nimport {ActionType, assertNever, fixedLengthAddElementFront} from \"../../../util/util\";\r\nimport * as actions from \"./actions\";\r\nimport {Bet} from \"./types\";\r\n\r\nexport type Actions = ActionType<typeof actions>;\r\n\r\nexport type State = {\r\n    allBets: Bet[];\r\n    myBets: Bet[];\r\n};\r\n\r\nconst initialState = {\r\n    allBets: [],\r\n    myBets: [],\r\n};\r\n\r\nexport default function games(state: State = initialState, action: Actions): State {\r\n    switch (action.type) {\r\n        case types.CHANGE_BETS:\r\n            return {...state, allBets: action.bets};\r\n        case types.ADD_BET:\r\n            return {...state, allBets: fixedLengthAddElementFront(state.allBets, action.bet, 20)};\r\n        case types.CHANGE_MY_BETS:\r\n            return {...state, myBets: action.myBets};\r\n        case types.ADD_MY_BET:\r\n            return {...state, myBets: fixedLengthAddElementFront(state.myBets, action.myBet, 20)};\r\n        default:\r\n            assertNever(action);\r\n            return state;\r\n    }\r\n}\r\n","import {ActionType, assertNever, fixedLengthAddElement} from \"../../../util/util\";\r\nimport * as types from \"./constants\";\r\n\r\nimport * as actions from \"./actions\";\r\nimport {Message} from \"./types\";\r\n\r\nexport type Actions = ActionType<typeof actions>;\r\n\r\nexport type State = {\r\n    readonly show: boolean;\r\n    readonly messages: Message[];\r\n    readonly numUsers: number;\r\n};\r\n\r\nconst initialState: State = {\r\n    show: window.innerWidth >= 992,\r\n    messages: [],\r\n    numUsers: 0,\r\n};\r\n\r\nconst MAX_MESSAGES = 50;\r\n\r\nexport default function chat(state: State = initialState, action: Actions): State {\r\n    switch (action.type) {\r\n        case types.TOGGLE_CHAT:\r\n            return {...state, show: action.show};\r\n        case types.CHANGE_MESSAGES:\r\n            return {...state, messages: action.messages};\r\n        case types.ADD_MESSAGE:\r\n            return {...state, messages: fixedLengthAddElement(state.messages, action.message, MAX_MESSAGES)};\r\n        case types.CHANGE_USERS_ONLINE:\r\n            return {...state, numUsers: action.numUsers};\r\n        case types.DELETE_MESSAGE:\r\n            return {\r\n                ...state,\r\n                messages: state.messages.map((m) => (m.id === action.messageId ? {...m, deleted: true} : m)),\r\n            };\r\n        default:\r\n            assertNever(action);\r\n            return state;\r\n    }\r\n}\r\n","import * as types from \"./constants\";\r\n\r\nimport {ActionType, assertNever} from \"../../../util/util\";\r\nimport * as actions from \"./actions\";\r\nimport {Friend, FriendRequest} from \"./types\";\r\n\r\nexport type Actions = ActionType<typeof actions>;\r\n\r\nexport type State = {\r\n    readonly friends: Friend[];\r\n    readonly sentFriendRequests: FriendRequest[];\r\n    readonly receivedFriendRequests: FriendRequest[];\r\n};\r\n\r\nexport const initialState: State = {\r\n    friends: [],\r\n    sentFriendRequests: [],\r\n    receivedFriendRequests: [],\r\n};\r\n\r\nfunction updateFriendStatus(friend: Friend, online: boolean) {\r\n    return {...friend, online};\r\n}\r\n\r\nexport default function (state: State = initialState, action: Actions) {\r\n    switch (action.type) {\r\n        case types.CHANGE_FRIENDS:\r\n            return {...state, friends: action.friends};\r\n        case types.ADD_FRIEND:\r\n            return {...state, friends: [...state.friends, action.friend]};\r\n        case types.CHANGE_RECEIVED_FRIEND_REQUESTS:\r\n            return {...state, receivedFriendRequests: action.receivedFriendRequests};\r\n        case types.ADD_RECEIVED_FRIEND_REQUEST:\r\n            return {\r\n                ...state,\r\n                receivedFriendRequests: [...state.receivedFriendRequests, action.receivedFriendRequest],\r\n            };\r\n        case types.REMOVE_RECEIVED_FRIEND_REQUEST: {\r\n            const address = action.address;\r\n            return {\r\n                ...state,\r\n                receivedFriendRequests: state.receivedFriendRequests.filter(\r\n                    (friendReq) => friendReq.from.address !== address\r\n                ),\r\n            };\r\n        }\r\n        case types.CHANGE_SENT_FRIEND_REQUESTS:\r\n            return {...state, sentFriendRequests: action.sentFriendRequests};\r\n        case types.ADD_SENT_FRIEND_REQUEST:\r\n            return {...state, sentFriendRequests: [...state.sentFriendRequests, action.sentFriendRequest]};\r\n        case types.REMOVE_SENT_FRIEND_REQUEST: {\r\n            const address = action.address;\r\n            return {\r\n                ...state,\r\n                sentFriendRequests: state.sentFriendRequests.filter((friendReq) => friendReq.to.address !== address),\r\n            };\r\n        }\r\n        case types.TOGGLE_FRIEND_ONLINE: {\r\n            const status = action.status;\r\n            return {\r\n                ...state,\r\n                friends: state.friends.map((friend) =>\r\n                    status.address === friend.user.address ? updateFriendStatus(friend, status.online) : friend\r\n                ),\r\n            };\r\n        }\r\n        default:\r\n            assertNever(action);\r\n            return state;\r\n    }\r\n}\r\n","import {createConstant} from \"../../../util/util\";\r\n\r\nfunction c<T>(p: T): T {\r\n    return createConstant(p, \"games/plinko\");\r\n}\r\n\r\nexport const CHANGE_VALUE = c(\"CHANGE_VALUE\");\r\nexport const CHANGE_NUM = c(\"CHANGE_NUM\");\r\n","import * as types from \"./constants\";\r\n\r\nimport {GameType, maxBet} from \"@dicether/state-channel\";\r\nimport {KELLY_FACTOR, MIN_BANKROLL, MIN_BET_VALUE} from \"../../../config/config\";\r\nimport {ActionType, assertNever} from \"../../../util/util\";\r\nimport * as actions from \"./actions\";\r\n\r\nexport type Actions = ActionType<typeof actions>;\r\n\r\nexport type State = {\r\n    num: number;\r\n    value: number;\r\n};\r\n\r\nconst initialState = {\r\n    num: 212,\r\n    value: MIN_BET_VALUE,\r\n};\r\n\r\nfunction updateNum(state: State, num: number) {\r\n    const maxBetValue = maxBet(GameType.PLINKO, num, MIN_BANKROLL, KELLY_FACTOR);\r\n    const value = Math.min(maxBetValue, state.value);\r\n\r\n    return {...state, value, num};\r\n}\r\n\r\nexport default function plinko(state: State = initialState, action: Actions): State {\r\n    switch (action.type) {\r\n        case types.CHANGE_NUM:\r\n            return updateNum(state, action.num);\r\n        case types.CHANGE_VALUE:\r\n            return {...state, value: action.value};\r\n        default:\r\n            assertNever(action);\r\n            return state;\r\n    }\r\n}\r\n","import {createConstant} from \"../../../../util/util\";\r\n\r\nfunction c<T>(p: T): T {\r\n    return createConstant(p, \"games\");\r\n}\r\n\r\nexport const CHANGE_BETS = c(\"CHANGE_BETS\");\r\nexport const ADD_BET = c(\"ADD_BET\");\r\nexport const CHANGE_MY_BETS = c(\"CHANGE_MY_BETS\");\r\nexport const ADD_MY_BET = c(\"ADD_MY_BET\");\r\nexport const TOGGLE_EXPERT_VIEW = c(\"TOGGLE_EXPERT_VIEW\");\r\nexport const TOGGLE_HELP = c(\"TOGGLE_HELP\");\r\nexport const TOGGLE_SOUND = c(\"TOGGLE_SOUND\");\r\n","import * as types from \"./constants\";\r\n\r\nimport {ActionType, assertNever} from \"../../../../util/util\";\r\nimport * as actions from \"./actions\";\r\n\r\nexport type Actions = ActionType<typeof actions>;\r\n\r\nexport type State = {\r\n    showHelp: boolean;\r\n    showExpertView: boolean;\r\n    sound: boolean;\r\n};\r\n\r\nconst initialState = {\r\n    showHelp: false,\r\n    showExpertView: false,\r\n    sound: true,\r\n};\r\n\r\nexport default function games(state: State = initialState, action: Actions): State {\r\n    switch (action.type) {\r\n        case types.TOGGLE_HELP:\r\n            return {...state, showHelp: action.show};\r\n        case types.TOGGLE_EXPERT_VIEW:\r\n            return {...state, showExpertView: action.show};\r\n        case types.TOGGLE_SOUND:\r\n            return {...state, sound: action.enabled};\r\n        default:\r\n            assertNever(action);\r\n            return state;\r\n    }\r\n}\r\n","import {createConstant} from \"../../../../util/util\";\r\n\r\nfunction c<T>(p: T): T {\r\n    return createConstant(p, \"games/state\");\r\n}\r\n\r\nexport const CREATING_GAME = c(\"CREATING_GAME\");\r\n\r\nexport const GAME_CREATED = c(\"GAME_CREATED\");\r\nexport const ENDED_GAME = c(\"ENDED_GAME\");\r\nexport const PLACE_BET = c(\"PLACE_BET\");\r\nexport const INVALID_SEED = c(\"INVALID_SEED\");\r\nexport const END_BET = c(\"END_BET\");\r\nexport const CHANGE_STATUS = c(\"CHANGE_STATUS\");\r\nexport const ENDED_WITH_REASON = c(\"ENDED_WITH_REASON\");\r\n\r\nexport const USER_INITIATE_CONFLICT_END = c(\"INITIATE_CONFLICT_END\");\r\nexport const USER_ABORT_CONFLICT_END = c(\"USER_ABORT_CONFLICT_END\");\r\nexport const USER_CONFLICT_END = c(\"USER_CONFLICT_END\");\r\nexport const USER_INITIATE_FORCE_END = c(\"USER_INITIATE_FORCE_END\");\r\nexport const USER_ABORT_FORCE_END = c(\"USER_ABORT_FORCE_END\");\r\nexport const SERVER_CONFLICT_END = c(\"SERVER_CONFLICT_END\");\r\n\r\nexport const RESTORE_STATE = c(\"RESTORE_STATE\");\r\nexport const CLEAR_STATE = c(\"CLEAR_STATE\");\r\n","import {Bet, keccak} from \"@dicether/state-channel\";\r\nimport * as Sentry from \"@sentry/browser\";\r\n\r\nimport {ActionType, assertNever} from \"../../../../util/util\";\r\nimport * as actions from \"./actions\";\r\nimport * as types from \"./constants\";\r\nimport {CHAIN_ID} from \"../../../../config/config\";\r\n\r\nexport type Actions = ActionType<typeof actions>;\r\n\r\nexport type Status =\r\n    | \"CREATING\"\r\n    | \"ACTIVE\"\r\n    | \"ENDED\"\r\n    | \"PLACED_BET\" // TODO: remove?\r\n    | \"SERVER_INITIATED_CONFLICT_END\"\r\n    | \"USER_INITIATED_CONFLICT_END\"\r\n    | \"SERVER_CONFLICT_ENDED\"\r\n    | \"USER_CONFLICT_ENDED\"\r\n    | \"USER_INITIATED_FORCE_END\";\r\n\r\nexport type ReasonEnded =\r\n    | \"REGULAR_ENDED\"\r\n    | \"END_FORCED_BY_SERVER\"\r\n    | \"END_FORCED_BY_USER\"\r\n    | \"REJECTED_BY_SERVER\"\r\n    | \"TRANSACTION_FAILURE\"\r\n    | \"CANCELLED_BY_USER\";\r\n\r\nexport type State = {\r\n    chainId: number;\r\n\r\n    status: Status;\r\n    reasonEnded?: ReasonEnded;\r\n\r\n    createTransactionHash?: string;\r\n    endTransactionHash?: string;\r\n    forceEndTransactionHash?: string;\r\n    conflictEndTransactionHash?: string;\r\n    conflictEndTime?: Date;\r\n    previousState?: Status; // for user conflict end, force end aborting\r\n\r\n    gameId?: number;\r\n\r\n    hashChain: string[];\r\n    stake: number;\r\n\r\n    roundId: number;\r\n    gameType: number;\r\n    num: number;\r\n    betValue?: number;\r\n    balance: number;\r\n    oldBalance: number;\r\n    serverHash?: string;\r\n    userHash?: string;\r\n    serverSig?: string;\r\n    userSig?: string;\r\n};\r\n\r\nconst initialState: State = {\r\n    chainId: CHAIN_ID,\r\n\r\n    status: \"ENDED\",\r\n\r\n    hashChain: [],\r\n    stake: 0,\r\n\r\n    roundId: 0,\r\n    gameType: 0,\r\n    num: 0,\r\n    betValue: 0,\r\n    balance: 0,\r\n    oldBalance: 0,\r\n};\r\n\r\nfunction placeBet(state: State, bet: Bet, serverSig: string, userSig: string): State {\r\n    if (state.status === \"ACTIVE\" && state.roundId + 1 === bet.roundId) {\r\n        return {\r\n            ...state,\r\n            status: \"PLACED_BET\",\r\n            roundId: bet.roundId,\r\n            gameType: bet.gameType,\r\n            num: bet.num,\r\n            betValue: bet.value,\r\n            balance: bet.balance,\r\n            serverHash: bet.serverHash,\r\n            userHash: bet.userHash,\r\n            serverSig,\r\n            userSig,\r\n        };\r\n    } else {\r\n        Sentry.captureMessage(\"Unexpected place bet in reducer!\");\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction revealSeed(state: State, serverSeed: string, userSeed: string, balance: number): State {\r\n    if (state.status === \"PLACED_BET\" && state.userHash === keccak(userSeed)) {\r\n        return {\r\n            ...state,\r\n            status: \"ACTIVE\",\r\n            serverHash: serverSeed,\r\n            userHash: userSeed,\r\n            oldBalance: state.balance,\r\n            balance,\r\n        };\r\n    } else {\r\n        Sentry.captureMessage(\"Unexpected reveal seed in reducer!\");\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default function state(state: State = initialState, action: Actions): State {\r\n    switch (action.type) {\r\n        case types.CREATING_GAME:\r\n            return {\r\n                ...initialState /* sic! */,\r\n                status: \"CREATING\",\r\n                hashChain: action.hashChain,\r\n                stake: action.value,\r\n                userHash: action.hashChain[0],\r\n                serverHash: action.serverEndHash,\r\n                createTransactionHash: action.createTransactionHash,\r\n            };\r\n        case types.GAME_CREATED:\r\n            return {...state, status: \"ACTIVE\", gameId: action.gameId};\r\n        case types.ENDED_GAME:\r\n            return {\r\n                ...state,\r\n                status: \"ENDED\",\r\n                reasonEnded: \"REGULAR_ENDED\",\r\n                endTransactionHash: action.endTransactionHash,\r\n                roundId: action.roundId,\r\n                gameType: 0,\r\n                num: 0,\r\n                betValue: 0,\r\n                serverHash: action.serverHash,\r\n                userHash: action.userHash,\r\n                serverSig: action.serverSig,\r\n                userSig: action.userSig,\r\n            };\r\n        case types.PLACE_BET:\r\n            return placeBet(state, action.bet, action.serverSig, action.userSig);\r\n        case types.END_BET:\r\n            return revealSeed(state, action.serverSeed, action.userSeed, action.balance);\r\n        case types.ENDED_WITH_REASON:\r\n            return {...state, status: \"ENDED\", reasonEnded: action.reason};\r\n        case types.USER_INITIATE_CONFLICT_END:\r\n            return {\r\n                ...state,\r\n                status: \"USER_INITIATED_CONFLICT_END\",\r\n                conflictEndTransactionHash: action.transactionHash,\r\n                previousState: state.status,\r\n            };\r\n        case types.USER_ABORT_CONFLICT_END:\r\n        case types.USER_ABORT_FORCE_END:\r\n            return {\r\n                ...state,\r\n                status: state.previousState as Status,\r\n                previousState: undefined,\r\n            };\r\n        case types.USER_CONFLICT_END:\r\n            return {\r\n                ...state,\r\n                status: \"USER_CONFLICT_ENDED\",\r\n                conflictEndTime: action.time,\r\n            };\r\n        case types.USER_INITIATE_FORCE_END:\r\n            return {\r\n                ...state,\r\n                status: \"USER_INITIATED_FORCE_END\",\r\n                forceEndTransactionHash: action.transactionHash,\r\n                previousState: state.status,\r\n            };\r\n        case types.SERVER_CONFLICT_END:\r\n            return {\r\n                ...state,\r\n                status: \"SERVER_CONFLICT_ENDED\",\r\n            };\r\n        case types.RESTORE_STATE:\r\n            return {...action.state};\r\n        case types.CLEAR_STATE:\r\n            return initialState;\r\n        default:\r\n            assertNever(action);\r\n            return state;\r\n    }\r\n}\r\n","import {combineReducers} from \"redux\";\r\n\r\nimport plinko, {State as PlinkoState} from \"../../../pages/games/plinko/reducer\";\r\nimport info, {State as InfoState} from \"./info/reducer\";\r\nimport gameState, {State as GameState} from \"./state/reducer\";\r\n\r\nexport type State = {\r\n    info: InfoState;\r\n    gameState: GameState;\r\n    plinko: PlinkoState;\r\n};\r\n\r\nconst reducers = combineReducers({\r\n    info,\r\n    gameState,\r\n    plinko,\r\n});\r\n\r\nexport default reducers;\r\n","import * as types from \"../../../app/constants\";\r\nimport {ActionType} from \"../../../util/util\";\r\nimport * as actions from \"./actions\";\r\n\r\nexport type Actions = ActionType<typeof actions>;\r\n\r\nexport type State = {\r\n    notification: {message: string; type: string} | null;\r\n    nightMode: boolean;\r\n};\r\n\r\nconst initialState: State = {\r\n    notification: null,\r\n    nightMode: localStorage.getItem(\"night\") === \"night\",\r\n};\r\n\r\nexport default function reducer(state = initialState, action: Actions): State {\r\n    switch (action.type) {\r\n        case types.CHANGE_NOTIFICATION:\r\n            return {...state, notification: action.notification};\r\n        case types.TOGGLE_THEME:\r\n            localStorage.setItem(\"night\", action.nightMode ? \"night\" : \"day\");\r\n            return {...state, nightMode: action.nightMode};\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import * as types from \"./constants\";\r\n\r\nimport Web3 from \"web3\";\r\nimport {ActionType, assertNever} from \"../../../util/util\";\r\nimport * as actions from \"./actions\";\r\n\r\nexport type Actions = ActionType<typeof actions>;\r\n\r\nexport type State = {\r\n    web3: Web3 | null;\r\n    account: string | null;\r\n    chainId: number | null;\r\n    contract: any | null;\r\n    balance: number | null;\r\n};\r\n\r\nconst initialState = {\r\n    web3: null,\r\n    account: null,\r\n    chainId: null,\r\n    contract: null,\r\n    balance: null,\r\n};\r\n\r\nexport default function reducer(state: State = initialState, action: Actions): State {\r\n    switch (action.type) {\r\n        case types.CHANGE_WEB3:\r\n            return {...state, web3: action.web3};\r\n        case types.CHANGE_ACCOUNT:\r\n            return {...state, account: action.account};\r\n        case types.CHANGE_NETWORK:\r\n            return {...state, chainId: action.chainId};\r\n        case types.CHANGE_CONTRACT:\r\n            return {...state, contract: action.contract};\r\n        case types.CHANGE_BALANCE:\r\n            return {...state, balance: action.balance};\r\n        default:\r\n            assertNever(action);\r\n            return state;\r\n    }\r\n}\r\n","import {combineReducers} from \"redux\";\r\nimport {reducer as modal} from \"redux-modal\";\r\n\r\nimport account, {State as AccountState} from \"./platform/modules/account/reducer\";\r\nimport bets, {State as BetsState} from \"./platform/modules/bets/reducer\";\r\nimport chat, {State as ChatState} from \"./platform/modules/chat/reducer\";\r\nimport friend, {State as FriendState} from \"./platform/modules/friends/reducer\";\r\nimport games, {State as GamesState} from \"./platform/modules/games/reducer\";\r\nimport app, {State as AppState} from \"./platform/modules/utilities/reducer\";\r\nimport web3, {State as Web3State} from \"./platform/modules/web3/reducer\";\r\n\r\nexport type State = {\r\n    account: AccountState;\r\n    chat: ChatState;\r\n    friend: FriendState;\r\n    web3: Web3State;\r\n    app: AppState;\r\n    games: GamesState;\r\n    bets: BetsState;\r\n    modal: any;\r\n};\r\n\r\nconst appReducer = combineReducers<State, any>({\r\n    account,\r\n    chat,\r\n    friend,\r\n    web3,\r\n    app,\r\n    games,\r\n    bets,\r\n    modal,\r\n});\r\n\r\nfunction rootReducer(state: State | undefined, action: any): State {\r\n    if (action.type === \"USER_LOGOUT\") {\r\n        (state as any) = undefined;\r\n    }\r\n\r\n    return appReducer(state, action);\r\n}\r\n\r\nexport default rootReducer;\r\n","import {ActionType, assertNever, isLocalStorageAvailable, isSessionStorageAvailable} from \"../../../util/util\";\r\nimport * as actions from \"./actions\";\r\nimport * as types from \"./constants\";\r\nimport {GameSession, Stats} from \"./types\";\r\n\r\nexport type Actions = ActionType<typeof actions>;\r\n\r\nexport type State = {\r\n    firstVisited: boolean;\r\n    jwt: string | null;\r\n    stats: Stats;\r\n    gameSessions: GameSession[];\r\n};\r\n\r\nfunction initialState(): State {\r\n    // tslint:disable-line strict-type-predicates\r\n    const jwt = isSessionStorageAvailable() ? sessionStorage.getItem(\"jwt\") : null;\r\n    const firstVisited = isLocalStorageAvailable() ? localStorage.getItem(\"visited\") : null;\r\n    return {\r\n        firstVisited: firstVisited === null,\r\n        jwt: jwt === null ? null : jwt,\r\n        stats: {profit: 0, wagered: 0, numBets: 0},\r\n        gameSessions: [],\r\n    };\r\n}\r\n\r\nexport default function account(state = initialState(), action: Actions): State {\r\n    switch (action.type) {\r\n        case types.CHANGE_FIRST_VISITED:\r\n            return {...state, firstVisited: action.firstVisited};\r\n        case types.CHANGE_JWT:\r\n            return {...state, jwt: action.jwt};\r\n\r\n        case types.CHANGE_USER_STATS:\r\n            return {...state, stats: action.stats};\r\n        case types.CHANGE_GAME_SESSIONS:\r\n            return {...state, gameSessions: action.gameSessions};\r\n        default:\r\n            assertNever(action);\r\n            return state;\r\n    }\r\n}\r\n","import * as Sentry from \"@sentry/react\";\r\nimport {applyMiddleware, createStore, compose, Middleware} from \"redux\";\r\nimport {createLogger} from \"redux-logger\";\r\nimport createSentryMiddleware from \"redux-sentry-middleware\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport {VERSION} from \"./config/config\";\r\nimport rootReducer, {State} from \"./rootReducer\";\r\nimport {truncate} from \"./util/util\";\r\n\r\nconst middlewares: Middleware[] = [thunkMiddleware];\r\n\r\nfunction filterState(state: State) {\r\n    // remove chat, bets, account from state\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const {chat, bets, account, web3, ...newState} = state;\r\n\r\n    // remove hashChain from state\r\n    return {\r\n        ...newState,\r\n        games: {...newState.games, gameState: {...newState.games.gameState, hashChain: undefined}},\r\n    };\r\n}\r\n\r\nfunction filterAction(action: any) {\r\n    // Remove data from action\r\n    const type = action?.type;\r\n    return {type};\r\n}\r\n\r\nif (process.env.SENTRY_LOGGING) {\r\n    Sentry.init({\r\n        dsn: \"https://551f6a44d9a54cfe9c18e976685f8234@o103499.ingest.sentry.io/227657\",\r\n        tunnel: \"/sentry\",\r\n        release: `dicether@${VERSION}`,\r\n        normalizeDepth: 10,\r\n        maxBreadcrumbs: 20,\r\n        beforeBreadcrumb(breadcrumb, hint) {\r\n            if (breadcrumb.category === \"xhr\") {\r\n                const response = hint?.xhr?.response;\r\n                const truncatedResponse = response !== undefined ? truncate(response, 100) : undefined;\r\n                breadcrumb.data = {...breadcrumb.data, response: truncatedResponse};\r\n            }\r\n            return breadcrumb;\r\n        },\r\n    });\r\n}\r\n\r\nif (process.env.REDUX_LOGGING) {\r\n    middlewares.push(createLogger());\r\n}\r\n\r\nconst sentryReduxEnhancer = Sentry.createReduxEnhancer({\r\n    // Optionally pass options listed below\r\n});\r\n\r\nexport const store = createStore(rootReducer, compose(applyMiddleware(...middlewares)));\r\n","import axios from \"axios\";\r\n\r\nimport {deauthenticate} from \"../platform/modules/account/asyncActions\";\r\nimport {store} from \"../store\";\r\n\r\naxios.interceptors.response.use(\r\n    (response) => response,\r\n    (error) => {\r\n        if (\r\n            typeof error === \"object\" &&\r\n            error !== null &&\r\n            typeof error.response === \"object\" &&\r\n            error.response !== null &&\r\n            error.response.status === 401\r\n        ) {\r\n            store.dispatch(deauthenticate());\r\n            return Promise.reject(new Error(\"Session timeout!\"));\r\n        } else {\r\n            return Promise.reject(error);\r\n        }\r\n    }\r\n);\r\n","// extracted by mini-css-extract-plugin\nexport default {\"icon\":\"_1XO5a__icon\",\"icon-primary\":\"_1XO5a__icon-primary\",\"icon-secondary\":\"_1XO5a__icon-secondary\",\"icon-success\":\"_1XO5a__icon-success\",\"icon-info\":\"_1XO5a__icon-info\",\"icon-warning\":\"_1XO5a__icon-warning\",\"icon-danger\":\"_1XO5a__icon-danger\",\"icon-light\":\"_1XO5a__icon-light\",\"icon-dark\":\"_1XO5a__icon-dark\",\"icon-blue\":\"_1XO5a__icon-blue\",\"icon-indigo\":\"_1XO5a__icon-indigo\",\"icon-purple\":\"_1XO5a__icon-purple\",\"icon-pink\":\"_1XO5a__icon-pink\",\"icon-red\":\"_1XO5a__icon-red\",\"icon-orange\":\"_1XO5a__icon-orange\",\"icon-yellow\":\"_1XO5a__icon-yellow\",\"icon-green\":\"_1XO5a__icon-green\",\"icon-teal\":\"_1XO5a__icon-teal\",\"icon-cyan\":\"_1XO5a__icon-cyan\",\"icon-white\":\"_1XO5a__icon-white\",\"icon-gray\":\"_1XO5a__icon-gray\",\"icon-gray-dark\":\"_1XO5a__icon-gray-dark\"};","import {library} from \"@fortawesome/fontawesome-svg-core\";\r\nimport {far} from \"@fortawesome/free-regular-svg-icons\";\r\nimport {fas} from \"@fortawesome/free-solid-svg-icons\";\r\nimport {FontAwesomeIcon, Props as FontAwesomeProps} from \"@fortawesome/react-fontawesome\";\r\nimport ClassNames from \"classnames\";\r\nimport * as React from \"react\";\r\n\r\nimport Style from \"./FontAwesomeIcon.scss\";\r\n\r\nlibrary.add(fas, far);\r\n\r\nexport interface Props extends FontAwesomeProps {\r\n    color?: string;\r\n}\r\n\r\nconst Icon = ({color, className, ...rest}: Props) => {\r\n    const classNames = ClassNames(className, {\r\n        [Style[`icon-${color}`]]: color !== undefined,\r\n    });\r\n\r\n    return <FontAwesomeIcon {...rest} className={classNames} />;\r\n};\r\n\r\nexport default Icon;\r\n","import {IconProp} from \"@fortawesome/fontawesome-svg-core\";\r\nimport ClassName from \"classnames\";\r\nimport * as React from \"react\";\r\nimport FontAwesomeIcon, {Props as FontAwesomeIconProps} from \"./FontAwesomeIcon\";\r\n\r\nimport \"./IconButton.scss\";\r\n\r\nexport interface Props extends FontAwesomeIconProps {\r\n    id?: any;\r\n    icon: IconProp;\r\n    onClick: React.MouseEventHandler<any>;\r\n    color?: string;\r\n    buttonClassName?: string;\r\n}\r\n\r\nconst IconButton = ({onClick, color = \"primary\", id, buttonClassName, ...rest}: Props) => {\r\n    const buttonClassNames = ClassName(\"iconButton\", \"iconButton_\" + color, buttonClassName);\r\n\r\n    return (\r\n        <button className={buttonClassNames} onClick={onClick} id={id}>\r\n            <FontAwesomeIcon {...rest} />\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default IconButton;\r\n","import ClassName from \"classnames\";\r\nimport * as React from \"react\";\r\nimport {WithTranslation, withTranslation} from \"react-i18next\";\r\nimport {NavLink as RRNavLink} from \"react-router-dom\";\r\nimport {Collapse, Container, Nav, Navbar, NavbarBrand, NavbarToggler, NavItem, NavLink} from \"reactstrap\";\r\n\r\nimport {CONTRACT_URL} from \"../config/config\";\r\nimport {IconButton} from \"../reusable/index\";\r\n\r\nimport Style from \"./Header.scss\";\r\n\r\nconst logo = require(\"assets/images/logoTop.svg\");\r\n\r\ninterface Props extends WithTranslation {\r\n    authenticated: boolean;\r\n    showChat: boolean;\r\n    nightMode: boolean;\r\n    connected: boolean;\r\n    toggleChat(show: boolean): void;\r\n    authenticate(): void;\r\n    showRegisterModal(): void;\r\n    toggleTheme(nightMode: boolean): void;\r\n}\r\n\r\ntype State = {\r\n    isOpen: boolean;\r\n    showRegister: boolean;\r\n};\r\n\r\nclass Header extends React.Component<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.state = {\r\n            isOpen: false,\r\n            showRegister: false,\r\n        };\r\n    }\r\n\r\n    closeMenu = () => {\r\n        if (this.state.isOpen) {\r\n            this.setState({\r\n                isOpen: !this.state.isOpen,\r\n            });\r\n        }\r\n    };\r\n\r\n    toggle = () => {\r\n        this.setState({\r\n            isOpen: !this.state.isOpen,\r\n        });\r\n    };\r\n\r\n    onToggleChat = () => {\r\n        const {showChat, toggleChat} = this.props;\r\n        toggleChat(!showChat);\r\n        this.closeMenu();\r\n    };\r\n\r\n    onToggleTheme = () => {\r\n        const {nightMode, toggleTheme} = this.props;\r\n        toggleTheme(!nightMode);\r\n    };\r\n\r\n    render() {\r\n        const {authenticated, showRegisterModal, showChat, connected, nightMode, t} = this.props;\r\n        const {isOpen} = this.state;\r\n\r\n        const className = ClassName({\r\n            \"container-chat-open\": showChat,\r\n        });\r\n\r\n        return (\r\n            <Navbar id=\"header\" expand=\"md\" dark color=\"dark\" container={false}>\r\n                <Container className={className}>\r\n                    <NavbarBrand className={Style.brand} tag={RRNavLink} to=\"/\" onClick={this.closeMenu}>\r\n                        <div className={Style.brandImageContainer}>\r\n                            <img className={Style.brandImage} src={logo} />\r\n                        </div>\r\n                    </NavbarBrand>\r\n                    <NavbarToggler onClick={this.toggle} />\r\n                    <Collapse isOpen={isOpen} navbar>\r\n                        <Nav navbar></Nav>\r\n                        <Nav className=\"ms-auto\" navbar>\r\n                            <NavItem>\r\n                                <NavLink>\r\n                                    <IconButton\r\n                                        icon={\"lightbulb\"}\r\n                                        color={nightMode ? \"yellow\" : \"secondary\"}\r\n                                        onClick={this.onToggleTheme}\r\n                                    />\r\n                                </NavLink>\r\n                            </NavItem>\r\n                            {authenticated\r\n                                ? [\r\n                                      <NavItem key=\"2\">\r\n                                          <NavLink tag={RRNavLink} to=\"/logout\">\r\n                                              {t(\"logout\")}\r\n                                          </NavLink>\r\n                                      </NavItem>,\r\n                                  ]\r\n                                : [\r\n                                      <NavItem key=\"2\">\r\n                                          {connected ? (\r\n                                              <NavLink href=\"#\"></NavLink>\r\n                                          ) : (\r\n                                              <NavLink href=\"#\" onClick={this.props.authenticate}>\r\n                                                  {t(\"Connect\")}\r\n                                              </NavLink>\r\n                                          )}\r\n                                      </NavItem>,\r\n                                  ]}\r\n                        </Nav>\r\n                    </Collapse>\r\n                </Container>\r\n            </Navbar>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTranslation()(Header);\r\n","// extracted by mini-css-extract-plugin\nexport default {\"brand\":\"BT-fG__brand\",\"brandImageContainer\":\"BT-fG__brandImageContainer\",\"brandImage\":\"BT-fG__brandImage\"};","import * as React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {bindActionCreators, Dispatch} from \"redux\";\r\n\r\nimport {authenticate} from \"../platform/modules/account/asyncActions\";\r\nimport {toggleChat} from \"../platform/modules/chat/actions\";\r\nimport {showRegisterModal} from \"../platform/modules/modals/actions\";\r\nimport {toggleTheme} from \"../platform/modules/utilities/actions\";\r\nimport {State} from \"../rootReducer\";\r\nimport Footer from \"./Footer\";\r\nimport Header from \"./Header\";\r\n\r\nconst mapStateToProps = ({chat, account, app, web3}: State) => {\r\n    const show = chat.show;\r\n    const jwt = account.jwt;\r\n    return {\r\n        showChat: show,\r\n        authenticated: jwt !== null,\r\n        nightMode: app.nightMode,\r\n        connected: web3.account ? true : false,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) =>\r\n    bindActionCreators(\r\n        {\r\n            toggleChat,\r\n            authenticate,\r\n            toggleTheme,\r\n            showRegisterModal,\r\n        },\r\n        dispatch\r\n    );\r\n\r\ntype OtherProps = {\r\n    children: React.ReactNode;\r\n};\r\n\r\ntype ReduxProps = ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps>;\r\n\r\ntype Props = ReduxProps & OtherProps;\r\n\r\nconst Layout = ({\r\n    children,\r\n    showChat,\r\n    authenticated,\r\n    nightMode,\r\n    connected,\r\n    toggleChat,\r\n    authenticate,\r\n    toggleTheme,\r\n    showRegisterModal,\r\n}: Props) => {\r\n    const className = showChat ? \"chat-open\" : \"\";\r\n\r\n    console.log(\"connected------------------>\", connected);\r\n\r\n    return (\r\n        <div id=\"app\" className={className}>\r\n            <Header\r\n                showChat={showChat}\r\n                authenticated={authenticated}\r\n                nightMode={nightMode}\r\n                connected={connected}\r\n                toggleChat={() => toggleChat(true)}\r\n                authenticate={authenticate}\r\n                toggleTheme={toggleTheme}\r\n                showRegisterModal={showRegisterModal}\r\n            />\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Layout);\r\n","import {ActionCreateType} from \"../../../../util/util\";\r\nimport * as types from \"./constants\";\r\n\r\nconst ca = <T extends ActionCreateType<typeof types>>(a: T) => a;\r\n\r\nexport const toggleHelp = ca((show: boolean) => {\r\n    return {type: types.TOGGLE_HELP, show};\r\n});\r\n\r\nexport const toggleExpertView = ca((show: boolean) => {\r\n    return {type: types.TOGGLE_EXPERT_VIEW, show};\r\n});\r\n\r\nexport const toggleSound = ca((enabled: boolean) => {\r\n    return {type: types.TOGGLE_SOUND, enabled};\r\n});\r\n","import {Bet} from \"@dicether/state-channel\";\r\n\r\nimport {ActionCreateType} from \"../../../../util/util\";\r\nimport * as types from \"./constants\";\r\nimport {ReasonEnded, State} from \"./reducer\";\r\n\r\nconst ca = <T extends ActionCreateType<typeof types>>(a: T) => a;\r\n\r\nexport const creatingGame = ca(\r\n    (hashChain: string[], serverEndHash: string, value: number, transactionHash?: string) => {\r\n        return {type: types.CREATING_GAME, hashChain, value, serverEndHash, createTransactionHash: transactionHash};\r\n    }\r\n);\r\n\r\nexport const endedWithReason = ca((reason: ReasonEnded) => {\r\n    return {type: types.ENDED_WITH_REASON, reason};\r\n});\r\n\r\nexport const gameCreated = ca((gameId: number) => {\r\n    return {type: types.GAME_CREATED, gameId};\r\n});\r\n\r\nexport const addBet = ca((bet: Bet, serverSig: string, userSig: string) => {\r\n    return {type: types.PLACE_BET, bet, serverSig, userSig};\r\n});\r\n\r\nexport const revealSeed = ca((serverSeed: string, userSeed: string, balance: number) => {\r\n    return {type: types.END_BET, serverSeed, userSeed, balance};\r\n});\r\n\r\nexport const endedGame = ca(\r\n    (\r\n        roundId: number,\r\n        serverHash: string,\r\n        userHash: string,\r\n        serverSig: string,\r\n        userSig: string,\r\n        endTransactionHash: string\r\n    ) => {\r\n        return {type: types.ENDED_GAME, roundId, serverHash, userHash, serverSig, userSig, endTransactionHash};\r\n    }\r\n);\r\n\r\nexport const userInitiateConflictEnd = ca((transactionHash: string) => {\r\n    return {type: types.USER_INITIATE_CONFLICT_END, transactionHash};\r\n});\r\n\r\nexport const userAbortConflictEnd = ca(() => {\r\n    return {type: types.USER_ABORT_CONFLICT_END};\r\n});\r\n\r\nexport const userConflictEnd = ca((time: Date) => {\r\n    return {type: types.USER_CONFLICT_END, time};\r\n});\r\n\r\nexport const userInitiateForceEnd = ca((transactionHash: string) => {\r\n    return {type: types.USER_INITIATE_FORCE_END, transactionHash};\r\n});\r\n\r\nexport const userAbortForceEnd = ca(() => {\r\n    return {type: types.USER_ABORT_FORCE_END};\r\n});\r\n\r\nexport const serverConflictEnd = ca(() => {\r\n    return {type: types.SERVER_CONFLICT_END};\r\n});\r\n\r\nexport const restoreState = ca((state: State) => {\r\n    return {type: types.RESTORE_STATE, state};\r\n});\r\n\r\nexport const clearState = ca(() => {\r\n    return {type: types.CLEAR_STATE};\r\n});\r\n","import {\r\n    Bet,\r\n    calcResultNumber,\r\n    calcUserProfit,\r\n    createHashChain,\r\n    createTypedData,\r\n    fromGweiToWei,\r\n    GameStatus as ContractStatus,\r\n    keccak,\r\n    ReasonEnded as ContractReasonEnded,\r\n    verifySeed,\r\n    verifySignature,\r\n} from \"@dicether/state-channel\";\r\nimport * as Sentry from \"@sentry/browser\";\r\nimport retry from \"async-retry\";\r\nimport axios from \"axios\";\r\nimport Web3 from \"web3\";\r\n\r\nimport {TransactionReceipt} from \"web3-core\";\r\nimport {CHAIN_ID, CONTRACT_ADDRESS, NETWORK_NAME, SERVER_ADDRESS, SIGNATURE_VERSION} from \"../../../../config/config\";\r\nimport {getLogGameCreated, getReasonEnded} from \"../../../../contractUtils\";\r\nimport {Dispatch, GetState, isLocalStorageAvailable} from \"../../../../util/util\";\r\nimport {addNewBet} from \"../../bets/asyncActions\";\r\nimport {Bet as FinalBet} from \"../../bets/types\";\r\nimport {catchError} from \"../../utilities/asyncActions\";\r\nimport {getTransactionReceipt, signTypedData} from \"../../web3/asyncActions\";\r\nimport {\r\n    addBet,\r\n    creatingGame,\r\n    endedGame,\r\n    endedWithReason,\r\n    gameCreated,\r\n    restoreState,\r\n    revealSeed,\r\n    serverConflictEnd,\r\n    userAbortConflictEnd,\r\n    userAbortForceEnd,\r\n    userConflictEnd,\r\n    userInitiateConflictEnd,\r\n    userInitiateForceEnd,\r\n} from \"./actions\";\r\nimport {ReasonEnded, State, State as GameState} from \"./reducer\";\r\n\r\nconst STORAGE_VERSION = 2;\r\n\r\n\r\n//\r\n// Event handling\r\n//\r\nfunction canCreateGame(gameState: GameState) {\r\n    const status = gameState.status;\r\n    return status === \"ENDED\" || (status === \"CREATING\" && !gameState.createTransactionHash);\r\n}\r\n\r\nfunction createGameEvent(hashChain: string[], serverEndHash: string, value: number, transactionHash?: string) {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        if (canCreateGame(getState().games.gameState)) {\r\n            dispatch(creatingGame(hashChain, serverEndHash, value, transactionHash));\r\n        } else {\r\n            Sentry.captureMessage(\"Unexpected createGameEvent\");\r\n        }\r\n    };\r\n}\r\n\r\nfunction canEndGame(gameState: GameState) {\r\n    const status = gameState.status;\r\n    return status !== \"ENDED\";\r\n}\r\n\r\nfunction endGameEvent(reason: ReasonEnded) {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        if (canEndGame(getState().games.gameState)) {\r\n            dispatch(endedWithReason(reason));\r\n        } else {\r\n            Sentry.captureMessage(\"Unexpected endGameEvent\");\r\n        }\r\n    };\r\n}\r\n\r\nfunction canRegularEndGame(gameState: GameState) {\r\n    const status = gameState.status;\r\n    return status === \"ACTIVE\";\r\n}\r\n\r\nexport function canUserEndGame(gameState: GameState) {\r\n    const status = gameState.status;\r\n    const reasonEnded = gameState.reasonEnded;\r\n\r\n    return status == \"ENDED\" && reasonEnded == \"REGULAR_ENDED\";\r\n}\r\n\r\nfunction regularEndGameEvent(\r\n    roundId: number,\r\n    serverHash: string,\r\n    userHash: string,\r\n    serverSig: string,\r\n    userSig: string,\r\n    endTransactionHash: string\r\n) {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        if (canRegularEndGame(getState().games.gameState)) {\r\n            dispatch(endedGame(roundId, serverHash, userHash, serverSig, userSig, endTransactionHash));\r\n        } else {\r\n            Sentry.captureMessage(\"Unexpected regularEndGameEvent\");\r\n        }\r\n    };\r\n}\r\n\r\nfunction canActivateGame(gameState: GameState) {\r\n    const status = gameState.status;\r\n    return status === \"CREATING\";\r\n}\r\n\r\nfunction activateGameEvent(gameId: number, serverHash: string, userHash: string) {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        const gameState = getState().games.gameState;\r\n        if (canActivateGame(gameState)) {\r\n            if (serverHash !== gameState.serverHash) {\r\n                throw Error(`Unexpectd serverHash: ${serverHash}, expected ${gameState.serverHash}`);\r\n            }\r\n            if (userHash !== gameState.userHash) {\r\n                throw Error(`Unexpectd userHash: ${userHash}, expected ${gameState.userHash}`);\r\n            }\r\n\r\n            dispatch(gameCreated(gameId));\r\n        } else {\r\n            Sentry.captureMessage(\"Unexpected activateGameEvent\");\r\n        }\r\n    };\r\n}\r\n\r\nfunction canPlaceBet(gameState: GameState) {\r\n    const status = gameState.status;\r\n    return status === \"ACTIVE\";\r\n}\r\n\r\nfunction placeBetEvent(bet: Bet, serverSig: string, userSig: string) {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        if (canPlaceBet(getState().games.gameState)) {\r\n            dispatch(addBet(bet, serverSig, userSig));\r\n        } else {\r\n            Sentry.captureMessage(\"Unexpected placeBetEvent\");\r\n        }\r\n    };\r\n}\r\n\r\nfunction canRevealSeed(gameState: GameState) {\r\n    const status = gameState.status;\r\n    return status === \"PLACED_BET\";\r\n}\r\n\r\nfunction revealSeedEvent(serverSeed: string, userSeed: string, balance: number) {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        if (canRevealSeed(getState().games.gameState)) {\r\n            dispatch(revealSeed(serverSeed, userSeed, balance));\r\n        } else {\r\n            Sentry.captureMessage(\"Unexpected revealSeedEvent\");\r\n        }\r\n    };\r\n}\r\n\r\nexport function canUserInitiateConflictEnd(gameState: GameState) {\r\n    const status = gameState.status;\r\n    return status === \"ACTIVE\" || status === \"PLACED_BET\" || status === \"SERVER_CONFLICT_ENDED\";\r\n}\r\n\r\nfunction userInitiateConflictEndEvent(transactionHash: string) {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        if (canUserInitiateConflictEnd(getState().games.gameState)) {\r\n            dispatch(userInitiateConflictEnd(transactionHash));\r\n        } else {\r\n            Sentry.captureMessage(\"Unexpected userInitiateConflictEndEvent\");\r\n        }\r\n    };\r\n}\r\n\r\nfunction canUserConflictEnd(gameState: GameState) {\r\n    const status = gameState.status;\r\n    return status === \"USER_INITIATED_CONFLICT_END\";\r\n}\r\n\r\nfunction userConflictEndEvent(time: Date) {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        if (canUserConflictEnd(getState().games.gameState)) {\r\n            dispatch(userConflictEnd(time));\r\n        } else {\r\n            Sentry.captureMessage(\"Unexpected userConflictEndEvent\");\r\n        }\r\n    };\r\n}\r\n\r\nfunction canUserAbortConflictEnd(gameState: GameState) {\r\n    const status = gameState.status;\r\n    return status === \"USER_INITIATED_CONFLICT_END\";\r\n}\r\n\r\nfunction userAbortConflictEndEvent() {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        if (canUserAbortConflictEnd(getState().games.gameState)) {\r\n            dispatch(userAbortConflictEnd());\r\n        } else {\r\n            Sentry.captureMessage(\"Unexpected userAbortConflictEndEvent\");\r\n        }\r\n    };\r\n}\r\n\r\nfunction canUserInitiateForceEnd(gameState: GameState) {\r\n    const status = gameState.status;\r\n    return status === \"USER_CONFLICT_ENDED\";\r\n}\r\n\r\nfunction userInitiateForceEndEvent(transactionHash: string) {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        if (canUserInitiateForceEnd(getState().games.gameState)) {\r\n            dispatch(userInitiateForceEnd(transactionHash));\r\n        } else {\r\n            Sentry.captureMessage(\"Unexpected userInitiateForceEndEvent\");\r\n        }\r\n    };\r\n}\r\n\r\nfunction canUserForceEnd(gameState: GameState) {\r\n    const status = gameState.status;\r\n    return status === \"USER_INITIATED_FORCE_END\";\r\n}\r\n\r\nfunction userForceEndEvent() {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        if (canUserForceEnd(getState().games.gameState)) {\r\n            dispatch(endedWithReason(\"END_FORCED_BY_USER\"));\r\n        } else {\r\n            Sentry.captureMessage(\"Unexpected userForceEndEvent\");\r\n        }\r\n    };\r\n}\r\n\r\nfunction canUserAbortForceEnd(gameState: GameState) {\r\n    const status = gameState.status;\r\n    return status === \"USER_INITIATED_FORCE_END\";\r\n}\r\n\r\nfunction userAbortForceEndEvent() {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        if (canUserAbortForceEnd(getState().games.gameState)) {\r\n            dispatch(userAbortForceEnd());\r\n        } else {\r\n            Sentry.captureMessage(\"Unexpected userAbortForceEndEvent\");\r\n        }\r\n    };\r\n}\r\n\r\nfunction canServerConflictEnd(gameState: GameState) {\r\n    const status = gameState.status;\r\n    return (\r\n        status === \"CREATING\" ||\r\n        status === \"USER_CONFLICT_ENDED\" ||\r\n        status === \"USER_INITIATED_CONFLICT_END\" ||\r\n        status === \"USER_INITIATED_FORCE_END\" ||\r\n        status === \"ACTIVE\" ||\r\n        status === \"PLACED_BET\"\r\n    );\r\n}\r\n\r\nfunction serverConflictEndEvent() {\r\n    return (dispatch: Dispatch, getState: GetState) => {\r\n        if (canServerConflictEnd(getState().games.gameState)) {\r\n            dispatch(serverConflictEnd());\r\n        } else {\r\n            Sentry.captureMessage(\"Unexpected serverConflictEndEvent\");\r\n        }\r\n    };\r\n}\r\n\r\n//\r\n// util functions\r\n//\r\nfunction isTransactionFailed(receipt: TransactionReceipt) {\r\n    return !receipt.status;\r\n}\r\n\r\nexport const validChainId = (chainId: number | null) => {\r\n    return chainId === CHAIN_ID;\r\n};\r\n\r\nconst checkIfEndTransactionFinished = (web3: Web3, transactionHash?: string) => {\r\n    if (!transactionHash) {\r\n        return Promise.resolve(true);\r\n    }\r\n\r\n    return getTransactionReceipt(web3, transactionHash).then((receipt) => receipt !== null);\r\n};\r\n\r\nexport function loadContractStateCreatedGame() {\r\n    return async (dispatch: Dispatch, getState: GetState) => {\r\n        const {web3: web3State, games} = getState();\r\n        const {contract} = web3State;\r\n        const {gameState} = games;\r\n        const {gameId} = gameState;\r\n        const {web3, account} = web3State;\r\n\r\n        if (!web3 || !account) {\r\n            throw new Error(\"You need a web3 enabled browser (Metamask)!\");\r\n        }\r\n\r\n        if (gameId === undefined) {\r\n            throw new Error(\"Invalid game state!\");\r\n        }\r\n\r\n        const result = await contract.methods.gameIdGame(gameId).call();\r\n        const status = Number.parseInt(result.status, 10);\r\n\r\n        if (status === ContractStatus.ENDED && canEndGame(gameState)) {\r\n            const reasonEnded = await getReasonEnded(web3, contract, gameId);\r\n            return dispatch(endGameEvent(ContractReasonEnded[reasonEnded] as ReasonEnded));\r\n        } else if (status === ContractStatus.USER_INITIATED_END && canUserConflictEnd(gameState)) {\r\n            return dispatch(userConflictEndEvent(new Date()));\r\n        } else if (status === ContractStatus.SERVER_INITIATED_END && canServerConflictEnd(gameState)) {\r\n            return dispatch(serverConflictEndEvent());\r\n        } else {\r\n            return;\r\n        }\r\n    };\r\n}\r\n\r\nexport function loadContractGameState() {\r\n    return async (dispatch: Dispatch, getState: GetState) => {\r\n        const {web3: web3State, games} = getState();\r\n        const {contract} = web3State;\r\n        const {gameState} = games;\r\n        const {web3, account, chainId} = web3State;\r\n\r\n        if (!account || !web3 || !contract || chainId === null) {\r\n            throw new Error(\"You need a web3 enabled browser (Metamask)!\");\r\n        }\r\n\r\n        if (!validChainId(chainId)) {\r\n            throw new Error(`Invalid network! You need to use ${NETWORK_NAME}!`);\r\n        }\r\n\r\n        if (gameState.status === \"CREATING\") {\r\n            // special case as we don't know gameId to read contract state!\r\n            if (!gameState.serverHash) {\r\n                throw new Error(\"Invalid game state!\");\r\n            }\r\n\r\n            const logCreated = await getLogGameCreated(web3, contract, gameState.serverHash);\r\n            if (logCreated) {\r\n                const gameId = logCreated.returnValues.gameId;\r\n                const serverHash = logCreated.returnValues.serverEndHash;\r\n                const userHash = logCreated.returnValues.userEndHash;\r\n\r\n                dispatch(activateGameEvent(gameId, serverHash, userHash));\r\n                return dispatch(loadContractStateCreatedGame());\r\n            }\r\n\r\n            if (gameState.createTransactionHash) {\r\n                const receipt = await getTransactionReceipt(web3, gameState.createTransactionHash);\r\n                if (!receipt) {\r\n                    // transaction isn't mined\r\n                    return;\r\n                }\r\n\r\n                if (isTransactionFailed(receipt)) {\r\n                    return dispatch(endGameEvent(\"TRANSACTION_FAILURE\"));\r\n                }\r\n            }\r\n        } else if (gameState.status !== \"ENDED\") {\r\n            return dispatch(loadContractStateCreatedGame());\r\n        }\r\n    };\r\n}\r\n\r\n// TODO: remove???\r\nexport function loadServerGameState() {\r\n    return async (dispatch: Dispatch, getState: GetState) => {\r\n        if (getState().games.gameState.status === \"ENDED\") {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const {data} = await axios.get(\"stateChannel/activeGameState\");\r\n            const status = data.status;\r\n            const gameId = data.gameId;\r\n            const userHash = data.userHash;\r\n\r\n            const gameState = getState().games.gameState;\r\n            if (gameState.status === \"CREATING\" && status === \"ACTIVE\" && gameState.userHash === userHash) {\r\n                dispatch(gameCreated(gameId));\r\n            }\r\n        } catch (error: any) {\r\n            if (!error.response || error.response.status !== 404) {\r\n                catchError(error, dispatch);\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nexport function loadLocalGameState(chainId: number, address: string) {\r\n    return (dispatch: Dispatch) => {\r\n        if (!isLocalStorageAvailable()) {\r\n            Sentry.captureMessage(\"No local storage support!\");\r\n            console.warn(\"No local storage support!\");\r\n        }\r\n\r\n        const storedState = localStorage.getItem(`gameState_${address}_${chainId}`);\r\n        if (storedState !== null) {\r\n            const state = JSON.parse(storedState);\r\n            dispatch(restoreState(state.gameState));\r\n        }\r\n    };\r\n}\r\n\r\nexport function storeGameState(address: string, gameState: State) {\r\n    if (!isLocalStorageAvailable()) {\r\n        Sentry.captureMessage(\"No local storage support!\");\r\n        console.warn(\"No local storage support! Can not store game state!\");\r\n        return;\r\n    }\r\n    localStorage.setItem(\r\n        `gameState_${address}_${gameState.chainId}`,\r\n        JSON.stringify({version: STORAGE_VERSION, gameState})\r\n    );\r\n}\r\n\r\nexport function syncGameState(chainId: number, address: string) {\r\n    return async (dispatch: Dispatch) => {\r\n        try {\r\n            dispatch(loadLocalGameState(chainId, address));\r\n            await dispatch(loadContractGameState());\r\n            await dispatch(loadServerGameState());\r\n        } catch (error) {\r\n            catchError(error, dispatch);\r\n        }\r\n    };\r\n}\r\n\r\n// TODO: improve, check contract state???\r\nexport function serverActiveGame(gameId: number, serverHash: string, userHash: string) {\r\n    return (dispatch: Dispatch) => {\r\n        if (status === \"ACTIVE\") {\r\n            // already active => do nothing\r\n            return;\r\n        }\r\n\r\n        dispatch(activateGameEvent(gameId, serverHash, userHash));\r\n    };\r\n}\r\n\r\nexport function createGame(stake: number, userSeed: string) {\r\n    return async (dispatch: Dispatch, getState: GetState) => {\r\n        const web3State = getState().web3;\r\n        const contract = web3State.contract;\r\n        const account = web3State.account;\r\n        const gameState = getState().games.gameState;\r\n        const status = gameState.status;\r\n\r\n        if (!isLocalStorageAvailable()) {\r\n            throw new Error(\r\n                \"You browser doesn't support sessionStorage/localStorage! Without playing is not possible!\"\r\n            );\r\n        }\r\n\r\n        if (!validChainId(web3State.chainId)) {\r\n            throw new Error(`Invalid chain! You need to use ${NETWORK_NAME}!`);\r\n        }\r\n\r\n        if (!account || !contract || !web3State.web3) {\r\n            throw new Error(\"You need a web3 enabled browser (Metamask)!\");\r\n        }\r\n\r\n        if (!canCreateGame(gameState)) {\r\n            throw new Error(`Invalid game status: ${status}! Can not create game!`);\r\n        }\r\n\r\n        const createGame = contract.methods.createGame;\r\n        const hashChain = createHashChain(userSeed);\r\n\r\n        const finished = await checkIfEndTransactionFinished(web3State.web3, gameState.endTransactionHash);\r\n        if (!finished) {\r\n            throw new Error(\"You need to wait until transaction ending game session is mined!\");\r\n        }\r\n\r\n        const response = await axios.post(\"stateChannel/createGame\");\r\n        const data = response.data;\r\n        const serverEndHash = data.serverEndHash;\r\n        const previousGameId = data.previousGameId;\r\n        const createBefore = data.createBefore;\r\n        const signature = data.signature;\r\n\r\n        dispatch(createGameEvent(hashChain, serverEndHash, stake));\r\n\r\n        await new Promise<void>((resolve, reject) => {\r\n            createGame(hashChain[0], previousGameId, createBefore, serverEndHash, signature)\r\n                .send({\r\n                    from: account,\r\n                    value: fromGweiToWei(stake).toString(),\r\n                    gas: 150000,\r\n                })\r\n                .on(\"error\", (error: Error) => {\r\n                    reject(error);\r\n                })\r\n                .on(\"transactionHash\", (transactionHash: string) => {\r\n                    dispatch(createGameEvent(hashChain, serverEndHash, stake, transactionHash));\r\n                })\r\n                .on(\"receipt\", (receipt: TransactionReceipt) => {\r\n                    if (isTransactionFailed(receipt)) {\r\n                        dispatch(endGameEvent(\"TRANSACTION_FAILURE\"));\r\n                        reject(new Error(\"Create game transaction failed!\"));\r\n                    }\r\n                })\r\n                .on(\"confirmation\", (num: number, receipt: TransactionReceipt) => {\r\n                    // wait for 3 confirmations\r\n                    if (num === 3) {\r\n                        const event = receipt.events ? receipt.events.LogGameCreated : null;\r\n                        if (isTransactionFailed(receipt) || !event) {\r\n                            dispatch(endGameEvent(\"TRANSACTION_FAILURE\"));\r\n                            reject(new Error(\"Create game transaction failed!\"));\r\n                        } else {\r\n                            const gameId = (event.returnValues as any).gameId;\r\n                            const serverHash = (event.returnValues as any).serverEndHash;\r\n                            const userHash = (event.returnValues as any).userEndHash;\r\n                            if (getState().games.gameState.status !== \"ACTIVE\") {\r\n                                dispatch(activateGameEvent(gameId, serverHash, userHash));\r\n                            }\r\n                            resolve();\r\n                        }\r\n                    }\r\n                })\r\n                .catch((error: Error) => {\r\n                    reject(error);\r\n                });\r\n        });\r\n    };\r\n}\r\n\r\n\r\nexport function endGame() {\r\n    return async (dispatch: Dispatch, getState: GetState) => {\r\n        const state = getState();\r\n        const gameState = state.games.gameState;\r\n        const account = state.web3.account;\r\n        const web3 = state.web3.web3;\r\n        const chainId = state.web3.chainId;\r\n\r\n        // use previous seeds as new hashes seeds (hash chain)\r\n        const serverHash = gameState.serverHash;\r\n        const userHash = gameState.userHash;\r\n\r\n        const userAddress = account;\r\n        const gameId = gameState.gameId;\r\n        const roundId = gameState.roundId + 1;\r\n        const balance = gameState.balance;\r\n\r\n        if (!getState().account.jwt) {\r\n            throw new Error(\"You need to login before ending game session!\");\r\n        }\r\n\r\n        if (!account || !web3) {\r\n            throw new Error(\"You need a web3 enabled browser (Metamask)!\");\r\n        }\r\n\r\n        if (!validChainId(chainId)) {\r\n            throw new Error(`Invalid network! You need to use ${NETWORK_NAME}!`);\r\n        }\r\n\r\n        if (!canRegularEndGame(gameState)) {\r\n            throw new Error(`Invalid game status ${gameState.status}! Can not end game!`);\r\n        }\r\n\r\n        if (!userHash || !serverHash || !userAddress || !gameId) {\r\n            throw new Error(\"Invalid state!\");\r\n        }\r\n\r\n        const bet = {\r\n            roundId: gameState.roundId + 1,\r\n            gameType: 0,\r\n            num: 0,\r\n            value: 0,\r\n            balance,\r\n            serverHash,\r\n            userHash,\r\n            gameId,\r\n        };\r\n\r\n        const typedData = createTypedData(bet, CHAIN_ID, CONTRACT_ADDRESS, SIGNATURE_VERSION);\r\n        const userSig = await signTypedData(web3, account, typedData);\r\n\r\n        const {data} = await axios.post(\"stateChannel/endGame\", {bet, contractAddress: CONTRACT_ADDRESS, userSig});\r\n        const {serverSig, transactionHash: endTransactionHash} = data;\r\n\r\n        if (!verifySignature(bet, CHAIN_ID, CONTRACT_ADDRESS, serverSig, SERVER_ADDRESS, SIGNATURE_VERSION)) {\r\n            throw new Error(\"Invalid server signature!\");\r\n        }\r\n\r\n        dispatch(regularEndGameEvent(roundId, serverHash, userHash, serverSig, userSig, endTransactionHash));\r\n    };\r\n}\r\n\r\nexport function userEndGame() {\r\n    return async (dispatch: Dispatch, getState: GetState) => {\r\n        const state = getState();\r\n        const gameState = state.games.gameState;\r\n        const account = state.web3.account;\r\n        const web3 = state.web3.web3;\r\n        const contract = state.web3.contract;\r\n        const chainId = state.web3.chainId;\r\n\r\n        if (!web3 || !account || !contract) {\r\n            throw new Error(\"You need a web3 enabled browser (Metamask)!\");\r\n        }\r\n\r\n        if (!validChainId(chainId)) {\r\n            throw new Error(`Invalid network! You need to use ${NETWORK_NAME}!`);\r\n        }\r\n\r\n        if (!canUserEndGame(gameState)) {\r\n            throw new Error(\r\n                `Invalid game status ${gameState.status}, ${gameState.reasonEnded}! Can not resend end transaction!`\r\n            );\r\n        }\r\n\r\n        const roundId = gameState.roundId;\r\n        const balance = gameState.balance;\r\n        const serverHash = gameState.serverHash as string;\r\n        const userHash = gameState.userHash as string;\r\n        const gameId = gameState.gameId as number;\r\n        const serverSig = gameState.serverSig as string;\r\n\r\n        const userEndGame = contract.methods.userEndGame;\r\n        await new Promise((resolve, reject) =>\r\n            userEndGame(\r\n                roundId,\r\n                fromGweiToWei(balance).toString(),\r\n                serverHash,\r\n                userHash,\r\n                gameId,\r\n                CONTRACT_ADDRESS,\r\n                serverSig\r\n            )\r\n                .send({from: account, value: 0, gas: 120000})\r\n                .on(\"transactionHash\", (_transactionHash: string) => {\r\n                    // nothing to do\r\n                })\r\n                .on(\"error\", (error: Error) => {\r\n                    reject(error);\r\n                })\r\n                .then((_receipt: TransactionReceipt) => {\r\n                    // nothing to do\r\n                })\r\n                .catch((error: Error) => {\r\n                    reject(error);\r\n                })\r\n        );\r\n    };\r\n}\r\n\r\nexport function conflictEnd() {\r\n    return async (dispatch: Dispatch, getState: GetState) => {\r\n        const state = getState();\r\n        const gameState = state.games.gameState;\r\n        const account = state.web3.account;\r\n        const web3 = state.web3.web3;\r\n        const contract = state.web3.contract;\r\n        const chainId = state.web3.chainId;\r\n\r\n        const gameId = gameState.gameId;\r\n        const roundId = gameState.roundId;\r\n        const gameType = gameState.gameType;\r\n        const num = gameState.num;\r\n        const oldBalance = gameState.oldBalance;\r\n        const serverSig = gameState.serverSig;\r\n        const contractAddress = contract.options.address;\r\n\r\n        if (!web3 || !account || !contract) {\r\n            throw new Error(\"You need a web3 enabled browser (Metamask)!\");\r\n        }\r\n\r\n        if (!validChainId(chainId)) {\r\n            throw new Error(`Invalid network! You need to use ${NETWORK_NAME}!`);\r\n        }\r\n\r\n        if (!canUserInitiateConflictEnd(gameState)) {\r\n            throw new Error(`Invalid game status ${gameState.status}! Can not conflict end!`);\r\n        }\r\n\r\n        if (!gameState.serverHash || !gameState.userHash || gameId === undefined) {\r\n            throw new Error(\"Invalid state!\");\r\n        }\r\n\r\n        if (roundId === 0) {\r\n            const cancelActiveGame = contract.methods.userCancelActiveGame;\r\n            await new Promise((resolve, reject) =>\r\n                cancelActiveGame(gameId)\r\n                    .send({from: account, value: 0, gas: 120000})\r\n                    .on(\"transactionHash\", (transactionHash: string) => {\r\n                        dispatch(userInitiateConflictEndEvent(transactionHash));\r\n                    })\r\n                    .on(\"error\", (error: Error) => {\r\n                        reject(error);\r\n                    })\r\n                    .then((receipt: TransactionReceipt) => {\r\n                        if (isTransactionFailed(receipt)) {\r\n                            dispatch(userAbortConflictEndEvent());\r\n                        } else {\r\n                            dispatch(userConflictEndEvent(new Date()));\r\n                        }\r\n                    })\r\n                    .catch((error: Error) => {\r\n                        reject(error);\r\n                    })\r\n            );\r\n        } else {\r\n            let serverHash = keccak(gameState.serverHash);\r\n            let userHash = keccak(gameState.userHash);\r\n            const value = fromGweiToWei(gameState.betValue as number).toString();\r\n            let balance = fromGweiToWei(oldBalance).toString();\r\n            let userSeed = gameState.userHash;\r\n\r\n            if (gameState.status === \"PLACED_BET\") {\r\n                serverHash = gameState.serverHash;\r\n                userHash = gameState.userHash;\r\n                balance = fromGweiToWei(gameState.balance).toString();\r\n                userSeed = gameState.hashChain[roundId];\r\n            }\r\n\r\n            const userEndGameConflict = contract.methods.userEndGameConflict;\r\n            await new Promise((resolve, reject) =>\r\n                userEndGameConflict(\r\n                    roundId,\r\n                    gameType,\r\n                    num,\r\n                    value,\r\n                    balance,\r\n                    serverHash,\r\n                    userHash,\r\n                    gameId,\r\n                    serverSig,\r\n                    userSeed\r\n                )\r\n                    .send({from: account, gas: 250000})\r\n                    .on(\"transactionHash\", (transactionHash: string) => {\r\n                        dispatch(userInitiateConflictEndEvent(transactionHash));\r\n                    })\r\n                    .on(\"error\", (error: Error) => {\r\n                        reject(error);\r\n                    })\r\n                    .then((receipt: TransactionReceipt) => {\r\n                        if (isTransactionFailed(receipt)) {\r\n                            dispatch(userAbortConflictEnd());\r\n                        } else {\r\n                            dispatch(userConflictEndEvent(new Date()));\r\n                        }\r\n                    })\r\n                    .catch((error: Error) => {\r\n                        reject(error);\r\n                    })\r\n            );\r\n        }\r\n    };\r\n}\r\n\r\nexport function forceEnd() {\r\n    return async (dispatch: Dispatch, getState: GetState) => {\r\n        const state = getState();\r\n        const gameState = state.games.gameState;\r\n        const account = state.web3.account;\r\n        const contract = state.web3.contract;\r\n        const chainId = state.web3.chainId;\r\n\r\n        const gameId = gameState.gameId;\r\n\r\n        if (!account || !contract) {\r\n            throw new Error(\"You need a web3 enabled browser (Metamask)!\");\r\n        }\r\n\r\n        if (!validChainId(chainId)) {\r\n            throw new Error(`Invalid network! You need to use ${NETWORK_NAME}!`);\r\n        }\r\n\r\n        if (!canUserInitiateForceEnd(gameState)) {\r\n            throw new Error(`Invalid game status ${gameState.status}! Can not force end!`);\r\n        }\r\n\r\n        const userForceGameEnd = contract.methods.userForceGameEnd;\r\n        await new Promise((resolve, reject) =>\r\n            userForceGameEnd(gameId)\r\n                .send({from: account, value: 0, gas: 120000})\r\n                .on(\"transactionHash\", (transactionHash: string) => {\r\n                    dispatch(userInitiateForceEndEvent(transactionHash));\r\n                })\r\n                .on(\"error\", (error: Error) => {\r\n                    return Promise.reject(error);\r\n                })\r\n                .then((receipt: TransactionReceipt) => {\r\n                    if (isTransactionFailed(receipt)) {\r\n                        dispatch(userAbortForceEndEvent());\r\n                    } else {\r\n                        dispatch(userForceEndEvent());\r\n                    }\r\n                })\r\n                .catch((error: Error) => {\r\n                    reject(error);\r\n                })\r\n        );\r\n    };\r\n}\r\n\r\nasync function revealSeedRequest(gameId: number, roundId: number, userSeed: string) {\r\n    return retry(\r\n        () => {\r\n            return axios.post(\"stateChannel/revealSeed\", {\r\n                gameId,\r\n                roundId,\r\n                userSeed,\r\n            });\r\n        },\r\n        {retries: 1, minTimeout: 500}\r\n    );\r\n}\r\n\r\nexport function requestSeed() {\r\n    return async (dispatch: Dispatch, getState: GetState) => {\r\n        const gameState = getState().games.gameState;\r\n        const serverHash = gameState.serverHash;\r\n\r\n        if (!getState().account.jwt) {\r\n            throw new Error(\"You need to login before playing!\");\r\n        }\r\n\r\n        if (!canRevealSeed(gameState)) {\r\n            throw new Error(`Invalid game status: ${gameState.status}! Can not reveal seed!`);\r\n        }\r\n\r\n        const betValue = gameState.betValue;\r\n        const userSeed = gameState.hashChain[gameState.roundId];\r\n        const num = gameState.num;\r\n        const gameType = gameState.gameType;\r\n        const balance = gameState.balance;\r\n\r\n        if (betValue === undefined || gameState.gameId === undefined || !serverHash) {\r\n            throw new Error(\"Invalid game state!\");\r\n        }\r\n\r\n        const {data} = await revealSeedRequest(gameState.gameId, gameState.roundId, userSeed);\r\n        const {serverSeed, balance: newServerBalance, bet} = data;\r\n\r\n        if (!verifySeed(serverSeed, serverHash)) {\r\n            throw new Error(\"Invalid server seed!\");\r\n        }\r\n\r\n        const resNum = calcResultNumber(gameType, serverSeed, userSeed, num);\r\n        const userProfit = calcUserProfit(gameType, num, betValue, resNum);\r\n        const newUserBalance = balance + userProfit;\r\n\r\n        if (newServerBalance !== newUserBalance) {\r\n            throw new Error(`Invalid server balance! Expected ${newUserBalance} got ${newServerBalance}`);\r\n        }\r\n\r\n        dispatch(revealSeedEvent(serverSeed, userSeed, newServerBalance));\r\n\r\n        return {\r\n            betNum: bet.num,\r\n            num: resNum,\r\n            won: userProfit > 0,\r\n            userProfit,\r\n            bet,\r\n        };\r\n    };\r\n}\r\n\r\nexport function manualRequestSeed() {\r\n    return async (dispatch: Dispatch) => {\r\n        const result = await dispatch(requestSeed());\r\n        dispatch(addNewBet(result.bet));\r\n        return result;\r\n    };\r\n}\r\n\r\nexport function placeBet(num: number, betValue: number, gameType: number) {\r\n    return async (\r\n        dispatch: Dispatch,\r\n        getState: GetState\r\n    ): Promise<{betNum: number; num: number; won: boolean; userProfit: number; bet: FinalBet}> => {\r\n        const gameState = getState().games.gameState;\r\n        const web3State = getState().web3;\r\n        const {account, web3} = web3State;\r\n\r\n        // use previous seeds as new hashes seeds (hash chain)\r\n        const serverHash = gameState.serverHash;\r\n        const userHash = gameState.userHash;\r\n\r\n        const roundId = gameState.roundId + 1;\r\n        const gameId = gameState.gameId;\r\n        const balance = gameState.balance;\r\n        const stake = gameState.stake;\r\n\r\n        if (!getState().account.jwt) {\r\n            throw new Error(\"You need to login before playing!\");\r\n        }\r\n\r\n        if (!web3 || !account) {\r\n            throw new Error(\"You need a web3 enabled browser (Metamask)!\");\r\n        }\r\n\r\n        if (!validChainId(web3State.chainId)) {\r\n            throw new Error(`Invalid network! You need to use ${NETWORK_NAME}!`);\r\n        }\r\n\r\n        if (!canPlaceBet(gameState)) {\r\n            throw new Error(`Invalid game status: ${gameState.status}! Can not place bet!`);\r\n        }\r\n\r\n        if (!serverHash || !userHash || gameId === undefined) {\r\n            throw new Error(\"Invalid game state!\");\r\n        }\r\n\r\n        if (betValue > stake + balance) {\r\n            throw new Error(\"Invalid bet value: Funds to low!\");\r\n        }\r\n\r\n        const bet = {\r\n            roundId,\r\n            gameType,\r\n            num,\r\n            value: betValue,\r\n            balance,\r\n            serverHash,\r\n            userHash,\r\n            gameId,\r\n        };\r\n\r\n        const typedData = createTypedData(bet, CHAIN_ID, CONTRACT_ADDRESS, SIGNATURE_VERSION);\r\n        const userSig = await signTypedData(web3, account, typedData);\r\n\r\n        const {data: dataPlaceBet} = await axios.post(\"stateChannel/placeBet\", {\r\n            bet,\r\n            contractAddress: CONTRACT_ADDRESS,\r\n            userSig,\r\n        });\r\n        const serverSig = dataPlaceBet.serverSig;\r\n\r\n        if (!verifySignature(bet, CHAIN_ID, CONTRACT_ADDRESS, serverSig, SERVER_ADDRESS, SIGNATURE_VERSION)) {\r\n            throw new Error(\"Error placing bet: Invalid server signature!\");\r\n        }\r\n\r\n        dispatch(placeBetEvent(bet, serverSig, userSig));\r\n\r\n        return dispatch(requestSeed());\r\n    };\r\n}\r\n","import Web3 from \"web3\";\r\n\r\nexport function getLastGameId(\r\n    web3: Web3,\r\n    contract: any,\r\n    serverEndHash: string,\r\n    transactionHash: string\r\n): Promise<number> {\r\n    if (contract == null) {\r\n        return Promise.reject(\"Error invalid web3 state!\");\r\n    }\r\n\r\n    return web3.eth\r\n        .getBlockNumber()\r\n        .then((blockNum) => {\r\n            return contract.getPastEvents(\"LogGameCreated\", {\r\n                filter: {serverEndHash},\r\n                fromBlock: Math.max(blockNum - 30 * 24 * 4 * 60, 0),\r\n                toBlock: \"latest\",\r\n            });\r\n        })\r\n        .then((events) => {\r\n            const len = events.length;\r\n            if (len === 0 || events[len - 1].transactionHash !== transactionHash) {\r\n                return Promise.reject(new Error(\"Could not find event!\"));\r\n            }\r\n\r\n            return events[len - 1].returnValues.gameId;\r\n        });\r\n}\r\n\r\nexport async function getLogGameCreated(web3: Web3, contract: any, serverEndHash: string) {\r\n    const blockNum = await web3.eth.getBlockNumber();\r\n    const events = await contract.getPastEvents(\"LogGameCreated\", {\r\n        filter: {serverEndHash},\r\n        fromBlock: Math.max(blockNum - 30 * 24 * 4 * 60, 0),\r\n        toBlock: \"latest\",\r\n    });\r\n\r\n    if (events.length !== 1) {\r\n        return undefined;\r\n    }\r\n\r\n    return events[0];\r\n}\r\n\r\nexport function getReasonEnded(web3: Web3, contract: any, gameId: number) {\r\n    return web3.eth\r\n        .getBlockNumber()\r\n        .then((blockNum) => {\r\n            return contract.getPastEvents(\"LogGameEnded\", {\r\n                filter: {gameId},\r\n                fromBlock: Math.max(blockNum - 30 * 24 * 4 * 60, 0),\r\n                toBlock: \"latest\",\r\n            });\r\n        })\r\n        .then((events) => {\r\n            const len = events.length;\r\n            if (len !== 1) {\r\n                return Promise.reject(new Error(\"Could not find event!\"));\r\n            }\r\n\r\n            return events[0].returnValues.reasonEnded;\r\n        });\r\n}\r\n","import ClassNames from \"classnames\";\r\nimport * as React from \"react\";\r\n\r\nimport Style from \"./Section.scss\";\r\n\r\ntype Props = {\r\n    children: React.ReactNode;\r\n    className?: string;\r\n    gray?: boolean;\r\n};\r\n\r\nconst Section = ({gray = false, className = \"\", ...rest}: Props) => {\r\n    const allClassNames = ClassNames(className, {\r\n        [Style.gray]: gray,\r\n    });\r\n\r\n    return <section {...rest} className={allClassNames} />;\r\n};\r\n\r\nexport default Section;\r\n","import * as React from \"react\";\r\nimport {Container as BootstrapContainer} from \"reactstrap\";\r\n\r\ntype Props = {\r\n    children: React.ReactNode;\r\n};\r\n\r\nconst Container = ({...rest}: Props) => <BootstrapContainer {...rest} />;\r\n\r\nexport default Container;\r\n","import {MIN_BET_VALUE, NETWORK_NAME} from \"../../config/config\";\r\nimport {State as GameState} from \"../../platform/modules/games/state/reducer\";\r\n\r\nfunction returnError(errorMessage: string) {\r\n    return {canPlaceBet: false, errorMessage};\r\n}\r\n\r\nexport function canPlaceBet(\r\n    gameType: number,\r\n    num: number,\r\n    betValue: number,\r\n    loggedIn: boolean,\r\n    web3Available: boolean,\r\n    gameState: GameState\r\n) {\r\n    if (!loggedIn) {\r\n        return returnError(\"You need to login before playing!\");\r\n    }\r\n\r\n    if (!web3Available) {\r\n        return returnError(\r\n            \"You need to have a web3 enabled browser (e.g. install Metamask, use Trust Wallet or Coinbase Wallet)\" +\r\n                `for playing and select network: ${NETWORK_NAME}!`\r\n        );\r\n    }\r\n\r\n    if (gameState.status === \"ENDED\") {\r\n        return returnError(\"You need to create a game session before playing!\");\r\n    }\r\n\r\n    if (gameState.status === \"PLACED_BET\") {\r\n        return returnError(\r\n            \"Your seed isn't revealed! Should normally work without your interaction.\" +\r\n                ' To manually reveal it You can click \"request seed\"!'\r\n        );\r\n    }\r\n\r\n    if (gameState.status !== \"ACTIVE\") {\r\n        return returnError(\"Can not place bet! You game session must be active to create bets!\");\r\n    }\r\n\r\n    if (gameState.stake + gameState.balance < MIN_BET_VALUE) {\r\n        return returnError(\"You funds are to low! You need to end the game session and start a new one!\");\r\n    }\r\n\r\n    return {canPlaceBet: true, errorMessage: \"\"};\r\n}\r\n","import * as React from \"react\";\r\nimport {Row as BootstrapRow} from \"reactstrap\";\r\n\r\nimport {BaseType} from \"./BaseType\";\r\n\r\nexport interface Props extends BaseType {\r\n    children: React.ReactNode;\r\n    noGutters?: boolean;\r\n}\r\n\r\nconst Row = ({...rest}: Props) => <BootstrapRow {...rest} />;\r\n\r\nexport default Row;\r\n","import * as React from \"react\";\r\nimport {Col as BootstrapCol} from \"reactstrap\";\r\nimport {ColumnProps} from \"reactstrap/types/lib/Col\";\r\n\r\nimport {BaseType} from \"./BaseType\";\r\n\r\nexport interface Props extends BaseType {\r\n    children: React.ReactNode;\r\n    order?: string | number;\r\n    xs?: ColumnProps;\r\n    sm?: ColumnProps;\r\n    md?: ColumnProps;\r\n    lg?: ColumnProps;\r\n    xl?: ColumnProps;\r\n}\r\n\r\nconst Col = ({...rest}: Props) => <BootstrapCol {...rest} />;\r\n\r\nexport default Col;\r\n","import * as React from \"react\";\r\nimport {FormGroup as BootstrapFormGroup} from \"reactstrap\";\r\n\r\nimport {BaseType} from \"./BaseType\";\r\n\r\nexport interface Props extends BaseType {\r\n    children: React.ReactNode;\r\n    className?: string;\r\n    row?: boolean;\r\n}\r\n\r\nconst FormGroup = ({children, className, ...rest}: Props) => (\r\n    <BootstrapFormGroup className={className} {...rest}>\r\n        {children}\r\n    </BootstrapFormGroup>\r\n);\r\n\r\nexport default FormGroup;\r\n","import * as React from \"react\";\r\nimport {Label as BootstrapLabel} from \"reactstrap\";\r\n\r\nimport {ColumnProps} from \"reactstrap/types/lib/Col\";\r\nimport {BaseType} from \"./BaseType\";\r\n\r\nexport interface Props extends BaseType {\r\n    for?: string;\r\n    children: React.ReactNode;\r\n    xs?: ColumnProps;\r\n    sm?: ColumnProps;\r\n    md?: ColumnProps;\r\n    lg?: ColumnProps;\r\n    xl?: ColumnProps;\r\n}\r\n\r\nconst Label = ({for: htmlFor, ...rest}: Props) => <BootstrapLabel for={htmlFor} {...rest} />;\r\n\r\nexport default Label;\r\n","import * as React from \"react\";\r\nimport {Button as BootstrapButton} from \"reactstrap\";\r\n\r\nimport {BaseType} from \"./BaseType\";\r\n\r\nimport \"./Button.scss\";\r\n\r\nexport interface Props extends BaseType {\r\n    children: React.ReactNode;\r\n    size?: \"lg\" | \"sm\";\r\n    color?: string;\r\n    outline?: boolean;\r\n    active?: boolean;\r\n    disabled?: boolean;\r\n    onClick?: React.MouseEventHandler<any>;\r\n    block?: boolean;\r\n    variant?: string;\r\n    type?: \"button\" | \"reset\" | \"submit\";\r\n    tag?: React.ElementType;\r\n    to?: string;\r\n}\r\n\r\nconst Button = ({\r\n    block,\r\n    children,\r\n    size,\r\n    color = \"secondary\",\r\n    outline = false,\r\n    active,\r\n    disabled = false,\r\n    onClick,\r\n    variant,\r\n    ...rest\r\n}: Props) => (\r\n    <BootstrapButton\r\n        className={variant === \"dropdown\" ? \"dropdown-item\" : \"\"}\r\n        block={block}\r\n        size={size}\r\n        color={color}\r\n        outline={outline}\r\n        active={active}\r\n        disabled={disabled}\r\n        onClick={onClick}\r\n        {...rest}\r\n    >\r\n        {children}\r\n    </BootstrapButton>\r\n);\r\n\r\nexport default Button;\r\n","export function round(x: number, n: number): number {\r\n    return Math.round(x * Math.pow(10, n)) / Math.pow(10, n);\r\n}\r\n\r\nexport function filterFloat(value: string): number {\r\n    if (/^([-+])?([0-9]+(\\.[0-9]+)?|Infinity)$/.test(value)) {\r\n        return Number(value);\r\n    }\r\n\r\n    return NaN;\r\n}\r\n\r\n/**\r\n * @param min min value inclusive\r\n * @param max max value exclusive\r\n */\r\nexport function getRandomInt(min: number, max: number) {\r\n    min = Math.floor(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min)) + min;\r\n}\r\n\r\nexport function shuffle<T>(array: T[]) {\r\n    let counter = array.length;\r\n\r\n    // While there are elements left\r\n    while (counter > 0) {\r\n        // Pick a random index\r\n        const index = Math.floor(Math.random() * counter);\r\n\r\n        // Decrease counter by 1\r\n        counter--;\r\n\r\n        // And swap the last element with it\r\n        const temp = array[counter];\r\n        array[counter] = array[index];\r\n        array[index] = temp;\r\n    }\r\n}\r\n\r\n// see  https://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetParallel\r\nexport function popCnt(num: number) {\r\n    // tslint:disable:no-bitwise\r\n    num = num - ((num >> 1) & 0x55555555); // reuse input as temporary\r\n    num = (num & 0x33333333) + ((num >> 2) & 0x33333333); // temp\r\n    return (((num + (num >> 4)) & 0xf0f0f0f) * 0x1010101) >> 24; // count\r\n    // tslint:enable:no-bitwise\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"input-group\":\"eCrZ-__input-group\",\"input\":\"eCrZ-__input\",\"input__suffix\":\"eCrZ-__input__suffix\"};","import ClassNames from \"classnames\";\r\nimport * as React from \"react\";\r\n\r\nimport Style from \"./Input.scss\";\r\nimport {BaseType} from \"./BaseType\";\r\n\r\nexport interface Props extends BaseType {\r\n    value: string;\r\n    suffix?: React.ReactNode;\r\n    disabled?: boolean;\r\n    readOnly?: boolean;\r\n    placeholder?: string;\r\n    showValidation?: boolean;\r\n    isValid?: boolean;\r\n\r\n    validate?(value: string): {valid: boolean; message?: string};\r\n    onValue?(value: string): void;\r\n}\r\n\r\nexport type State = {\r\n    inputValue: string;\r\n    isValid?: boolean;\r\n};\r\n\r\nexport default class Input extends React.Component<Props, State> {\r\n    static defaultProps = {\r\n        disabled: false,\r\n        showValidation: false,\r\n    };\r\n\r\n    isFocus: boolean;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        if (props.isValid !== undefined && props.validate !== undefined) {\r\n            console.error(\"isValid and validate cant't be used at the same time!\");\r\n        }\r\n\r\n        this.isFocus = false;\r\n\r\n        this.state = {\r\n            inputValue: this.props.value,\r\n        };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps: Props) {\r\n        const {value} = this.props;\r\n        if (!this.isFocus && value !== nextProps.value) {\r\n            this.setState({inputValue: nextProps.value});\r\n        }\r\n    }\r\n\r\n    onBlur = () => {\r\n        const {value} = this.props;\r\n\r\n        this.isFocus = false;\r\n        this.setState({inputValue: value});\r\n    };\r\n\r\n    onFocus = () => {\r\n        this.isFocus = true;\r\n    };\r\n\r\n    onChange = (event: React.FormEvent<HTMLInputElement>) => {\r\n        const val = (event.target as HTMLInputElement).value;\r\n        const {onValue, validate} = this.props;\r\n\r\n        const valid = validate !== undefined ? validate(val).valid : undefined;\r\n        this.setState({inputValue: val, isValid: valid});\r\n        if (onValue && valid !== false) {\r\n            onValue(val);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {inputValue, isValid: isValidState} = this.state;\r\n        const {suffix, disabled, readOnly, placeholder, showValidation, isValid: isValidProp} = this.props;\r\n\r\n        let isValid;\r\n        if (isValidProp !== undefined) {\r\n            isValid = isValidProp;\r\n        } else if (isValidState !== undefined) {\r\n            isValid = isValidState;\r\n        }\r\n\r\n        const className = ClassNames(\r\n            \"form-control\",\r\n            Style.input__input,\r\n            {\"is-valid\": isValid === true && showValidation},\r\n            {\"is-invalid\": isValid === false && showValidation}\r\n        );\r\n\r\n        const classNameSuffix = ClassNames(\"form-control\", Style.input__suffix);\r\n\r\n        return (\r\n            <div className=\"input\">\r\n                <input\r\n                    placeholder={placeholder}\r\n                    className={className}\r\n                    disabled={disabled}\r\n                    readOnly={readOnly}\r\n                    value={inputValue}\r\n                    onBlur={this.onBlur}\r\n                    onChange={this.onChange}\r\n                    onFocus={this.onFocus}\r\n                />\r\n                {suffix && (\r\n                    <div className={classNameSuffix}>\r\n                        <span style={{color: \"transparent\"}}>{inputValue}</span>\r\n                        {suffix}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport {filterFloat} from \"../util/math\";\r\nimport {BaseType} from \"./BaseType\";\r\nimport Input from \"./Input\";\r\n\r\nexport interface Props extends BaseType {\r\n    number: number;\r\n    min: number;\r\n    max: number;\r\n    step?: number;\r\n    precision?: number;\r\n    suffix?: React.ReactNode;\r\n\r\n    onNumber(n: number): void;\r\n}\r\n\r\nexport default class NumericInput extends React.Component<Props> {\r\n    static defaultProps = {\r\n        min: Number.MIN_VALUE,\r\n        max: Number.MAX_VALUE,\r\n    };\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n    }\r\n\r\n    validate = (value: string) => {\r\n        const {min, max} = this.props;\r\n\r\n        const num = filterFloat(value);\r\n        if (Number.isNaN(num)) {\r\n            return {valid: false, message: \"Not a number!\"};\r\n        } else if (num < min) {\r\n            return {valid: false, message: \"To low!\"};\r\n        } else if (num > max) {\r\n            return {valid: false, message: \"To high!\"};\r\n        } else {\r\n            return {valid: true};\r\n        }\r\n    };\r\n\r\n    onValue = (value: string) => {\r\n        const {step, onNumber} = this.props;\r\n\r\n        let num = filterFloat(value);\r\n        if (step !== undefined) {\r\n            num = Math.round(num / step) * step;\r\n        }\r\n\r\n        onNumber(num);\r\n    };\r\n\r\n    render() {\r\n        const {number, precision, suffix} = this.props; // tslint:disable-line variable-name\r\n        const value = precision !== undefined ? number.toFixed(precision) : number.toString();\r\n\r\n        return <Input suffix={suffix} value={value} validate={this.validate} onValue={this.onValue} />;\r\n    }\r\n}\r\n","import * as React from \"react\";\r\nimport {InputGroup} from \"reactstrap\";\r\nimport {BaseType} from \"./BaseType\";\r\nimport Button from \"./Button\";\r\nimport NumericInput from \"./NumericInput\";\r\n\r\nexport interface Props extends BaseType {\r\n    value: number;\r\n    min: number;\r\n    max: number;\r\n    step?: number;\r\n    onChange(value: number): void;\r\n}\r\n\r\nconst ETHER_DIV = 1e9;\r\n\r\nexport default class ValueInput extends React.PureComponent<Props> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n    }\r\n\r\n    onValueChange = (value: number) => {\r\n        const {onChange, min, max, step} = this.props;\r\n        let newVal = Math.round(value * ETHER_DIV);\r\n        if (newVal < min) {\r\n            newVal = min;\r\n        } else if (newVal > max) {\r\n            newVal = max;\r\n        }\r\n\r\n        if (step !== undefined) {\r\n            newVal = Math.round(newVal / step) * step;\r\n        }\r\n\r\n        onChange(newVal);\r\n    };\r\n\r\n    onValueDouble = (value: number) => {\r\n        const {max, onChange, step} = this.props;\r\n\r\n        let newVal = value * 2;\r\n\r\n        if (step !== undefined) {\r\n            newVal = Math.round(newVal / step) * step;\r\n        }\r\n        if (newVal > max) {\r\n            newVal = max;\r\n        }\r\n        onChange(newVal);\r\n    };\r\n\r\n    onValueHalf = (value: number) => {\r\n        const {min, onChange, step} = this.props;\r\n\r\n        let newVal = value / 2;\r\n        if (step !== undefined) {\r\n            newVal = Math.round(newVal / step) * step;\r\n        }\r\n        if (newVal < min) {\r\n            newVal = min;\r\n        }\r\n        onChange(newVal);\r\n    };\r\n\r\n    render() {\r\n        const {value, min, max} = this.props;\r\n        return (\r\n            <InputGroup>\r\n                <NumericInput\r\n                    className={\"form-control\"}\r\n                    step={min / ETHER_DIV}\r\n                    min={min / ETHER_DIV}\r\n                    max={max / ETHER_DIV}\r\n                    number={value / ETHER_DIV}\r\n                    onNumber={this.onValueChange}\r\n                />\r\n                <Button color=\"primary\" onClick={() => this.onValueHalf(value)}>\r\n                    1/2\r\n                </Button>\r\n                <Button color=\"primary\" onClick={() => this.onValueDouble(value)}>\r\n                    2X\r\n                </Button>\r\n            </InputGroup>\r\n        );\r\n    }\r\n}\r\n","import * as React from \"react\";\r\nimport {Input} from \"reactstrap\";\r\n\r\nimport {BaseType} from \"./BaseType\";\r\n\r\ninterface Props extends BaseType {\r\n    children: React.ReactNode;\r\n    value: string;\r\n    disabled?: boolean;\r\n    onValue(value: string): void;\r\n}\r\n\r\nclass Select extends React.Component<Props> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n    }\r\n\r\n    private handleChange = (event: React.FormEvent<HTMLInputElement>) => {\r\n        const {onValue} = this.props;\r\n        const target = event.target as HTMLInputElement;\r\n        const val = target.value;\r\n        target.blur();\r\n        onValue(val);\r\n    };\r\n\r\n    public render() {\r\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n        const {value, onValue, ...rest} = this.props;\r\n\r\n        return <Input value={value} type=\"select\" onChange={this.handleChange} {...rest} />;\r\n    }\r\n}\r\n\r\nexport default Select;\r\n","import * as React from \"react\";\r\nimport {Modal as BootstrapModal, ModalBody} from \"reactstrap\";\r\n\r\nimport {BaseType} from \"./BaseType\";\r\n\r\nimport Style from \"./Modal.scss\";\r\n\r\nexport interface Props extends BaseType {\r\n    isOpen: boolean;\r\n    children: React.ReactNode;\r\n    fade?: boolean;\r\n\r\n    toggle?(): void;\r\n}\r\n\r\nconst Modal = ({isOpen, toggle, children, ...rest}: Props) => (\r\n    <BootstrapModal isOpen={isOpen} toggle={toggle} {...rest}>\r\n        <ModalBody>\r\n            <button type=\"button\" className={\"btn-close \" + Style.close} aria-label=\"Close\" onClick={toggle} />\r\n            <div className={Style.modalWrapper}>{children}</div>\r\n        </ModalBody>\r\n    </BootstrapModal>\r\n);\r\n\r\nexport default Modal;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"-fz0F__modal\",\"modal-dialog\":\"-fz0F__modal-dialog\",\"fade\":\"-fz0F__fade\",\"show\":\"-fz0F__show\",\"modal-static\":\"-fz0F__modal-static\",\"modal-dialog-scrollable\":\"-fz0F__modal-dialog-scrollable\",\"modal-content\":\"-fz0F__modal-content\",\"modal-body\":\"-fz0F__modal-body\",\"modal-dialog-centered\":\"-fz0F__modal-dialog-centered\",\"modal-backdrop\":\"-fz0F__modal-backdrop\",\"modal-header\":\"-fz0F__modal-header\",\"btn-close\":\"-fz0F__btn-close\",\"modal-title\":\"-fz0F__modal-title\",\"modal-footer\":\"-fz0F__modal-footer\",\"modal-sm\":\"-fz0F__modal-sm\",\"modal-lg\":\"-fz0F__modal-lg\",\"modal-xl\":\"-fz0F__modal-xl\",\"modal-fullscreen\":\"-fz0F__modal-fullscreen\",\"modal-fullscreen-sm-down\":\"-fz0F__modal-fullscreen-sm-down\",\"modal-fullscreen-md-down\":\"-fz0F__modal-fullscreen-md-down\",\"modal-fullscreen-lg-down\":\"-fz0F__modal-fullscreen-lg-down\",\"modal-fullscreen-xl-down\":\"-fz0F__modal-fullscreen-xl-down\",\"modal-fullscreen-xxl-down\":\"-fz0F__modal-fullscreen-xxl-down\",\"modalWrapper\":\"-fz0F__modalWrapper\",\"close\":\"-fz0F__close\"};","import ClassNames from \"classnames\";\r\nimport * as React from \"react\";\r\n\r\nimport Style from \"./Ether.scss\";\r\n\r\nexport function formatEth(gwei: number, precision = 9) {\r\n    return (gwei / 1e9).toFixed(precision);\r\n}\r\n\r\nexport type Props = {\r\n    gwei: number;\r\n    showCurrencySymbol?: boolean;\r\n    colored?: boolean;\r\n    precision?: number;\r\n};\r\n\r\nconst Ether = ({gwei, precision = 9, showCurrencySymbol = false, colored = false}: Props) => {\r\n    const ether = formatEth(gwei, precision);\r\n    const classNames = ClassNames(\r\n        Style.ether,\r\n        {[Style.ether_positiv]: colored && gwei > 0},\r\n        {[Style.ether_negativ]: colored && gwei < 0}\r\n    );\r\n\r\n    return <span className={classNames}></span>;\r\n};\r\n\r\nexport default Ether;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"ether\":\"_7Ob2N__ether\",\"ether_positiv\":\"_7Ob2N__ether_positiv\",\"ether_negativ\":\"_7Ob2N__ether_negativ\",\"icon\":\"_7Ob2N__icon\"};","import * as React from \"react\";\r\n\r\nimport {MAX_GAME_SESSION_VALUE, MIN_GAME_SESSION_VALUE} from \"../../../config/config\";\r\nimport {Ether} from \"../../../reusable\";\r\n\r\nimport Style from \"./HowToPlayBase.scss\";\r\n\r\nexport type Props = {\r\n    children: React.ReactNode;\r\n};\r\n\r\nconst HowToPlayBase = ({children}: Props) => (\r\n    <div className={Style.howToPlay}>\r\n        <h3 className=\"text-center\">How to play?</h3>\r\n        <h5>Start game session</h5>\r\n        <p>\r\n            Press <em>Start Game Session</em> and deposit your desired amount of Ether (between{\" \"}\r\n            <Ether gwei={MIN_GAME_SESSION_VALUE} precision={2} /> and{\" \"}\r\n            <Ether gwei={MAX_GAME_SESSION_VALUE} precision={2} /> ETH).\r\n        </p>\r\n        {children}\r\n        <h5>End game session</h5>\r\n        <p>\r\n            Click <em>End Game Session</em> to receive your profit.\r\n        </p>\r\n    </div>\r\n);\r\n\r\nexport default HowToPlayBase;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"howToPlay\":\"su9GN__howToPlay\"};","import * as React from \"react\";\r\nimport {Ether} from \"../../../../reusable/index\";\r\n\r\nimport {MAX_BET_VALUE, MIN_BET_VALUE} from \"../../../../config/config\";\r\nimport HowToPlayBase from \"../../reusable/HowToPlayBase\";\r\n\r\nconst HowToPlay = () => (\r\n    <HowToPlayBase>\r\n        <h5>Plinko</h5>\r\n        <h6>Step1</h6>\r\n        <p>\r\n            Choose your bet amount (between <Ether gwei={MIN_BET_VALUE} precision={5} /> and{\" \"}\r\n            <Ether gwei={MAX_BET_VALUE} precision={5} /> ETH).\r\n        </p>\r\n        <h6>Step2</h6>\r\n        <p>Select the number of rows and the risk.</p>\r\n        <h6>Step 3</h6>\r\n        <p>Drop the ball!</p>\r\n    </HowToPlayBase>\r\n);\r\n\r\nexport default HowToPlay;\r\n","import * as React from \"react\";\r\n\r\ntype Props = {\r\n    contextRef(context: CanvasRenderingContext2D | null): void;\r\n    width: number;\r\n    height: number;\r\n};\r\n\r\nexport default class PureCanvas extends React.Component<Props> {\r\n    shouldComponentUpdate(nextProps: Props) {\r\n        return nextProps.height !== this.props.height || nextProps.width !== this.props.height;\r\n    }\r\n\r\n    render() {\r\n        const {width, height} = this.props;\r\n\r\n        return (\r\n            <canvas\r\n                style={{width: \"100%\"}}\r\n                width={width}\r\n                height={height}\r\n                ref={(node) => (node ? this.props.contextRef(node.getContext(\"2d\")) : null)}\r\n            />\r\n        );\r\n    }\r\n}\r\n","import Vector2 from \"./Vector2\";\r\n\r\nexport abstract class Drawable {\r\n    position: Vector2;\r\n\r\n    protected constructor(position: Vector2) {\r\n        this.position = position;\r\n    }\r\n\r\n    public abstract draw(ctx: CanvasRenderingContext2D): void;\r\n}\r\n","export default class Vector2 {\r\n    public x: number;\r\n    public y: number;\r\n\r\n    public constructor(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    public multiply(t: number): Vector2 {\r\n        return new Vector2(this.x * t, this.y * t);\r\n    }\r\n\r\n    public add(v: Vector2): Vector2 {\r\n        return new Vector2(this.x + v.x, this.y + v.y);\r\n    }\r\n\r\n    public subtract(v: Vector2): Vector2 {\r\n        return new Vector2(this.x - v.x, this.y - v.y);\r\n    }\r\n\r\n    public sqrMagnitude(): number {\r\n        return this.x * this.x + this.y * this.y;\r\n    }\r\n\r\n    public magnitude(): number {\r\n        return Math.sqrt(this.sqrMagnitude());\r\n    }\r\n\r\n    public negate(): Vector2 {\r\n        return new Vector2(-this.x, -this.y);\r\n    }\r\n\r\n    public dot(v: Vector2): number {\r\n        return this.x * v.x + this.y * v.y;\r\n    }\r\n\r\n    public normalize(): Vector2 {\r\n        const magnitude = this.magnitude();\r\n        return new Vector2(this.x / magnitude, this.y / magnitude);\r\n    }\r\n}\r\n","import {Drawable} from \"./Drawable\";\r\nimport Vector2 from \"./Vector2\";\r\n\r\nclass Ball extends Drawable {\r\n    private readonly color: string;\r\n\r\n    public radius: number;\r\n    public v = new Vector2(0, 0.1);\r\n    public oldPos = new Vector2(0, 0);\r\n\r\n    constructor(position: Vector2, radius: number, color: string) {\r\n        super(position);\r\n        this.radius = radius;\r\n        this.color = color;\r\n    }\r\n\r\n    public draw(ctx: CanvasRenderingContext2D): void {\r\n        ctx.beginPath();\r\n        ctx.arc(this.position.x, this.position.y, this.radius, 0, Math.PI * 2);\r\n        ctx.fillStyle = this.color;\r\n        ctx.fill();\r\n    }\r\n}\r\n\r\nexport default Ball;\r\n","// prettier-ignore\r\nexport const startPositions: {[key: number]: {[key: number]: number[]}} = {\r\n    8: {\r\n        0: [\r\n            0.0806,\r\n            0.0861,\r\n            0.0254,\r\n            0.0189,\r\n            0.0736,\r\n            0.1606,\r\n            0.1071,\r\n            0.0884,\r\n            0.0341,\r\n            0.0962,\r\n            0.0806,\r\n            0.0793,\r\n            0.0618,\r\n            0.1046,\r\n            0.0021,\r\n            0.1178,\r\n        ],\r\n        1: [\r\n            0.031,\r\n            0.0381,\r\n            0.162,\r\n            0.0808,\r\n            0.0008,\r\n            0.1434,\r\n            0.0384,\r\n            0.091,\r\n            0.0382,\r\n            0.1079,\r\n            0.1648,\r\n            0.0248,\r\n            0.0139,\r\n            0.0906,\r\n            0.0014,\r\n            0.0169,\r\n        ],\r\n        2: [\r\n            0.0963,\r\n            0.0724,\r\n            0.1784,\r\n            0.0503,\r\n            0.1177,\r\n            0.176,\r\n            0.101,\r\n            0.1528,\r\n            0.1722,\r\n            0.0176,\r\n            0.1429,\r\n            0.0323,\r\n            0.1528,\r\n            0.0067,\r\n            0.0422,\r\n            0.0908,\r\n        ],\r\n        3: [\r\n            0.1147,\r\n            0.0153,\r\n            0.1152,\r\n            0.0363,\r\n            0.1556,\r\n            0.1546,\r\n            0.1899,\r\n            0.0334,\r\n            0.194,\r\n            0.0107,\r\n            0.0291,\r\n            0.1084,\r\n            0.1473,\r\n            0.0664,\r\n            0.0877,\r\n            0.0505,\r\n        ],\r\n        4: [\r\n            0.0552,\r\n            0.1542,\r\n            0.0025,\r\n            0.122,\r\n            0.0174,\r\n            0.0979,\r\n            0.022,\r\n            0.1776,\r\n            0.1531,\r\n            0.021,\r\n            0.0493,\r\n            0.055,\r\n            0.1752,\r\n            0.0119,\r\n            0.1609,\r\n            0.0671,\r\n        ],\r\n        5: [\r\n            0.1792,\r\n            0.0994,\r\n            0.1167,\r\n            0.1477,\r\n            0.1206,\r\n            0.004,\r\n            0.1935,\r\n            0.0383,\r\n            0.0043,\r\n            0.1977,\r\n            0.0826,\r\n            0.1125,\r\n            0.1547,\r\n            0.0462,\r\n            0.0231,\r\n            0.0492,\r\n        ],\r\n        6: [\r\n            0.0196,\r\n            0.1852,\r\n            0.174,\r\n            0.1719,\r\n            0.0243,\r\n            0.0259,\r\n            0.0215,\r\n            0.1716,\r\n            0.0578,\r\n            0.1926,\r\n            0.068,\r\n            0.1729,\r\n            0.1704,\r\n            0.042,\r\n            0.187,\r\n            0.0682,\r\n        ],\r\n        7: [\r\n            0.0111,\r\n            0.1235,\r\n            0.0223,\r\n            0.041,\r\n            0.1731,\r\n            0.1592,\r\n            0.0652,\r\n            0.1949,\r\n            0.0135,\r\n            0.044,\r\n            0.058,\r\n            0.059,\r\n            0.1809,\r\n            0.043,\r\n            0.052,\r\n            0.1875,\r\n        ],\r\n        8: [\r\n            0.0747,\r\n            0.0748,\r\n            0.1136,\r\n            0.0296,\r\n            0.0236,\r\n            0.0703,\r\n            0.0047,\r\n            0.1958,\r\n            0.1,\r\n            0.0691,\r\n            0.1425,\r\n            0.0282,\r\n            0.1914,\r\n            0.1414,\r\n            0.0236,\r\n            0.1793,\r\n        ],\r\n    },\r\n    12: {\r\n        0: [\r\n            0.057,\r\n            0.057,\r\n            0.0789,\r\n            0.0828,\r\n            0.057,\r\n            0.0327,\r\n            0.0738,\r\n            0.057,\r\n            0.0735,\r\n            0.0698,\r\n            0.1144,\r\n            0.0617,\r\n            0.0477,\r\n            0.0827,\r\n            0.057,\r\n            0.1302,\r\n        ],\r\n        1: [\r\n            0.0176,\r\n            0.0176,\r\n            0.0176,\r\n            0.0465,\r\n            0.1163,\r\n            0.1078,\r\n            0.1997,\r\n            0.0042,\r\n            0.0239,\r\n            0.017,\r\n            0.063,\r\n            0.1228,\r\n            0.1557,\r\n            0.0321,\r\n            0.0221,\r\n            0.0832,\r\n        ],\r\n        2: [\r\n            0.1442,\r\n            0.0381,\r\n            0.1473,\r\n            0.0619,\r\n            0.0588,\r\n            0.0644,\r\n            0.0393,\r\n            0.0311,\r\n            0.0575,\r\n            0.1442,\r\n            0.0142,\r\n            0.038,\r\n            0.047,\r\n            0.1055,\r\n            0.1465,\r\n            0.0636,\r\n        ],\r\n        3: [\r\n            0.0552,\r\n            0.0196,\r\n            0.0363,\r\n            0.1422,\r\n            0.1136,\r\n            0.0578,\r\n            0.0008,\r\n            0.0509,\r\n            0.1434,\r\n            0.0384,\r\n            0.1359,\r\n            0.0156,\r\n            0.0364,\r\n            0.0591,\r\n            0.0589,\r\n            0.1447,\r\n        ],\r\n        4: [\r\n            0.0025,\r\n            0.1167,\r\n            0.1206,\r\n            0.0664,\r\n            0.1382,\r\n            0.0047,\r\n            0.1404,\r\n            0.1059,\r\n            0.1051,\r\n            0.052,\r\n            0.1048,\r\n            0.005,\r\n            0.1059,\r\n            0.1406,\r\n            0.1318,\r\n            0.052,\r\n        ],\r\n        5: [\r\n            0.0865,\r\n            0.0747,\r\n            0.0153,\r\n            0.1177,\r\n            0.1477,\r\n            0.0806,\r\n            0.0154,\r\n            0.0493,\r\n            0.0323,\r\n            0.0334,\r\n            0.055,\r\n            0.0012,\r\n            0.0164,\r\n            0.091,\r\n            0.0154,\r\n            0.1421,\r\n        ],\r\n        6: [\r\n            0.031,\r\n            0.1235,\r\n            0.0243,\r\n            0.0383,\r\n            0.0259,\r\n            0.0155,\r\n            0.1084,\r\n            0.0682,\r\n            0.0492,\r\n            0.0135,\r\n            0.1233,\r\n            0.1232,\r\n            0.0659,\r\n            0.043,\r\n            0.0507,\r\n            0.1217,\r\n        ],\r\n        7: [\r\n            0.0724,\r\n            0.1379,\r\n            0.1152,\r\n            0.0748,\r\n            0.1401,\r\n            0.0223,\r\n            0.0808,\r\n            0.0826,\r\n            0.1609,\r\n            0.0671,\r\n            0.0039,\r\n            0.1268,\r\n            0.0092,\r\n            0.0405,\r\n            0.0236,\r\n            0.1445,\r\n        ],\r\n        8: [\r\n            0.1307,\r\n            0.021,\r\n            0.041,\r\n            0.1125,\r\n            0.0462,\r\n            0.0863,\r\n            0.0652,\r\n            0.0374,\r\n            0.1606,\r\n            0.0046,\r\n            0.1461,\r\n            0.1307,\r\n            0.0125,\r\n            0.0275,\r\n            0.1178,\r\n            0.1041,\r\n        ],\r\n        9: [\r\n            0.0503,\r\n            0.1719,\r\n            0.101,\r\n            0.022,\r\n            0.1294,\r\n            0.0043,\r\n            0.0861,\r\n            0.0107,\r\n            0.0505,\r\n            0.0106,\r\n            0.0742,\r\n            0.1994,\r\n            0.0076,\r\n            0.0513,\r\n            0.1363,\r\n            0.1392,\r\n        ],\r\n        10: [\r\n            0.1542,\r\n            0.1977,\r\n            0.1291,\r\n            0.0291,\r\n            0.0231,\r\n            0.1419,\r\n            0.0034,\r\n            0.0703,\r\n            0.0427,\r\n            0.1993,\r\n            0.0231,\r\n            0.0014,\r\n            0.1306,\r\n            0.0305,\r\n            0.0322,\r\n            0.1199,\r\n        ],\r\n        11: [\r\n            0.1343,\r\n            0.1429,\r\n            0.0215,\r\n            0.1343,\r\n            0.1427,\r\n            0.1189,\r\n            0.1771,\r\n            0.0265,\r\n            0.1771,\r\n            0.077,\r\n            0.1295,\r\n            0.0265,\r\n            0.1016,\r\n            0.0787,\r\n            0.0397,\r\n            0.197,\r\n        ],\r\n        12: [\r\n            0.0079,\r\n            0.0711,\r\n            0.1853,\r\n            0.1175,\r\n            0.108,\r\n            0.1192,\r\n            0.1018,\r\n            0.0792,\r\n            0.168,\r\n            0.108,\r\n            0.1247,\r\n            0.168,\r\n            0.0444,\r\n            0.1309,\r\n            0.1192,\r\n            0.0792,\r\n        ],\r\n    },\r\n    16: {\r\n        0: [0.0447, 0.1576, 0.0447, 0.1053, 0.1053, 0.1053, 0.1576, 0.1576, 0.0447],\r\n        1: [\r\n            0.0503,\r\n            0.1712,\r\n            0.0477,\r\n            0.1712,\r\n            0.0489,\r\n            0.0489,\r\n            0.0846,\r\n            0.0207,\r\n            0.0846,\r\n            0.0225,\r\n            0.1066,\r\n            0.0489,\r\n            0.1712,\r\n            0.0477,\r\n            0.1066,\r\n            0.0463,\r\n        ],\r\n        2: [\r\n            0.0529,\r\n            0.0529,\r\n            0.0291,\r\n            0.0614,\r\n            0.1574,\r\n            0.0238,\r\n            0.1703,\r\n            0.1641,\r\n            0.0797,\r\n            0.1054,\r\n            0.0053,\r\n            0.0529,\r\n            0.1574,\r\n            0.0439,\r\n            0.1054,\r\n            0.079,\r\n        ],\r\n        3: [\r\n            0.0865,\r\n            0.041,\r\n            0.0505,\r\n            0.1658,\r\n            0.1102,\r\n            0.0293,\r\n            0.1581,\r\n            0.0322,\r\n            0.1151,\r\n            0.0042,\r\n            0.0467,\r\n            0.0208,\r\n            0.0564,\r\n            0.0526,\r\n            0.0526,\r\n            0.0802,\r\n        ],\r\n        4: [\r\n            0.0223,\r\n            0.0383,\r\n            0.0259,\r\n            0.1606,\r\n            0.0572,\r\n            0.0118,\r\n            0.1135,\r\n            0.0758,\r\n            0.038,\r\n            0.0205,\r\n            0.0217,\r\n            0.016,\r\n            0.1687,\r\n            0.0221,\r\n            0.0035,\r\n            0.0259,\r\n        ],\r\n        5: [\r\n            0.1147,\r\n            0.0025,\r\n            0.1152,\r\n            0.0174,\r\n            0.022,\r\n            0.1731,\r\n            0.0119,\r\n            0.0092,\r\n            0.0492,\r\n            0.1622,\r\n            0.0427,\r\n            0.0588,\r\n            0.0132,\r\n            0.0644,\r\n            0.0906,\r\n            0.0659,\r\n        ],\r\n        6: [\r\n            0.1556,\r\n            0.1294,\r\n            0.0243,\r\n            0.004,\r\n            0.1136,\r\n            0.0215,\r\n            0.055,\r\n            0.1729,\r\n            0.1609,\r\n            0.1084,\r\n            0.0682,\r\n            0.0039,\r\n            0.0405,\r\n            0.0034,\r\n            0.1729,\r\n            0.0623,\r\n        ],\r\n        7: [\r\n            0.0994,\r\n            0.031,\r\n            0.0381,\r\n            0.0868,\r\n            0.0154,\r\n            0.162,\r\n            0.0528,\r\n            0.021,\r\n            0.0826,\r\n            0.0012,\r\n            0.0236,\r\n            0.0135,\r\n            0.0154,\r\n            0.0534,\r\n            0.1603,\r\n            0.0374,\r\n        ],\r\n        8: [\r\n            0.0552,\r\n            0.0806,\r\n            0.0861,\r\n            0.0808,\r\n            0.0155,\r\n            0.0462,\r\n            0.0671,\r\n            0.091,\r\n            0.1259,\r\n            0.1578,\r\n            0.0047,\r\n            0.0465,\r\n            0.1071,\r\n            0.1048,\r\n            0.0301,\r\n            0.0567,\r\n        ],\r\n        9: [\r\n            0.0123,\r\n            0.1167,\r\n            0.0493,\r\n            0.0254,\r\n            0.0296,\r\n            0.068,\r\n            0.057,\r\n            0.1125,\r\n            0.1704,\r\n            0.0565,\r\n            0.0067,\r\n            0.0164,\r\n            0.0384,\r\n            0.0997,\r\n            0.0382,\r\n            0.0549,\r\n        ],\r\n        10: [\r\n            0.0153,\r\n            0.176,\r\n            0.0176,\r\n            0.1716,\r\n            0.0578,\r\n            0.0895,\r\n            0.0106,\r\n            0.1677,\r\n            0.0176,\r\n            0.1707,\r\n            0.1079,\r\n            0.0933,\r\n            0.0176,\r\n            0.1059,\r\n            0.0076,\r\n            0.0925,\r\n        ],\r\n        11: [\r\n            0.1592,\r\n            0.0863,\r\n            0.0908,\r\n            0.1597,\r\n            0.0079,\r\n            0.0911,\r\n            0.0364,\r\n            0.0905,\r\n            0.059,\r\n            0.0311,\r\n            0.1171,\r\n            0.0691,\r\n            0.1597,\r\n            0.1663,\r\n            0.1663,\r\n            0.1023,\r\n        ],\r\n        12: [\r\n            0.0323,\r\n            0.0334,\r\n            0.0231,\r\n            0.0261,\r\n            0.0231,\r\n            0.0014,\r\n            0.0931,\r\n            0.0931,\r\n            0.0684,\r\n            0.077,\r\n            0.1112,\r\n            0.0379,\r\n            0.0646,\r\n            0.0919,\r\n            0.0359,\r\n            0.0323,\r\n        ],\r\n        13: [\r\n            0.0363,\r\n            0.0008,\r\n            0.0509,\r\n            0.0234,\r\n            0.0893,\r\n            0.1654,\r\n            0.0762,\r\n            0.0008,\r\n            0.1041,\r\n            0.1645,\r\n            0.0604,\r\n            0.1039,\r\n            0.0509,\r\n            0.0516,\r\n            0.1646,\r\n            0.0105,\r\n        ],\r\n        14: [\r\n            0.1719,\r\n            0.0107,\r\n            0.0652,\r\n            0.0431,\r\n            0.0021,\r\n            0.053,\r\n            0.0113,\r\n            0.0233,\r\n            0.0445,\r\n            0.1122,\r\n            0.0113,\r\n            0.1122,\r\n            0.0445,\r\n            0.0817,\r\n            0.0652,\r\n            0.1121,\r\n        ],\r\n        15: [\r\n            0.1722,\r\n            0.0043,\r\n            0.0664,\r\n            0.1722,\r\n            0.1722,\r\n            0.0513,\r\n            0.0393,\r\n            0.0761,\r\n            0.1175,\r\n            0.0897,\r\n            0.1733,\r\n            0.0319,\r\n            0.0043,\r\n            0.0513,\r\n            0.0513,\r\n            0.0672,\r\n        ],\r\n        16: [\r\n            0.1628,\r\n            0.0306,\r\n            0.0306,\r\n            0.0306,\r\n            0.1158,\r\n            0.0306,\r\n            0.0245,\r\n            0.0245,\r\n            0.0245,\r\n            0.1628,\r\n            0.0306,\r\n            0.0306,\r\n            0.1628,\r\n            0.1628,\r\n            0.0306,\r\n        ],\r\n    },\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"payoutTable\":\"xTFXS__payoutTable\",\"resultEntry\":\"xTFXS__resultEntry\",\"multiplier\":\"xTFXS__multiplier\",\"colorStrip\":\"xTFXS__colorStrip\",\"resultEntry_show\":\"xTFXS__resultEntry_show\",\"resultAnimation\":\"xTFXS__resultAnimation\",\"colorStrip_show\":\"xTFXS__colorStrip_show\",\"colorStrip-16-0\":\"xTFXS__colorStrip-16-0\",\"colorStrip-16-1\":\"xTFXS__colorStrip-16-1\",\"colorStrip-16-2\":\"xTFXS__colorStrip-16-2\",\"colorStrip-16-3\":\"xTFXS__colorStrip-16-3\",\"colorStrip-16-4\":\"xTFXS__colorStrip-16-4\",\"colorStrip-16-5\":\"xTFXS__colorStrip-16-5\",\"colorStrip-16-6\":\"xTFXS__colorStrip-16-6\",\"colorStrip-16-7\":\"xTFXS__colorStrip-16-7\",\"colorStrip-16-8\":\"xTFXS__colorStrip-16-8\",\"colorStrip-12-0\":\"xTFXS__colorStrip-12-0\",\"colorStrip-12-1\":\"xTFXS__colorStrip-12-1\",\"colorStrip-12-2\":\"xTFXS__colorStrip-12-2\",\"colorStrip-12-3\":\"xTFXS__colorStrip-12-3\",\"colorStrip-12-4\":\"xTFXS__colorStrip-12-4\",\"colorStrip-12-5\":\"xTFXS__colorStrip-12-5\",\"colorStrip-12-6\":\"xTFXS__colorStrip-12-6\",\"colorStrip-8-0\":\"xTFXS__colorStrip-8-0\",\"colorStrip-8-1\":\"xTFXS__colorStrip-8-1\",\"colorStrip-8-2\":\"xTFXS__colorStrip-8-2\",\"colorStrip-8-3\":\"xTFXS__colorStrip-8-3\",\"colorStrip-8-4\":\"xTFXS__colorStrip-8-4\"};","import {PLINKO_PAYOUT_DIVIDER} from \"@dicether/state-channel\";\r\nimport ClassNames from \"classnames\";\r\nimport * as React from \"react\";\r\n\r\nimport Style from \"./PayoutTable.scss\";\r\n\r\nexport type Props = {\r\n    payout: number[];\r\n    showResult: boolean;\r\n    resultColumn: number;\r\n};\r\n\r\ntype PayoutInfoProps = {\r\n    showResult: boolean;\r\n    colorClass: string;\r\n    multiplier: number;\r\n};\r\n\r\nconst PayoutInfo = ({showResult, colorClass, multiplier}: PayoutInfoProps) => {\r\n    const classNamesColorStrip = ClassNames(Style.colorStrip, colorClass, {[Style.colorStrip_show]: showResult});\r\n\r\n    const classNamesEntry = ClassNames(Style.resultEntry, {[Style.resultEntry_show]: showResult});\r\n\r\n    return (\r\n        <div className={classNamesEntry}>\r\n            <div className={classNamesColorStrip} />\r\n            <span className={Style.multiplier}>{`${multiplier}x`}</span>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst PayoutTable = ({payout, showResult, resultColumn}: Props) => {\r\n    const len = payout.length;\r\n    const totalPayout = [...payout.slice(1).reverse(), ...payout];\r\n    const color = [...Array(len).keys()].map((x) => Style[`colorStrip-${(len - 1) * 2}-${x}`]);\r\n    const totalColor = [...color.slice(1).reverse(), ...color];\r\n\r\n    return (\r\n        <div className={Style.payoutTable}>\r\n            {totalPayout.map((value, index) => (\r\n                <PayoutInfo\r\n                    key={`${len}-${index}`}\r\n                    showResult={showResult && resultColumn === index}\r\n                    multiplier={value / PLINKO_PAYOUT_DIVIDER}\r\n                    colorClass={totalColor[index]}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PayoutTable;\r\n","import {Drawable} from \"./Drawable\";\r\nimport Vector2 from \"./Vector2\";\r\n\r\nclass Pin extends Drawable {\r\n    public readonly radius: number;\r\n    private readonly color: string;\r\n\r\n    constructor(position: Vector2, radius: number, color: string) {\r\n        super(position);\r\n        this.radius = radius;\r\n        this.color = color;\r\n    }\r\n\r\n    public draw(ctx: CanvasRenderingContext2D): void {\r\n        ctx.beginPath();\r\n        ctx.arc(this.position.x, this.position.y, this.radius, 0, Math.PI * 2);\r\n        ctx.fillStyle = this.color;\r\n        ctx.fill();\r\n    }\r\n}\r\n\r\nexport default Pin;\r\n","import {Drawable} from \"./Drawable\";\r\nimport Pin from \"./Pin\";\r\nimport Vector2 from \"./Vector2\";\r\n\r\nclass Pins extends Drawable {\r\n    private readonly rows: number;\r\n    private readonly pinRadius = 0.02;\r\n    private readonly pins: Pin[] = [];\r\n\r\n    constructor(rows: number, color: string) {\r\n        super(new Vector2(0, 0));\r\n        this.rows = rows;\r\n\r\n        // Create pins\r\n        const distance = (2 - 2 * this.pinRadius) / (this.rows + 1);\r\n        const rowDistance = Math.sqrt(1.25 * distance * distance);\r\n        const topOffset = 2 - rowDistance * (rows - 1) - this.pinRadius;\r\n        for (let i = 2; i < this.rows + 2; i++) {\r\n            const startPosX = (-distance * i) / 2;\r\n            const posY = (i - 2) * rowDistance - 1 + topOffset;\r\n\r\n            for (let j = 0; j < i + 1; j++) {\r\n                const posX = startPosX + j * distance;\r\n                this.pins.push(new Pin(new Vector2(posX, posY), this.pinRadius, color));\r\n            }\r\n        }\r\n    }\r\n\r\n    public getCollisionPin(\r\n        start: Vector2,\r\n        end: Vector2,\r\n        radius: number\r\n    ): {collisionPoint: Vector2; normal: Vector2} | undefined {\r\n        // TODO: simple not optimized implementation;\r\n        const maxDistanceSqr = (this.pinRadius + radius) * (this.pinRadius + radius);\r\n        const direction = end.subtract(start);\r\n        const magnitudeSqr = direction.sqrMagnitude();\r\n\r\n        for (const pin of this.pins) {\r\n            // calculate nearest point\r\n            const t = Math.max(0, direction.dot(pin.position.subtract(start)) / magnitudeSqr);\r\n            const nearestPoint = start.add(direction.multiply(Math.min(1, t)));\r\n            const projection = start.add(direction.multiply(t));\r\n\r\n            const distanceSqr = nearestPoint.subtract(pin.position).sqrMagnitude();\r\n            // calculate distance on nearest point\r\n            const distanceNearestPointSqr = projection.subtract(pin.position).sqrMagnitude();\r\n\r\n            if (distanceSqr > maxDistanceSqr) {\r\n                continue;\r\n            }\r\n\r\n            // calculate collision point\r\n            const distFromNearestToCollisionPoint = Math.sqrt(maxDistanceSqr - distanceNearestPointSqr);\r\n            const collisionPointDist = start.subtract(projection).magnitude() - distFromNearestToCollisionPoint;\r\n            const collisionPoint = start.add(direction.normalize().multiply(collisionPointDist));\r\n\r\n            // calculate collision normal\r\n            const normal = collisionPoint.subtract(pin.position).normalize();\r\n\r\n            // const rrr = collisionPoint.subtract(pin.position).magnitude();\r\n            // const www = start.subtract(pin.position).magnitude();\r\n            // const vvv = start.subtract(pin.position).magnitude();\r\n            // //if (Math.abs(rrr - radius - this.pinRadius) < 0.000000000001) {\r\n            //     console.error(\"Error collision calc!\", Math.abs(rrr - radius - this.pinRadius), Math.abs(www - radius - this.pinRadius), Math.abs(vvv - radius - this.pinRadius));\r\n            // //}\r\n\r\n            return {collisionPoint, normal};\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    public draw(ctx: CanvasRenderingContext2D): void {\r\n        for (const pin of this.pins) {\r\n            pin.draw(ctx);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Pins;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"pinColor\":\"#1A2B38\",\"ballColor\":\"#6f42c1\"};","// extracted by mini-css-extract-plugin\nexport default {\"pinColor\":\"#f7f7fa\",\"ballColor\":\"#693db9\"};","import Rand from \"rand-seed\";\r\nimport * as React from \"react\";\r\nimport ReactResizeDetector from \"react-resize-detector\";\r\n\r\nimport {PLINKO_PAYOUT} from \"@dicether/state-channel\";\r\nimport PureCanvas from \"../../reusable/PureCanvas\";\r\nimport Ball from \"./Ball\";\r\nimport {startPositions} from \"./lookupTables\";\r\nimport PayoutTable from \"./PayoutTable\";\r\nimport Pins from \"./Pins\";\r\nimport Vector2 from \"./Vector2\";\r\n\r\nimport Style from \"./Plinko.scss\";\r\nimport DayColors from \"./PlinkoDayColors.scss\";\r\nimport NightColors from \"./PlinkoNightColors.scss\";\r\n\r\ntype Props = {\r\n    rows: number;\r\n    risk: number;\r\n    nightMode: boolean;\r\n    showResult: boolean;\r\n    resultColumn: number;\r\n};\r\n\r\ntype State = {\r\n    size: number;\r\n};\r\n\r\nclass Plinko extends React.Component<Props, State> {\r\n    private ctx: CanvasRenderingContext2D | null = null;\r\n    private parent = React.createRef<HTMLDivElement>();\r\n    private pins: Pins;\r\n    private activeBalls: Array<{ball: Ball; targetPos: number; finishedCallBack: () => void}> = [];\r\n    private animationActive = false;\r\n    private ballAcceleration = new Vector2(0, 9.81);\r\n    private currentTime = 0;\r\n    private accumulator = 0;\r\n    private ballRadius: number;\r\n    private k = 0.5;\r\n    private stepsPerSecond = 120;\r\n    private speed = 0.75;\r\n\r\n    public constructor(props: Props) {\r\n        super(props);\r\n        const {rows, nightMode} = this.props;\r\n\r\n        this.pins = new Pins(rows, nightMode ? NightColors.pinColor : DayColors.pinColor);\r\n        this.ballRadius = (0.02 * 16) / rows;\r\n\r\n        this.state = {\r\n            size: 500,\r\n        };\r\n    }\r\n\r\n    public componentDidMount() {\r\n        this.renderToCanvas();\r\n    }\r\n\r\n    public componentDidUpdate() {\r\n        const {rows, nightMode} = this.props;\r\n\r\n        this.pins = new Pins(rows, nightMode ? NightColors.pinColor : DayColors.pinColor);\r\n        this.ballRadius = (0.02 * 16) / rows;\r\n        this.renderToCanvas();\r\n    }\r\n\r\n    public addBall = (targetPos: number, resultNum: number): Promise<void> => {\r\n        const startPos = startPositions[this.props.rows][targetPos][resultNum % 16];\r\n        const promise = new Promise<void>((resolve) => {\r\n            this.activeBalls.push({\r\n                ball: new Ball(new Vector2(startPos, -1.1), this.ballRadius, DayColors.ballColor),\r\n                targetPos,\r\n                finishedCallBack: resolve,\r\n            });\r\n        });\r\n        if (!this.animationActive) {\r\n            this.animationActive = true;\r\n            this.accumulator = 0;\r\n            this.currentTime = Date.now();\r\n            requestAnimationFrame(this.animation);\r\n        }\r\n\r\n        return promise;\r\n    };\r\n\r\n    private renderToCanvas = () => {\r\n        const ctx = this.ctx;\r\n\r\n        if (ctx === null) {\r\n            return;\r\n        }\r\n\r\n        const width = ctx.canvas.width;\r\n        const height = ctx.canvas.height;\r\n\r\n        ctx.clearRect(0, 0, width, height);\r\n        ctx.save();\r\n        ctx.scale(width / 2, height / 2);\r\n        ctx.translate(1.0, 1.0);\r\n        this.pins.draw(ctx);\r\n        this.activeBalls.forEach((x) => x.ball.draw(ctx));\r\n        ctx.restore();\r\n    };\r\n\r\n    public simulate = () => {\r\n        const from = -0.1;\r\n        const to = 0.1;\r\n\r\n        const steps = 5000;\r\n        const range = to - from;\r\n\r\n        const results: number[][] = [...Array(this.props.rows + 1)].map((_) => []);\r\n\r\n        const rand = new Rand(\"123456789\");\r\n        for (let i = 0; i < steps; i++) {\r\n            const pos = Math.round(from + Math.round(rand.next() * range * 10000)) / 10000;\r\n            const yPos = this.simulateBall(pos);\r\n\r\n            if (yPos <= -1 || yPos >= 1) {\r\n                continue;\r\n            }\r\n\r\n            const resultPos = Math.floor(((yPos + 1) / 2) * (this.props.rows + 1));\r\n\r\n            const resArray = results[resultPos];\r\n            if (resArray.length >= 16) {\r\n                continue;\r\n            }\r\n\r\n            resArray.push(pos);\r\n        }\r\n\r\n        let resString = \"\";\r\n        for (let pos = 0; pos < results.length; pos++) {\r\n            resString += `${pos}: [${results[pos].join(\", \")}],\\n`;\r\n        }\r\n    };\r\n\r\n    public simulateBall = (startPos: number) => {\r\n        const ball = new Ball(new Vector2(startPos, -1.1), this.ballRadius, \"white\");\r\n\r\n        const maxSteps = 100000;\r\n        let steps = 0;\r\n        while (ball.position.y < 1 && steps++ < maxSteps) {\r\n            this.animateBall(ball, 1 / this.stepsPerSecond);\r\n        }\r\n\r\n        if (steps >= maxSteps) {\r\n            return -1; // invalid\r\n        }\r\n\r\n        return ball.position.x;\r\n    };\r\n\r\n    private animateBall = (ball: Ball, dt: number) => {\r\n        const initialPos = ball.position;\r\n        const initialV = ball.v;\r\n        const newV = initialV.add(this.ballAcceleration.multiply(dt));\r\n        const newPos = initialPos.add(newV.multiply(dt));\r\n        const collisionInfo = this.pins.getCollisionPin(initialPos, newPos, ball.radius);\r\n        if (collisionInfo === undefined) {\r\n            ball.position = newPos;\r\n            ball.v = newV;\r\n            return;\r\n        }\r\n\r\n        const {collisionPoint, normal} = collisionInfo;\r\n\r\n        const aM = this.ballAcceleration.magnitude();\r\n        const vM = initialV.magnitude();\r\n        const sM = collisionPoint.subtract(initialPos).magnitude();\r\n        const collisionTime = (-vM + Math.sqrt(initialV.sqrMagnitude() + 4 * aM * sM)) / (2 * aM);\r\n        const tLeft = dt - collisionTime;\r\n\r\n        const vCollision = ball.v.add(this.ballAcceleration.multiply(collisionTime));\r\n\r\n        // check collision\r\n        // const colP = initialPos.add(vCollision.multiply(collisionTime));\r\n        // const diff = colP.subtract(collisionPoint).magnitude();\r\n        // if (diff > 0.00001) {\r\n        //     console.warn(\"To high diff\", diff);\r\n        // }\r\n\r\n        // calculate new v\r\n        const tmp = normal.multiply(vCollision.dot(normal) * 2);\r\n        const reflectedV = vCollision.subtract(tmp);\r\n        const finalV = reflectedV.multiply(this.k);\r\n\r\n        ball.v = finalV.add(this.ballAcceleration.multiply(tLeft));\r\n        ball.position = collisionPoint.add(ball.v.multiply(tLeft));\r\n    };\r\n\r\n    private animation = () => {\r\n        const newTime = Date.now();\r\n        const frameTime = newTime - this.currentTime;\r\n        this.currentTime = newTime;\r\n        this.accumulator += frameTime * this.speed;\r\n        const dt = 1000 / this.stepsPerSecond;\r\n\r\n        while (this.accumulator >= dt) {\r\n            for (const {ball} of this.activeBalls) {\r\n                this.animateBall(ball, 1 / this.stepsPerSecond);\r\n            }\r\n            this.accumulator -= dt;\r\n        }\r\n\r\n        const finishedBalls = this.activeBalls.filter((ballData) => ballData.ball.position.y >= 1);\r\n        this.activeBalls = this.activeBalls.filter((ballData) => ballData.ball.position.y < 1);\r\n        this.renderToCanvas();\r\n\r\n        if (this.activeBalls.length > 0) {\r\n            requestAnimationFrame(this.animation);\r\n        }\r\n\r\n        for (const ballData of finishedBalls) {\r\n            ballData.finishedCallBack();\r\n        }\r\n\r\n        if (this.activeBalls.length === 0) {\r\n            this.animationActive = false;\r\n        }\r\n    };\r\n\r\n    private saveContext = (ctx: CanvasRenderingContext2D) => {\r\n        this.ctx = ctx;\r\n    };\r\n\r\n    private onResize = (width?: number) => {\r\n        if (width === undefined) return;\r\n\r\n        this.setState({\r\n            size: width,\r\n        });\r\n        this.renderToCanvas();\r\n    };\r\n\r\n    public render() {\r\n        const {size} = this.state;\r\n        const {rows, resultColumn, risk, showResult} = this.props;\r\n        const payout = PLINKO_PAYOUT[risk][rows];\r\n\r\n        // TODO: Split in plinko and grid !!!\r\n        return (\r\n            <div className={Style.wrapper}>\r\n                <div className={Style.plinkoGrid}>\r\n                    <div ref={this.parent} className={Style.plinko}>\r\n                        <ReactResizeDetector handleWidth handleHeight onResize={this.onResize} />\r\n                        <PureCanvas width={size} height={size} contextRef={this.saveContext} />\r\n                        <PayoutTable payout={payout} showResult={showResult} resultColumn={resultColumn} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Plinko;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"font\":\"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen-Sans, Ubuntu, Cantarell, Helvetica Neue, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol\",\"wrapper\":\"G77Df__wrapper\",\"plinkoGrid\":\"G77Df__plinkoGrid\",\"plinko\":\"G77Df__plinko\"};","// extracted by mini-css-extract-plugin\nexport default {\"menu\":\"X3oTi__menu\"};","import * as React from \"react\";\r\nimport {WithTranslation, withTranslation} from \"react-i18next\";\r\n\r\nimport {MIN_BET_VALUE} from \"../../../../config/config\";\r\nimport {Button, Col, FormGroup, Label, Modal, Row, Select, ValueInput} from \"../../../../reusable\";\r\nimport {popCnt} from \"../../../../util/math\";\r\nimport HowToPlay from \"./HowToPlay\";\r\nimport Plinko from \"./Plinko\";\r\n\r\nimport Style from \"./Ui.scss\";\r\nimport {Input} from \"reactstrap\";\r\n\r\nexport interface Props extends WithTranslation {\r\n    disableRiskRowUpdate: boolean;\r\n    ref: any;\r\n    rows: number;\r\n    risk: number;\r\n    value: number;\r\n    maxBetValue: number;\r\n    result: {betNum: number; num: number; won: boolean; userProfit: number};\r\n    showResult: boolean;\r\n    showHelp: boolean;\r\n    nightMode: boolean;\r\n    withdrawValue: string;\r\n    onRiskChange(risk: number): void;\r\n    onRowsChange(rows: number): void;\r\n    onToggleHelp(): void;\r\n    onValueChange(value: number): void;\r\n    onPlaceBet(): void;\r\n    onWithdraw(): void;\r\n}\r\n\r\nexport type State = {\r\n    angle: number;\r\n};\r\n\r\nclass Ui extends React.PureComponent<Props, State> {\r\n    public plinko = React.createRef<Plinko>();\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            angle: 0,\r\n        };\r\n    }\r\n\r\n    /* tslint:disable:no-unused-variable */\r\n    private onSimulate = () => {\r\n        this.plinko.current?.simulate();\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            disableRiskRowUpdate,\r\n            value,\r\n            rows,\r\n            risk,\r\n            maxBetValue,\r\n            result,\r\n            showResult,\r\n            showHelp,\r\n            nightMode,\r\n            withdrawValue,\r\n            onToggleHelp,\r\n            onValueChange,\r\n            onRiskChange,\r\n            onRowsChange,\r\n            onPlaceBet,\r\n            onWithdraw,\r\n            t,\r\n        } = this.props;\r\n\r\n        const resultCol = popCnt(result.num); // TODO: Move up to plinko?\r\n\r\n        return (\r\n            <div>\r\n                <Row noGutters>\r\n                    <Col className={Style.plinko} lg={{size: 7, order: 2}} xl={{size: 8, order: 2}}>\r\n                        <Plinko\r\n                            ref={this.plinko}\r\n                            rows={rows}\r\n                            risk={risk}\r\n                            nightMode={nightMode}\r\n                            showResult={showResult}\r\n                            resultColumn={resultCol}\r\n                        />\r\n                    </Col>\r\n                    <Col lg={5} xl={4}>\r\n                        <div className={Style.menu}>\r\n                            <FormGroup className=\"games__form-group\">\r\n                                <Label>{t(\"betAmountEth\")}</Label>\r\n                                <ValueInput\r\n                                    value={value}\r\n                                    min={MIN_BET_VALUE}\r\n                                    step={MIN_BET_VALUE}\r\n                                    max={maxBetValue}\r\n                                    onChange={onValueChange}\r\n                                />\r\n                            </FormGroup>\r\n                            <Row noGutters>\r\n                                <Col xs={{size: 8}} sm={{size: 12}}>\r\n                                    <FormGroup>\r\n                                        <Label>{t(\"risk\")}</Label>\r\n                                        <Select\r\n                                            disabled={disableRiskRowUpdate}\r\n                                            value={risk.toString()}\r\n                                            onValue={(val) => onRiskChange(Number.parseInt(val, 10))}\r\n                                        >\r\n                                            <option value={1}>{t(\"lowRisk\")}</option>\r\n                                            <option value={2}>{t(\"mediumRisk\")}</option>\r\n                                            <option value={3}>{t(\"highRisk\")}</option>\r\n                                        </Select>\r\n                                    </FormGroup>\r\n                                </Col>\r\n                                <Col xs={{size: 4}} sm={{size: 12}}>\r\n                                    <FormGroup>\r\n                                        <Label>{t(\"rows\")}</Label>\r\n                                        <Select\r\n                                            disabled={disableRiskRowUpdate}\r\n                                            value={rows.toString()}\r\n                                            onValue={(val) => onRowsChange(Number.parseInt(val, 10))}\r\n                                        >\r\n                                            <option value={8}>8</option>\r\n                                            <option value={12}>12</option>\r\n                                            <option value={16}>16</option>\r\n                                        </Select>\r\n                                    </FormGroup>\r\n                                </Col>\r\n                            </Row>\r\n                            <Button className=\"betButton mb-3\" block color=\"success\" onClick={onPlaceBet}>\r\n                                {t(\"bet\")}\r\n                            </Button>\r\n                            <Input className=\"mb-3\" value={withdrawValue} disabled />\r\n                            <Button className=\"betButton\" block color=\"warning\" onClick={onWithdraw}>\r\n                                {t(\"Withdraw\")}\r\n                            </Button>\r\n                            {/* <Button className=\"betButton\" block color=\"warning\" onClick={this.onSimulate}>\r\n                               {t(\"simulate\")}\r\n                            </Button> */}\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n                <Modal isOpen={showHelp} toggle={onToggleHelp}>\r\n                    <HowToPlay />\r\n                </Modal>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTranslation(\"translation\", {withRef: true})(Ui);\r\n","import {GameType, maxBet} from \"@dicether/state-channel\";\r\nimport * as React from \"react\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport {TransactionReceipt} from \"web3-core\";\r\nimport {KELLY_FACTOR, MIN_BANKROLL, MIN_BET_VALUE} from \"../../../config/config\";\r\nimport {addNewBet} from \"../../../platform/modules/bets/asyncActions\";\r\nimport {Bet} from \"../../../platform/modules/bets/types\";\r\nimport {toggleHelp} from \"../../../platform/modules/games/info/actions\";\r\nimport {placeBet, validChainId} from \"../../../platform/modules/games/state/asyncActions\";\r\nimport {showErrorMessage} from \"../../../platform/modules/utilities/actions\";\r\nimport {catchError} from \"../../../platform/modules/utilities/asyncActions\";\r\nimport {State} from \"../../../rootReducer\";\r\nimport {popCnt} from \"../../../util/math\";\r\nimport {sleep} from \"../../../util/time\";\r\nimport sounds from \"../sound\";\r\nimport {canPlaceBet} from \"../utilities\";\r\nimport {changeNum, changeValue} from \"./actions\";\r\nimport Ui from \"./components/Ui\";\r\nimport {Helmet} from \"react-helmet\";\r\nimport {playFromBegin} from \"../../../util/audio\";\r\nimport {Dispatch, GetState} from \"../../../util/util\";\r\nimport {CONTRACT_ADDRESS, TOKEN_ADDRESS} from \"../../../config/config\";\r\nimport Web3 from \"web3\";\r\nimport Style from \"./pinko.scss\";\r\n\r\nconst plinkoAbi = require(\"assets/json/Plinko.json\");\r\nconst tokenAbi = require(\"assets/json/Token.json\");\r\n\r\nconst mapStateToProps = ({games, account, web3, app}: State) => {\r\n    const {info, gameState, plinko} = games;\r\n    const web3Available = web3.account && web3.contract && web3.web3 && validChainId(web3.chainId);\r\n    return {\r\n        web3Available: web3Available === true,\r\n        info,\r\n        gameState,\r\n        loggedIn: account.jwt !== null,\r\n        plinko,\r\n        nightMode: app.nightMode,\r\n        web3,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n    placeBet: (num: number, value: number, gameType: number) => dispatch(placeBet(num, value, gameType)),\r\n    addNewBet: (bet: Bet) => dispatch(addNewBet(bet)),\r\n    changeNum: (num: number) => dispatch(changeNum(num)),\r\n    changeValue: (value: number) => dispatch(changeValue(value)),\r\n    toggleHelp: (t: boolean) => dispatch(toggleHelp(t)),\r\n    showErrorMessage: (message: string) => dispatch(showErrorMessage(message)),\r\n    catchError: (error: unknown) => catchError(error, dispatch),\r\n});\r\n\r\nexport type Props = ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps>;\r\n\r\nexport type PlinkoState = {\r\n    showResult: boolean;\r\n    ballsFalling: number;\r\n    result: {betNum: number; num: number; won: boolean; userProfit: number};\r\n    reward: string;\r\n    loading: boolean;\r\n};\r\n\r\nclass Plinko extends React.PureComponent<Props, PlinkoState> {\r\n    private loadedSounds = false;\r\n    public ui = React.createRef<any>();\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.state = {\r\n            showResult: false,\r\n            ballsFalling: 0,\r\n            result: {betNum: 0, num: 0, won: false, userProfit: 0},\r\n            reward: \"0\",\r\n            loading: false,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        setInterval(() => {\r\n            this.calcReward().then((rewardAmount: any) => {\r\n                if (rewardAmount) {\r\n                    this.setState({\r\n                        reward: Web3.utils.fromWei(rewardAmount, \"ether\"),\r\n                    });\r\n                }\r\n            });\r\n        }, 1000); // Set up the interval\r\n    }\r\n\r\n    private calcReward = async () => {\r\n        const account = this.props.web3.account;\r\n        const web3 = this.props.web3.web3;\r\n        console.log(\"starting calcuation reward-------------\", this.props.web3);\r\n        if (!(web3 && account)) return;\r\n        const contract = new web3.eth.Contract(plinkoAbi, CONTRACT_ADDRESS);\r\n        console.log(\"stress contract\", contract);\r\n        const tx = contract.methods.playerWinnings(account).call({from: account});\r\n        return tx;\r\n    };\r\n\r\n    private playPlinko = async () => {\r\n        const account = this.props.web3.account;\r\n        const web3 = this.props.web3.web3;\r\n        if (!web3) return;\r\n        const contract = new web3.eth.Contract(plinkoAbi, CONTRACT_ADDRESS);\r\n        console.log(\"stress contract\", contract);\r\n        const pliko_play = contract.methods.pliko_play;\r\n        console.log(this.props.plinko.num - 200);\r\n        let tx = pliko_play(this.props.plinko.num - 200).send({\r\n            from: account,\r\n            value: this.props.plinko.value * 10 ** 9,\r\n            gas: 120000,\r\n        });\r\n        return tx;\r\n    };\r\n\r\n    private playTokenPlinko = async () => {\r\n        const account = this.props.web3.account;\r\n        const web3 = this.props.web3.web3;\r\n        if (!web3) return;\r\n        const tokenContract = new web3.eth.Contract(tokenAbi, TOKEN_ADDRESS);\r\n        const approve = tokenContract.methods.approve;\r\n        let amount = this.props.plinko.value.toString();\r\n        await approve(CONTRACT_ADDRESS, Web3.utils.toWei(amount, \"gwei\")).send({\r\n            from: account,\r\n        });\r\n\r\n        const contract = new web3.eth.Contract(plinkoAbi, CONTRACT_ADDRESS);\r\n        const pliko_token_play = contract.methods.pliko_token_play;\r\n        let tx = pliko_token_play(this.props.plinko.num - 200, Web3.utils.toWei(amount, \"gwei\")).send({\r\n            from: account,\r\n        });\r\n        return tx;\r\n    };\r\n\r\n    private onWithdraw = async () => {\r\n        const account = this.props.web3.account;\r\n        const web3 = this.props.web3.web3;\r\n        if (!web3) return;\r\n        const contract = new web3.eth.Contract(plinkoAbi, CONTRACT_ADDRESS);\r\n        const withdrawUserWinnings = contract.methods.withdrawUserWinnings;\r\n        await withdrawUserWinnings().send({\r\n            from: account,\r\n        });\r\n    };\r\n\r\n    private getResult = async () => {\r\n        const account = this.props.web3.account;\r\n        const web3 = this.props.web3.web3;\r\n        if (!web3) return;\r\n        const contract = new web3.eth.Contract(plinkoAbi, CONTRACT_ADDRESS);\r\n        console.log(\"--------contract--------------\", contract);\r\n        const get_result = contract.methods.getResult;\r\n        let tx = get_result().call({from: account, gas: 120000});\r\n        return tx;\r\n    };\r\n\r\n    private onToggleHelp = () => {\r\n        const {toggleHelp, info} = this.props;\r\n        toggleHelp(!info.showHelp);\r\n    };\r\n\r\n    private onPlaceBet = async () => {\r\n        this.setState({loading: true});\r\n        const {plinko, addNewBet, placeBet, catchError, showErrorMessage, web3Available, gameState, loggedIn} =\r\n            this.props;\r\n        console.log(\"number -------------------\", plinko.num);\r\n        const safeBetValue = Math.round(plinko.value);\r\n        const num = plinko.num;\r\n        const gameType = GameType.PLINKO;\r\n\r\n        const canBet = canPlaceBet(gameType, num, safeBetValue, loggedIn, web3Available, gameState);\r\n        if (!canBet) return;\r\n        // --------------------------- update here -----------------------------\r\n        console.log(\"start game\");\r\n        try {\r\n            await this.playTokenPlinko();\r\n            console.log(\"-------------------------------------finished------------------------\");\r\n            let numBitsSet = await this.getResult();\r\n            console.log(\"result-------\", numBitsSet);\r\n            let resultNum: number = 1500;\r\n            // const numBitsSet = popCnt(resultNum);\r\n            console.log(\"numBitsSet------\", numBitsSet);\r\n            this.setState({\r\n                ballsFalling: this.state.ballsFalling + 1,\r\n            });\r\n            await this.ui.current?.plinko.current?.addBall(numBitsSet, resultNum);\r\n            console.log(\"finshed--------------------------\");\r\n        } catch (error) {\r\n            catchError(error);\r\n            this.setState({loading: false});\r\n        }\r\n        this.setState({loading: false});\r\n    };\r\n\r\n    private onValueChange = (value: number) => {\r\n        const {changeValue} = this.props;\r\n        changeValue(value);\r\n    };\r\n\r\n    private onRiskChange = (risk: number) => {\r\n        // TODO: as action\r\n        const {plinko, changeNum} = this.props;\r\n        const {num} = plinko;\r\n        const newNum = risk * 100 + (num % 100);\r\n        changeNum(newNum);\r\n    };\r\n\r\n    private onRowsChange = (segments: number) => {\r\n        // TODO: as action\r\n        const {plinko, changeNum} = this.props;\r\n        const {num} = plinko;\r\n        const newNum = Math.floor(num / 100) * 100 + segments;\r\n        changeNum(newNum);\r\n    };\r\n\r\n    private playSound = (audio: HTMLAudioElement) => {\r\n        const {info} = this.props;\r\n        const {sound} = info;\r\n\r\n        if (sound) {\r\n            playFromBegin(audio);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {nightMode, info, gameState, plinko} = this.props;\r\n        const {num, value} = plinko;\r\n        const {ballsFalling, showResult, result, loading} = this.state;\r\n\r\n        let maxBetValue = maxBet(GameType.PLINKO, num, MIN_BANKROLL, KELLY_FACTOR);\r\n        maxBetValue = 1e18;\r\n\r\n        if (gameState.status !== \"ENDED\") {\r\n            const max = Math.min(gameState.stake + gameState.balance, maxBetValue);\r\n            maxBetValue = Math.max(max, MIN_BET_VALUE);\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <Helmet>\r\n                    <title>Plinko</title>\r\n                    <meta name=\"description\" content=\"Ethereum state channel based Plinko game\" />\r\n                </Helmet>\r\n                <Ui\r\n                    disableRiskRowUpdate={ballsFalling > 0}\r\n                    ref={this.ui}\r\n                    nightMode={nightMode}\r\n                    risk={Math.floor(num / 100)}\r\n                    rows={num % 100}\r\n                    value={value}\r\n                    withdrawValue={this.state.reward}\r\n                    maxBetValue={maxBetValue}\r\n                    onValueChange={this.onValueChange}\r\n                    onPlaceBet={this.onPlaceBet}\r\n                    onRiskChange={this.onRiskChange}\r\n                    onRowsChange={this.onRowsChange}\r\n                    showResult={showResult}\r\n                    result={{...result}}\r\n                    showHelp={info.showHelp}\r\n                    onToggleHelp={this.onToggleHelp}\r\n                    onWithdraw={this.onWithdraw}\r\n                />\r\n                {loading ? (\r\n                    <div\r\n                        className=\"position-fixed top-0 start-0 w-100 vh-100 d-flex flex-column align-items-center justify-content-center\"\r\n                        style={{backgroundColor: \"#111111\", zIndex: 10000, opacity: 0.5}}\r\n                    >\r\n                        <div className=\"lds-roller\">\r\n                            <div></div>\r\n                            <div></div>\r\n                            <div></div>\r\n                            <div></div>\r\n                            <div></div>\r\n                            <div></div>\r\n                            <div></div>\r\n                            <div></div>\r\n                        </div>\r\n                        <p className=\"text-white fs-5\">Loading...</p>\r\n                    </div>\r\n                ) : (\r\n                    <></>\r\n                )}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Plinko);\r\n","export function playFromBegin(audio: HTMLAudioElement) {\r\n    audio.currentTime = 0;\r\n    audio.play();\r\n}\r\n","import {ActionCreateType} from \"../../../util/util\";\r\nimport * as types from \"./constants\";\r\n\r\nconst ca = <T extends ActionCreateType<typeof types>>(a: T) => a;\r\n\r\nexport const changeValue = ca((value: number) => {\r\n    return {type: types.CHANGE_VALUE, value};\r\n});\r\n\r\nexport const changeNum = ca((num: number) => {\r\n    return {type: types.CHANGE_NUM, num};\r\n});\r\n","import * as React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {Route, RouteProps, Routes} from \"react-router-dom\";\r\n\r\nimport {bindActionCreators} from \"redux\";\r\nimport Stats from \"../../platform/components/bet/Stats\";\r\nimport {toggleExpertView, toggleHelp, toggleSound} from \"../../platform/modules/games/info/actions\";\r\nimport {\r\n    conflictEnd,\r\n    createGame,\r\n    endGame,\r\n    forceEnd,\r\n    manualRequestSeed,\r\n} from \"../../platform/modules/games/state/asyncActions\";\r\nimport {catchError} from \"../../platform/modules/utilities/asyncActions\";\r\nimport {Container, Section} from \"../../reusable\";\r\nimport {State} from \"../../rootReducer\";\r\nimport {Dispatch} from \"../../util/util\";\r\nimport Plinko from \"./plinko/Plinko\";\r\n\r\nimport Style from \"./Game.scss\";\r\n\r\nconst mapStateToProps = ({games, web3, account}: State) => {\r\n    const {gameState, info} = games;\r\n\r\n    return {\r\n        gameState,\r\n        info,\r\n        web3State: web3,\r\n        loggedIn: account.jwt !== null,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n    ...bindActionCreators(\r\n        {\r\n            toggleExpertView,\r\n            toggleHelp,\r\n            toggleSound,\r\n        },\r\n        dispatch\r\n    ),\r\n    createGame: (value: number, seed: string) => dispatch(createGame(value, seed)),\r\n    endGame: () => dispatch(endGame()),\r\n    manualRequestSeed: () => dispatch(manualRequestSeed()),\r\n    conflictEnd: () => dispatch(conflictEnd()),\r\n    forceEnd: () => dispatch(forceEnd()),\r\n    catchError: (error: Error) => catchError(error, dispatch),\r\n});\r\n\r\ntype Props = ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps> & RouteProps;\r\n\r\nclass Game extends React.Component<Props> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n    }\r\n\r\n    createGame = (value: number, seed: string) => {\r\n        const {createGame, catchError} = this.props;\r\n        createGame(value, seed).catch(catchError);\r\n    };\r\n\r\n    endGame = () => {\r\n        const {endGame, catchError} = this.props;\r\n        endGame().catch(catchError);\r\n    };\r\n\r\n    requestSeed = () => {\r\n        const {manualRequestSeed, catchError} = this.props;\r\n        manualRequestSeed().catch(catchError);\r\n    };\r\n\r\n    conflictEnd = () => {\r\n        const {conflictEnd, catchError} = this.props;\r\n        conflictEnd().catch(catchError);\r\n    };\r\n\r\n    forceEnd = () => {\r\n        const {forceEnd, catchError} = this.props;\r\n        forceEnd().catch(catchError);\r\n    };\r\n\r\n    onToggleHelp = (show: boolean) => {\r\n        const {toggleHelp} = this.props;\r\n        toggleHelp(show);\r\n    };\r\n\r\n    onToggleExpertView = (show: boolean) => {\r\n        const {toggleExpertView} = this.props;\r\n        toggleExpertView(show);\r\n    };\r\n\r\n    onToggleSound = (enabled: boolean) => {\r\n        const {toggleSound} = this.props;\r\n        toggleSound(enabled);\r\n    };\r\n\r\n    render() {\r\n        const {gameState, info, web3State, loggedIn} = this.props;\r\n        const {showHelp, showExpertView, sound} = info;\r\n\r\n        return (\r\n            <div>\r\n                <Section gray>\r\n                    <Container>\r\n                        <div className={Style.wrapper}>\r\n                            <div className={Style.gameWrapper}>\r\n                                <Plinko />\r\n                            </div>\r\n                        </div>\r\n                    </Container>\r\n                </Section>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Game);\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"OzPLQ__wrapper\",\"gameWrapper\":\"OzPLQ__gameWrapper\"};","// extracted by mini-css-extract-plugin\nexport default {\"info\":\"gMMkm__info\"};","import axios, {AxiosError} from \"axios\";\r\nimport * as React from \"react\";\r\n\r\nimport Icon from \"./FontAwesomeIcon\";\r\n\r\nimport Style from \"./DataLoader.scss\";\r\n\r\nconst Loading = () => (\r\n    <div className={Style.info}>\r\n        <Icon icon=\"spinner\" spin size=\"lg\" />\r\n    </div>\r\n);\r\n\r\nconst Failure = () => (\r\n    <div className={Style.info}>\r\n        <span className=\"text-danger\">Error loading Data</span>\r\n    </div>\r\n);\r\n\r\nconst NotFound = () => (\r\n    <div className={Style.info}>\r\n        <span className=\"text-danger\">404 Not Found</span>\r\n    </div>\r\n);\r\n\r\ntype Props<T> = {\r\n    url: string;\r\n    success(data: T): React.ReactNode;\r\n    loading?(): React.ReactNode;\r\n    notFound?(): React.ReactNode;\r\n    failure?(): React.ReactNode;\r\n};\r\n\r\ntype State<T> = {\r\n    data: T | undefined;\r\n    error: AxiosError | undefined;\r\n};\r\n\r\nclass DataLoader<T = any> extends React.Component<Props<T>, State<T>> {\r\n    static defaultProps = {\r\n        loading: () => <Loading />,\r\n        notFound: () => <NotFound />,\r\n        failure: () => <Failure />,\r\n    };\r\n\r\n    constructor(props: Props<T>) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            data: undefined,\r\n            error: undefined,\r\n        };\r\n    }\r\n\r\n    private fetchData(url: string) {\r\n        axios\r\n            .get<T>(url)\r\n            .then((response) => {\r\n                const data = response.data;\r\n                this.setState({data});\r\n            })\r\n            .catch((error) => {\r\n                this.setState({error});\r\n            });\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {url} = this.props;\r\n\r\n        this.fetchData(url);\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props<T>) {\r\n        const {url} = this.props;\r\n\r\n        if (url !== prevProps.url) {\r\n            this.fetchData(url);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {failure, notFound, loading, success} = this.props;\r\n        const {data, error} = this.state;\r\n\r\n        if (data) {\r\n            return success(data);\r\n        } else if (error) {\r\n            if (error.response && error.response.status === 404) {\r\n                return notFound ? notFound() : null;\r\n            } else {\r\n                return failure ? failure() : null;\r\n            }\r\n        } else {\r\n            return loading ? loading() : null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default DataLoader;\r\n","import {Placement} from \"popper.js\";\r\nimport * as React from \"react\";\r\nimport {Popover as BootstrapPopover, PopoverBody} from \"reactstrap\";\r\n\r\nimport {BaseType} from \"./BaseType\";\r\n\r\nimport \"./Popover.scss\";\r\n\r\nexport interface Props extends BaseType {\r\n    id?: string;\r\n    children: React.ReactNode;\r\n    isOpen: boolean;\r\n    placement?: Placement;\r\n    container?: any;\r\n    target: string | HTMLElement;\r\n\r\n    toggle(): void;\r\n}\r\n\r\nconst Popover = ({id, isOpen, toggle, children, container, placement = \"auto\", target, ...rest}: Props) => (\r\n    <BootstrapPopover\r\n        id={id}\r\n        isOpen={isOpen}\r\n        toggle={toggle}\r\n        container={container}\r\n        placement={placement}\r\n        style={{zIndex: 20000, maxWidth: \"100rem\"}}\r\n        {...rest}\r\n        target={target}\r\n    >\r\n        <PopoverBody>{children}</PopoverBody>\r\n    </BootstrapPopover>\r\n);\r\n\r\nexport default Popover;\r\n","import * as React from \"react\";\r\nimport ReactCopyToClipboard from \"react-copy-to-clipboard\";\r\n\r\nimport IconButton from \"./IconButton\";\r\nimport Popover from \"./Popover\";\r\n\r\ntype Props = {\r\n    content: string;\r\n    message?: string;\r\n};\r\n\r\ntype State = {\r\n    showMessage: boolean;\r\n};\r\n\r\nclass CopyToClipboard extends React.Component<Props, State> {\r\n    ref: React.RefObject<HTMLElement>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            showMessage: false,\r\n        };\r\n\r\n        this.ref = React.createRef();\r\n    }\r\n\r\n    toggle = () => {\r\n        this.setState({showMessage: false});\r\n    };\r\n\r\n    onCopy = () => {\r\n        this.setState({showMessage: true});\r\n        setTimeout(() => {\r\n            this.setState({showMessage: false});\r\n        }, 1000);\r\n    };\r\n\r\n    render() {\r\n        const {showMessage} = this.state;\r\n        const {content, message} = this.props;\r\n\r\n        return (\r\n            <span>\r\n                <ReactCopyToClipboard text={content} onCopy={this.onCopy}>\r\n                    <span ref={this.ref}>\r\n                        {\" \"}\r\n                        <IconButton\r\n                            icon=\"share\"\r\n                            onClick={() => {\r\n                                return;\r\n                            }}\r\n                        />{\" \"}\r\n                    </span>\r\n                </ReactCopyToClipboard>\r\n                {this.ref.current && (\r\n                    <Popover isOpen={showMessage} target={this.ref.current} toggle={this.toggle}>\r\n                        <span className=\"text-success\">{message ? message : \"Copied!\"}</span>\r\n                    </Popover>\r\n                )}\r\n            </span>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CopyToClipboard;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"overview\":\"p1-Fz__overview\",\"stats\":\"p1-Fz__stats\",\"statEntry\":\"p1-Fz__statEntry\",\"entryHeader\":\"p1-Fz__entryHeader\",\"userName\":\"p1-Fz__userName\"};","import dayjs from \"dayjs\";\r\nimport * as React from \"react\";\r\n\r\nimport {CopyToClipBoard, Ether} from \"../../../../reusable/index\";\r\nimport {User} from \"../../../modules/account/types\";\r\nimport {Bet} from \"../../../modules/bets/types\";\r\n\r\nimport Style from \"./Overview.scss\";\r\n\r\ntype Props = {\r\n    bet: Bet;\r\n    showUserModal(user: User): void;\r\n};\r\n\r\nconst Overview = ({bet, showUserModal}: Props) => (\r\n    <div className={Style.overview}>\r\n        <h3>\r\n            Bet:\r\n            {bet.id} <CopyToClipBoard message={\"Copied! Paste in Chat!\"} content={`Bet:${bet.id}`} />\r\n        </h3>\r\n        <span>{dayjs(bet.timestamp).format(\"lll\")}</span>\r\n        <span>\r\n            Placed by{\" \"}\r\n            <button className={Style.userName} onClick={() => showUserModal(bet.user)}>\r\n                {bet.user.username}\r\n            </button>\r\n        </span>\r\n        <div className={Style.stats}>\r\n            <div className={Style.statEntry}>\r\n                <span className={Style.entryHeader}>Wagered</span>\r\n                <Ether gwei={bet.value} />\r\n            </div>\r\n            <div className={Style.statEntry}>\r\n                <span className={Style.entryHeader}>Profit</span>\r\n                <Ether colored gwei={bet.profit} />\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default Overview;\r\n","import * as React from \"react\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport Plinko from \"../../../../pages/games/plinko/components/Plinko\";\r\nimport {State} from \"../../../../rootReducer\";\r\nimport {popCnt} from \"../../../../util/math\";\r\n\r\ntype OtherProps = {\r\n    betNum: number;\r\n    resultNum: number;\r\n};\r\n\r\nconst mapStateToProps = (state: State) => {\r\n    const {app} = state;\r\n\r\n    return {\r\n        nightMode: app.nightMode,\r\n    };\r\n};\r\n\r\ntype Props = ReturnType<typeof mapStateToProps> & OtherProps;\r\n\r\nconst PlinkoBetInfo = ({nightMode, betNum, resultNum}: Props) => {\r\n    const risk = Math.floor(betNum / 100);\r\n    const rows = betNum % 100;\r\n    const resultColumn = popCnt(resultNum);\r\n\r\n    return <Plinko nightMode={nightMode} rows={rows} risk={risk} showResult={true} resultColumn={resultColumn} />;\r\n};\r\n\r\nexport default connect(mapStateToProps)(PlinkoBetInfo);\r\n","import ClassNames from \"classnames\";\r\nimport * as React from \"react\";\r\nimport {BaseType} from \"./BaseType\";\r\n\r\nexport interface Props extends BaseType {\r\n    id: string;\r\n    value: string | number;\r\n    className?: string;\r\n}\r\n\r\nconst Output = ({id, value, className}: Props) => {\r\n    const classNames = ClassNames(\"form-control\", className);\r\n\r\n    return (\r\n        <span id={id} className={classNames}>\r\n            {value}\r\n        </span>\r\n    );\r\n};\r\n\r\nexport default Output;\r\n","import * as React from \"react\";\r\nimport {Collapse as BootstrapCollapse} from \"reactstrap\";\r\n\r\nimport {BaseType} from \"./BaseType\";\r\n\r\nexport interface Props extends BaseType {\r\n    isOpen: boolean;\r\n    children: React.ReactNode;\r\n}\r\n\r\nconst Collapse = ({...rest}: Props) => <BootstrapCollapse {...rest} />;\r\n\r\nexport default Collapse;\r\n","import * as React from \"react\";\r\n\r\nimport Icon from \"../../../../reusable/FontAwesomeIcon\";\r\nimport {Button} from \"../../../../reusable/index\";\r\n\r\nimport Style from \"./CollapsButton.scss\";\r\n\r\ntype Props = {\r\n    isOpen: boolean;\r\n    onClick: React.MouseEventHandler<any>;\r\n    name: string;\r\n};\r\n\r\nconst CollapseButton = ({name, isOpen, onClick}: Props) => {\r\n    return (\r\n        <Button color=\"link\" block onClick={onClick}>\r\n            <span>{name}</span>\r\n            <Icon className={Style.arrow} icon=\"angle-down\" size=\"lg\" rotation={isOpen ? 180 : undefined} />\r\n        </Button>\r\n    );\r\n};\r\n\r\nexport default CollapseButton;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"arrow\":\"Vefip__arrow\"};","// extracted by mini-css-extract-plugin\nexport default {\"verification\":\"_0meBl__verification\",\"entry\":\"_0meBl__entry\"};","import {calcResultNumber, verifySeed, verifySignature} from \"@dicether/state-channel\";\r\nimport * as React from \"react\";\r\n\r\nimport {CHAIN_ID, SERVER_ADDRESS} from \"../../../../config/config\";\r\nimport {FontAwesomeIcon} from \"../../../../reusable/index\";\r\nimport {Bet} from \"../../../modules/bets/types\";\r\n\r\nimport Style from \"./Verification.scss\";\r\n\r\ntype Props = {\r\n    bet: Bet;\r\n};\r\n\r\nconst OLD_SERVER_ADDRESS = \"0xCef260a5Fed7A896BBE07b933B3A5c17aEC094D8\";\r\n\r\nconst Valid = ({valid}: {valid: boolean}) =>\r\n    valid ? <FontAwesomeIcon icon=\"check\" color=\"success\" /> : <FontAwesomeIcon icon=\"times\" color=\"danger\" />;\r\n\r\nclass Verification extends React.PureComponent<Props> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const {bet} = this.props;\r\n\r\n        const validUserSeed = verifySeed(bet.userSeed, bet.userHash);\r\n        const validServerSeed = verifySeed(bet.serverSeed, bet.serverHash);\r\n\r\n        const signatureVersion = 2;\r\n        const serverAddress = bet.gameId < 5246 ? OLD_SERVER_ADDRESS : SERVER_ADDRESS;\r\n\r\n        const validUserSig = verifySignature(\r\n            bet,\r\n            CHAIN_ID,\r\n            bet.contractAddress,\r\n            bet.userSig,\r\n            bet.user.address,\r\n            signatureVersion\r\n        );\r\n        const validServerSig = verifySignature(\r\n            bet,\r\n            CHAIN_ID,\r\n            bet.contractAddress,\r\n            bet.serverSig,\r\n            serverAddress,\r\n            signatureVersion\r\n        );\r\n\r\n        const resultNum = calcResultNumber(bet.gameType, bet.serverSeed, bet.userSeed, bet.num);\r\n\r\n        const validResultNum = bet.resultNum === resultNum;\r\n\r\n        return (\r\n            <div className={Style.verification}>\r\n                <div className={Style.entry}>\r\n                    <code>keccak(userSeed) == userHash</code>\r\n                    <Valid valid={validUserSeed} />\r\n                </div>\r\n                <div className={Style.entry}>\r\n                    <code>keccak(serverSeed) == serverHash</code>\r\n                    <Valid valid={validServerSeed} />\r\n                </div>\r\n                <div className={Style.entry}>\r\n                    <code>userSignature is valid</code>\r\n                    <Valid valid={validUserSig} />\r\n                </div>\r\n                <div className={Style.entry}>\r\n                    <code>serverSignature is valid</code>\r\n                    <Valid valid={validServerSig} />\r\n                </div>\r\n                <div className={Style.entry}>\r\n                    <code>ResultNum is valid</code>\r\n                    <Valid valid={validResultNum} />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Verification;\r\n","import * as React from \"react\";\r\n\r\nimport {FROM_BASE_TO_WEI} from \"../../../../config/config\";\r\nimport {Collapse, Output} from \"../../../../reusable/index\";\r\nimport {Bet} from \"../../../modules/bets/types\";\r\nimport CollapseButton from \"./CollapseButton\";\r\nimport Verification from \"./Verification\";\r\n\r\nimport Style from \"./VerificationInfo.scss\";\r\n\r\ntype Props = {\r\n    bet: Bet;\r\n};\r\n\r\ntype State = {\r\n    isOpen: boolean;\r\n};\r\n\r\nconst Entry = ({id, name, data}: {id: string; name: string; data: string | number}) => (\r\n    <div className={Style.verificationInfo__entry}>\r\n        <span>{name}</span>\r\n        <Output className={Style.verificationInfo__value} id={id} value={data} />\r\n    </div>\r\n);\r\n\r\nclass VerificationInfo extends React.PureComponent<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.state = {\r\n            isOpen: false,\r\n        };\r\n    }\r\n\r\n    toggle = () => {\r\n        this.setState({isOpen: !this.state.isOpen});\r\n    };\r\n\r\n    render() {\r\n        const {isOpen} = this.state;\r\n        const {bet} = this.props;\r\n        const value = bet.value * FROM_BASE_TO_WEI;\r\n        const balance = bet.balance * FROM_BASE_TO_WEI;\r\n\r\n        return (\r\n            <div className={Style.verificationInfo}>\r\n                <CollapseButton name=\"Show Verification Data\" isOpen={isOpen} onClick={this.toggle} />\r\n                <Collapse isOpen={isOpen} style={{width: \"100%\"}}>\r\n                    <div>\r\n                        <Entry id={`bet_${bet.id}_roundId`} name=\"Round Id\" data={bet.roundId} />\r\n                        <Entry id={`bet_${bet.id}_gameType`} name=\"Game Type\" data={bet.gameType} />\r\n                        <Entry id={`bet_${bet.id}_num`} name=\"Number\" data={bet.num} />\r\n                        <Entry id={`bet_${bet.id}_betValue`} name=\"Bet Value (Wei)\" data={value} />\r\n                        <Entry id={`bet_${bet.id}_balance`} name=\"Balance (Wei)\" data={balance} />\r\n                        <Entry id={`bet_${bet.id}_serverHash`} name=\"Server Hash\" data={bet.serverHash} />\r\n                        <Entry id={`bet_${bet.id}_userHash`} name=\"User Hash\" data={bet.userHash} />\r\n                        <Entry id={`bet_${bet.id}_serverSeed`} name=\"Server seed\" data={bet.serverSeed} />\r\n                        <Entry id={`bet_${bet.id}_userSeed`} name=\"User seed\" data={bet.userSeed} />\r\n                        <Entry id={`bet_${bet.id}_gameId`} name=\"Game Id\" data={bet.gameId} />\r\n                        <Entry\r\n                            id={`bet_${bet.id}_contractAddress`}\r\n                            name=\"Contract Address\"\r\n                            data={bet.contractAddress}\r\n                        />\r\n                        <Entry id={`bet_${bet.id}_serverSig`} name=\"Server Signature\" data={bet.serverSig} />\r\n                        <Entry id={`bet_${bet.id}_userSig`} name=\"User Signature\" data={bet.userSig} />\r\n                    </div>\r\n                    <Verification bet={bet} />\r\n                </Collapse>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default VerificationInfo;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"verificationInfo\":\"_1xKo4__verificationInfo\",\"verificationInfo__entry\":\"_1xKo4__verificationInfo__entry\",\"verificationInfo__value\":\"_1xKo4__verificationInfo__value\"};","import {GameType} from \"@dicether/state-channel\";\r\nimport * as React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {bindActionCreators} from \"redux\";\r\n\r\nimport {Dispatch} from \"../../../../util/util\";\r\nimport {Bet} from \"../../../modules/bets/types\";\r\nimport {showUserModal} from \"../../../modules/modals/actions\";\r\nimport Overview from \"./Overview\";\r\nimport PlinkoBetInfo from \"./PlinkoBetInfo\";\r\nimport VerificationInfo from \"./VerificationInfo\";\r\n\r\ntype GameSpecificInfoProps = {\r\n    gameType: number;\r\n    betNum: number;\r\n    resultNum: number;\r\n};\r\n\r\nconst GameSpecificInfo = ({gameType, betNum, resultNum}: GameSpecificInfoProps) => {\r\n    switch (gameType) {\r\n        case GameType.DICE_LOWER:\r\n        case GameType.PLINKO:\r\n            return <PlinkoBetInfo betNum={betNum} resultNum={resultNum} />;\r\n        default:\r\n            return null;\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) =>\r\n    bindActionCreators(\r\n        {\r\n            showUserModal,\r\n        },\r\n        dispatch\r\n    );\r\n\r\ntype OtherProps = {\r\n    bet: Bet;\r\n};\r\n\r\ntype Props = ReturnType<typeof mapDispatchToProps> & OtherProps;\r\n\r\nclass BetInfo extends React.Component<Props> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const {bet, showUserModal} = this.props;\r\n\r\n        return (\r\n            <div>\r\n                <Overview bet={bet} showUserModal={(user) => showUserModal({user})} />\r\n                <GameSpecificInfo betNum={bet.num} resultNum={bet.resultNum} gameType={bet.gameType} />\r\n                <VerificationInfo bet={bet} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(BetInfo);\r\n","import * as React from \"react\";\r\n\r\nimport {DataLoader} from \"../../../reusable\";\r\nimport {Bet, Bet as BetType} from \"../../modules/bets/types\";\r\nimport BetInfo from \"./BetInfo\";\r\n\r\nexport type Props = {\r\n    bet?: Bet;\r\n    betId?: number;\r\n};\r\n\r\nconst Bet = ({bet, betId}: Props) =>\r\n    bet ? (\r\n        <BetInfo bet={bet} />\r\n    ) : (\r\n        <DataLoader<BetType> url={`/bets/bet/${betId}`} success={(bet) => <BetInfo bet={bet} />} />\r\n    );\r\n\r\nexport default Bet;\r\n","import * as React from \"react\";\r\nimport {connectModal, InjectedProps} from \"redux-modal\";\r\n\r\nimport {Modal} from \"../../../reusable\";\r\nimport {Bet as BetType} from \"../../modules/bets/types\";\r\nimport Bet from \"../bet/Bet\";\r\n\r\ntype Props = InjectedProps & {bet?: BetType; betId?: number};\r\n\r\nconst BetModal = ({show, handleHide, bet, betId}: Props) => (\r\n    <Modal toggle={handleHide} isOpen={show}>\r\n        <Bet betId={betId} bet={bet} />\r\n    </Modal>\r\n);\r\n\r\nexport default connectModal({name: \"bet\"})(BetModal);\r\n","import * as React from \"react\";\r\nimport {WithTranslation, withTranslation} from \"react-i18next\";\r\n\r\nimport {COINBASE_WALLET_URL, METAMASK_URL, TRUST_WALLET_URL} from \"../config/config\";\r\n\r\nimport Style from \"./MissingWallet.scss\";\r\n\r\nconst MissingWallet = ({t}: WithTranslation) => <div></div>;\r\n\r\nexport default withTranslation()(MissingWallet);\r\n","import * as React from \"react\";\r\nimport {connectModal, InjectedProps} from \"redux-modal\";\r\n\r\nimport {MissingWallet, Modal} from \"../../../reusable\";\r\n\r\ntype Props = InjectedProps;\r\n\r\nconst MissingWalletModal = ({show, handleHide}: Props) => (\r\n    <Modal toggle={handleHide} isOpen={show}>\r\n        <MissingWallet />\r\n    </Modal>\r\n);\r\n\r\nexport default connectModal({name: \"missingWallet\"})(MissingWalletModal);\r\n","import * as React from \"react\";\r\nimport {Form as BootstrapForm} from \"reactstrap\";\r\n\r\nimport {BaseType} from \"./BaseType\";\r\n\r\nexport interface Props extends BaseType {\r\n    inline?: boolean;\r\n    children: React.ReactNode;\r\n\r\n    onSubmit(e: React.FormEvent<HTMLFormElement>): void;\r\n}\r\n\r\nconst Form = ({inline = false, ...rest}: Props) => <BootstrapForm inline={inline} {...rest} />;\r\n\r\nexport default Form;\r\n","import * as React from \"react\";\r\nimport {FormText as BootstrapFormText} from \"reactstrap\";\r\nimport {BaseType} from \"./BaseType\";\r\n\r\nexport interface Props extends BaseType {\r\n    children: React.ReactNode;\r\n    inline?: boolean;\r\n    color?: string;\r\n}\r\n\r\nconst FormText = ({inline = false, color, ...rest}: Props) => (\r\n    <BootstrapFormText inline={inline} color={color} {...rest} />\r\n);\r\n\r\nexport default FormText;\r\n","import * as React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {bindActionCreators} from \"redux\";\r\n\r\nimport {Button, Form, FormGroup, FormText, Input} from \"../../../reusable/index\";\r\nimport {Dispatch} from \"../../../util/util\";\r\nimport {authenticate, register} from \"../../modules/account/asyncActions\";\r\nimport {isValidUserName} from \"../../modules/account/util\";\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) =>\r\n    bindActionCreators(\r\n        {\r\n            register,\r\n            authenticate,\r\n        },\r\n        dispatch\r\n    );\r\n\r\ntype Props = ReturnType<typeof mapDispatchToProps>;\r\n\r\ntype State = {\r\n    username: string;\r\n    isValid?: boolean;\r\n};\r\n\r\nclass Register extends React.Component<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.state = {\r\n            username: \"\",\r\n        };\r\n    }\r\n\r\n    register = (e: React.FormEvent<HTMLFormElement>) => {\r\n        const {register} = this.props;\r\n        const {username} = this.state;\r\n\r\n        register(username);\r\n        e.preventDefault();\r\n    };\r\n\r\n    onUsername = (username: string) => {\r\n        const isValid = this.validateUsername(username);\r\n        this.setState({\r\n            username,\r\n            isValid,\r\n        });\r\n    };\r\n\r\n    validateUsername = (username: string) => {\r\n        if (isValidUserName(username)) {\r\n            return true;\r\n        } else if (username.length === 0) {\r\n            return undefined;\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {authenticate} = this.props;\r\n        const {username, isValid} = this.state;\r\n\r\n        return (\r\n            <div>\r\n                <h3 className=\"text-center\">Register</h3>\r\n                <Form onSubmit={this.register}>\r\n                    <FormGroup>\r\n                        <Input\r\n                            isValid={isValid}\r\n                            showValidation\r\n                            value={username}\r\n                            placeholder=\"Username\"\r\n                            onValue={this.onUsername}\r\n                        />\r\n                        <FormText>You can't change the username after registration! So choose wisely...</FormText>\r\n                    </FormGroup>\r\n                    <p>\r\n                        Play responsibly and do not bet what you can not afford to lose. Do not play if you are under\r\n                        18. Do not play if doing so is illegal in your jurisdiction!\r\n                    </p>\r\n                    <Button color=\"primary\" type=\"submit\" disabled={isValid !== true} onClick={this.register}>\r\n                        Register\r\n                    </Button>\r\n                    <Button color=\"link\" onClick={authenticate}>\r\n                        Already registered\r\n                    </Button>\r\n                </Form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(undefined, mapDispatchToProps)(Register);\r\n","export function isValidUserName(username: string): boolean {\r\n    return username.length <= 15 && username.length >= 3 && /^[a-z0-9]+$/i.test(username);\r\n}\r\n","import * as React from \"react\";\r\nimport {connectModal, InjectedProps} from \"redux-modal\";\r\n\r\nimport {Modal} from \"../../../reusable\";\r\nimport Register from \"../user/Register\";\r\n\r\ntype Props = InjectedProps;\r\n\r\nconst MissingWalletModal = ({show, handleHide}: Props) => (\r\n    <Modal toggle={handleHide} isOpen={show}>\r\n        <Register />\r\n    </Modal>\r\n);\r\n\r\nexport default connectModal({name: \"register\"})(MissingWalletModal);\r\n","import * as React from \"react\";\r\nimport {WithTranslation, withTranslation} from \"react-i18next\";\r\n\r\nimport {Stats} from \"../../../../platform/modules/account/types\";\r\nimport {Ether} from \"../../../../reusable/index\";\r\n\r\nimport Style from \"./GameStats.scss\";\r\n\r\ntype EntryProps = {\r\n    value: number;\r\n    name: string;\r\n    colored?: boolean;\r\n    ether?: boolean;\r\n};\r\n\r\nconst StatsEntry = ({value, name, colored = false, ether = true}: EntryProps) => (\r\n    <div className={Style.entry}>\r\n        <dt className={Style.entry__header}>{name}</dt>\r\n        <dd> {ether ? <Ether colored={colored} gwei={value} /> : value}</dd>\r\n    </div>\r\n);\r\n\r\ninterface Props extends WithTranslation {\r\n    stats: Stats;\r\n}\r\n\r\nconst GameStats = ({stats, t}: Props) => {\r\n    const {profit, wagered, numBets} = stats;\r\n    return (\r\n        <dl className={Style.stats}>\r\n            <StatsEntry value={wagered} name={t(\"wagered\")} />\r\n            <StatsEntry colored value={profit} name={t(\"profit\")} />\r\n            <StatsEntry ether={false} value={numBets} name={t(\"#bets\")} />\r\n        </dl>\r\n    );\r\n};\r\n\r\nexport default withTranslation()(GameStats);\r\n","// extracted by mini-css-extract-plugin\nexport default {\"stats\":\"xcGMB__stats\",\"entry\":\"xcGMB__entry\",\"entry__header\":\"xcGMB__entry__header\"};","import * as React from \"react\";\r\n\r\nimport Style from \"./Address.scss\";\r\n\r\nconst Address = ({address}: {address: string}) => (\r\n    <a rel=\"noreferrer\" target=\"_blank\" href={`https://etherscan.io/address/${address}`} className={Style.address}>\r\n        {address}\r\n    </a>\r\n);\r\n\r\nexport default Address;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"address\":\"asu2d__address\"};","import * as React from \"react\";\r\n\r\nimport GameStats from \"../../../pages/account/components/stats/GameStats\";\r\nimport {Address, CopyToClipBoard, DataLoader} from \"../../../reusable\";\r\nimport {Stats as StatsType, User} from \"../../modules/account/types\";\r\n\r\nimport Style from \"./UserInfo.scss\";\r\n\r\ntype Props = {\r\n    user: User;\r\n};\r\n\r\nexport default class UserInfo extends React.PureComponent<Props> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const {user} = this.props;\r\n\r\n        return (\r\n            <div className={Style.userInfo}>\r\n                <h3 className=\"text-center\">\r\n                    {user.username}\r\n                    <CopyToClipBoard message={\"Copied! Paste in Chat!\"} content={`User:${user.username}`} />\r\n                </h3>\r\n                <Address address={user.address} />\r\n                <DataLoader<StatsType>\r\n                    url={`/stats/user/${user.address}`}\r\n                    success={(stats) => <GameStats stats={stats} />}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"userInfo\":\"o7MR4__userInfo\"};","import * as React from \"react\";\r\nimport {DataLoader} from \"../../../reusable\";\r\nimport {User as UserType} from \"../../modules/account/types\";\r\nimport UserInfo from \"./UserInfo\";\r\n\r\nexport type Props = {\r\n    userName?: string;\r\n    user?: UserType;\r\n};\r\n\r\nconst User = ({userName, user}: Props) =>\r\n    user ? (\r\n        <UserInfo user={user} />\r\n    ) : (\r\n        <DataLoader url={`/user/name/${userName}`} success={(user) => <UserInfo user={user} />} />\r\n    );\r\n\r\nexport default User;\r\n","import * as React from \"react\";\r\nimport {connectModal, InjectedProps} from \"redux-modal\";\r\n\r\nimport {Modal} from \"../../../reusable\";\r\nimport {User as UserType} from \"../../modules/account/types\";\r\nimport User from \"../user/User\";\r\n\r\ntype Props = InjectedProps & {user?: UserType; userName?: string};\r\n\r\nconst UserModal = ({show, handleHide, user, userName}: Props) => (\r\n    <Modal toggle={handleHide} isOpen={show}>\r\n        <User userName={userName} user={user} />\r\n    </Modal>\r\n);\r\n\r\nexport default connectModal({name: \"user\"})(UserModal);\r\n","import * as React from \"react\";\r\n\r\nimport BetModal from \"./BetModal\";\r\nimport MissingWalletModal from \"./MissingWalletModal\";\r\nimport RegisterModal from \"./RegisterModal\";\r\nimport UserModal from \"./UserModal\";\r\n\r\nconst Modals = () => (\r\n    <React.Fragment>\r\n        <MissingWalletModal />\r\n        <RegisterModal />\r\n        <BetModal />\r\n        <UserModal />\r\n    </React.Fragment>\r\n);\r\n\r\nexport default Modals;\r\n","import * as React from \"react\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport {bindActionCreators} from \"redux\";\r\nimport {State} from \"../../../rootReducer\";\r\nimport {Dispatch} from \"../../../util/util\";\r\nimport {getUser} from \"../../modules/account/selectors\";\r\nimport {storeGameState, syncGameState, validChainId} from \"../../modules/games/state/asyncActions\";\r\n\r\nconst mapStateToProps = (state: State) => {\r\n    const {games, web3} = state;\r\n    const {gameState} = games;\r\n\r\n    return {\r\n        gameState,\r\n        userAuth: getUser(state),\r\n        web3,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) =>\r\n    bindActionCreators(\r\n        {\r\n            syncGameState,\r\n        },\r\n        dispatch\r\n    );\r\n\r\nexport type Props = ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps>;\r\n\r\nclass StateLoader extends React.Component<Props> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {syncGameState, userAuth, web3} = this.props;\r\n\r\n        if (userAuth !== null && web3.web3 && web3.account && web3.contract && validChainId(web3.chainId)) {\r\n            syncGameState(web3.chainId as number, userAuth.address);\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps: Props) {\r\n        const {syncGameState, userAuth: nextUserAuth, gameState: nextState, web3: nextWeb3State} = nextProps;\r\n        const {userAuth: curUserAuth, gameState: curState, web3: curWeb3State} = this.props;\r\n\r\n        if (\r\n            nextUserAuth !== null &&\r\n            nextWeb3State.web3 &&\r\n            nextWeb3State.account &&\r\n            nextWeb3State.contract &&\r\n            validChainId(nextWeb3State.chainId) &&\r\n            (nextUserAuth !== curUserAuth ||\r\n                nextWeb3State.account !== curWeb3State.account ||\r\n                nextWeb3State.chainId !== curWeb3State.chainId)\r\n        ) {\r\n            syncGameState(nextWeb3State.chainId as number, nextUserAuth.address);\r\n        }\r\n\r\n        if (nextState !== curState && nextUserAuth) {\r\n            storeGameState(nextUserAuth.address, nextState);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(StateLoader);\r\n","import * as React from \"react\";\r\n\r\nimport {State as GameState} from \"../platform/modules/games/state/reducer\";\r\n\r\nexport type Props = {\r\n    gameState: GameState;\r\n};\r\n\r\nclass BeforeUnload extends React.Component<Props> {\r\n    componentDidMount() {\r\n        window.addEventListener(\"beforeunload\", this.handleBeforeUnload);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener(\"beforeunload\", this.handleBeforeUnload);\r\n    }\r\n\r\n    private handleBeforeUnload = (event: Event) => {\r\n        const {gameState} = this.props;\r\n\r\n        if (gameState.status === \"ACTIVE\") {\r\n            const message = \"You need to end the game session before leaving!\";\r\n            (event.returnValue as any) = message;\r\n            return message;\r\n        }\r\n\r\n        return undefined;\r\n    };\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport default BeforeUnload;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"notification\":\"wWwpT__notification\"};","import * as React from \"react\";\r\nimport {toast, ToastContainer} from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\"; // tslint:disable-line:no-submodule-imports\r\n\r\nimport Style from \"./Notification.scss\";\r\n\r\nconst CloseButton = () => <button type=\"button\" className=\"btn-close btn-close-white\" aria-label=\"Close\" />;\r\n\r\nexport type Props = {\r\n    notification: any;\r\n};\r\n\r\nexport default class Notification extends React.Component<Props> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps: Props) {\r\n        if (nextProps.notification !== this.props.notification && nextProps.notification !== null) {\r\n            const notification = nextProps.notification;\r\n            if (notification.type === \"success\") {\r\n                toast.success(<div style={{width: \"275px\", wordWrap: \"break-word\"}}>{notification.message}</div>);\r\n            } else if (notification.type === \"info\") {\r\n                toast.info(<div style={{width: \"275px\", wordWrap: \"break-word\"}}>{notification.message}</div>);\r\n            } else {\r\n                toast.error(\r\n                    /*<div style={{width: \"275px\", wordWrap: \"break-word\"}}>{*/ notification.message /*}</div>*/\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ToastContainer\r\n                icon={false}\r\n                toastClassName={Style.notification}\r\n                position=\"top-left\"\r\n                autoClose={5000}\r\n                hideProgressBar={true}\r\n                closeOnClick\r\n                pauseOnHover={false}\r\n                closeButton={<CloseButton />}\r\n            />\r\n        );\r\n    }\r\n}\r\n","import * as React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {Navigate, Route, Routes} from \"react-router-dom\";\r\n\r\nimport {bindActionCreators} from \"redux\";\r\nimport {ACCOUNT_BALANCE_POLL_INTERVAL} from \"../config/config\";\r\nimport Layout from \"../layout/Layout\";\r\nimport Account from \"../pages/account/Account\";\r\nimport Faq from \"../pages/faq/Faq\";\r\nimport Game from \"../pages/games/Game\";\r\nimport GameSession from \"../pages/gameSession/GameSession\";\r\nimport HallOfFame from \"../pages/hallOfFame/HallOfFame\";\r\nimport Index from \"../pages/index/Index\";\r\nimport Modals from \"../platform/components/modals/Modals\";\r\nimport StateLoader from \"../platform/components/state/StateLoader\";\r\nimport {initUser, loadDefaultData} from \"../platform/modules/account/asyncActions\";\r\nimport {getUser} from \"../platform/modules/account/selectors\";\r\nimport LogoutRoute from \"../platform/modules/utilities/LogoutRoute\";\r\nimport {\r\n    fetchAccountBalance,\r\n    fetchAllWeb3,\r\n    registerAccountChainIdListener,\r\n    unregisterAccounChainIdListener,\r\n} from \"../platform/modules/web3/asyncActions\";\r\nimport {State as RootState} from \"../rootReducer\";\r\nimport TermsOfUse from \"../termsOfUse/TermsOfUse\";\r\nimport {Dispatch} from \"../util/util\";\r\nimport RequireAuth from \"./RequireAuth\";\r\nimport BeforeUnload from \"./BeforeUnload\";\r\nimport Notification from \"./Notification\";\r\nimport PathNotFound from \"./PathNotFound\";\r\nimport {Helmet} from \"react-helmet\";\r\n\r\nexport const mapStateToProps = (state: RootState) => {\r\n    const {account, app, web3, games} = state;\r\n    const {gameState} = games;\r\n    const {notification, nightMode} = app;\r\n    const jwt = account.jwt;\r\n\r\n    return {\r\n        jwt,\r\n        userAuth: getUser(state),\r\n        defaultAccount: web3.account,\r\n        notification,\r\n        nightMode,\r\n        gameState,\r\n        web3: web3.web3,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n    ...bindActionCreators({fetchAllWeb3, fetchAccountBalance, registerAccountChainIdListener}, dispatch),\r\n    initUser: (address: string) => initUser(dispatch, address),\r\n    loadDefaultData: () => loadDefaultData(dispatch),\r\n});\r\n\r\nexport type Props = ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps>;\r\n\r\nclass App extends React.Component<Props> {\r\n    private accountBalanceTimer: number | null = null;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.state = {web3Timer: null};\r\n\r\n        const {jwt, initUser} = this.props;\r\n\r\n        if (jwt !== null) {\r\n            initUser(jwt);\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {fetchAllWeb3, fetchAccountBalance, loadDefaultData, registerAccountChainIdListener} = this.props;\r\n\r\n        loadDefaultData();\r\n\r\n        fetchAllWeb3();\r\n        this.accountBalanceTimer = window.setInterval(() => fetchAccountBalance(), ACCOUNT_BALANCE_POLL_INTERVAL);\r\n        registerAccountChainIdListener();\r\n\r\n        this.setTheme(this.props.nightMode);\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.nightMode !== this.props.nightMode) {\r\n            this.setTheme(this.props.nightMode);\r\n        }\r\n\r\n        this.props.fetchAllWeb3();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        unregisterAccounChainIdListener();\r\n        if (this.accountBalanceTimer !== null) {\r\n            clearInterval(this.accountBalanceTimer);\r\n        }\r\n    }\r\n\r\n    private setTheme = (nightMode: boolean) => {\r\n        if (nightMode) {\r\n            document.documentElement.setAttribute(\"data-bs-theme\", \"dark\");\r\n        } else {\r\n            document.documentElement.setAttribute(\"data-bs-theme\", \"light\");\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {userAuth, notification, defaultAccount, gameState} = this.props;\r\n\r\n        const logout = userAuth !== null && userAuth.address !== defaultAccount && defaultAccount !== null;\r\n\r\n        return (\r\n            <>\r\n                <Helmet>\r\n                    <title>Plink</title>\r\n                    <meta\r\n                        name=\"description\"\r\n                        content=\"Dicether is an Ethereum dice game. It uses a smart contract based state channel implementation to provide a fast, secure and provably fair gambling experience.\"\r\n                    />\r\n                </Helmet>\r\n                <Layout>\r\n                    <Routes>\r\n                        <Route path=\"/\" element={<Game />} />\r\n                    </Routes>\r\n                    <Modals />\r\n                    <BeforeUnload gameState={gameState} />\r\n                    <Notification notification={notification} />\r\n                    <StateLoader />\r\n                </Layout>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import * as React from \"react\";\r\nimport {Provider} from \"react-redux\";\r\nimport {BrowserRouter as Router} from \"react-router-dom\";\r\n\r\nimport {Store} from \"redux\";\r\nimport App from \"./app/App\";\r\nimport withTracker from \"./app/withTracker\";\r\nimport {State} from \"./rootReducer\";\r\n\r\nexport type Props = {\r\n    store: Store<State>;\r\n};\r\n\r\nconst TrackedApp = withTracker(App);\r\n\r\nexport default class Root extends React.Component<Props> {\r\n    render() {\r\n        return (\r\n            <Provider store={this.props.store}>\r\n                <Router>\r\n                    <TrackedApp />\r\n                </Router>\r\n            </Provider>\r\n        );\r\n    }\r\n}\r\n","import * as React from \"react\";\r\nimport {useLocation} from \"react-router-dom\";\r\n\r\nconst withTracker = (WrappedComponent: React.ComponentType<any>) => {\r\n    let lastPage: string | null = null;\r\n\r\n    const trackPage = (page: string) => {\r\n        if (lastPage !== page) {\r\n            const ga = (window as any).ga;\r\n            if (ga) {\r\n                ga(\"set\", \"page\", page);\r\n                ga(\"send\", \"pageview\", page);\r\n            }\r\n            lastPage = page;\r\n        }\r\n    };\r\n\r\n    const WithTracker = () => {\r\n        const location = useLocation();\r\n        const page = location.pathname;\r\n        trackPage(page);\r\n\r\n        return <WrappedComponent />;\r\n    };\r\n\r\n    WithTracker.displayName = `WithTracker(${WrappedComponent.displayName || WrappedComponent.name || \"Component\"})`;\r\n    return WithTracker;\r\n};\r\n\r\nexport default withTracker;\r\n","import \"core-js/stable\";\r\nimport dayjs from \"dayjs\";\r\nimport localizedFormat from \"dayjs/plugin/localizedFormat\";\r\nimport * as React from \"react\";\r\nimport {render} from \"react-dom\";\r\nimport \"regenerator-runtime/runtime\";\r\nimport \"what-input\";\r\n\r\nimport \"./config/interceptors\";\r\nimport \"./googleanalytics\";\r\nimport Root from \"./Root\";\r\nimport {store} from \"./store\";\r\nimport {parseReferral} from \"./util/affiliate\";\r\n\r\ndayjs.extend(localizedFormat);\r\n\r\nparseReferral();\r\n\r\nimport ResizeObserver from \"resize-observer-polyfill\";\r\n\r\nif (!window.ResizeObserver) {\r\n    window.ResizeObserver = ResizeObserver;\r\n}\r\n\r\nconst root = document.getElementById(\"root\");\r\nif (root !== null) {\r\n    render(<Root store={store} />, root);\r\n}\r\n","import axios from \"axios\";\r\nimport querystring from \"query-string\";\r\n\r\nexport function parseReferral() {\r\n    const {ref} = querystring.parse(window.location.search);\r\n\r\n    if (ref) {\r\n        // clear parameters\r\n        window.history.replaceState({}, document.title, window.location.pathname);\r\n\r\n        const previousRef = localStorage.getItem(\"referral\");\r\n\r\n        if (previousRef !== ref) {\r\n            localStorage.setItem(\"referral\", ref as string);\r\n            axios.post(\"/affiliate/hit\", {id: ref});\r\n        }\r\n    }\r\n}\r\n","(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\r\n(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\r\nm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\r\n})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\r\n\r\nif (window.ga) {\r\n    window.ga('create', 'UA-107010485-1', 'auto');\r\n    window.ga('set', 'anonymizeIp', true);\r\n    window.ga('send', 'pageview');\r\n}\r\n"],"names":["Date","process","CONTRACT_ADDRESS","toChecksumAddress","TOKEN_ADDRESS","console","log","CHAIN_ID","Number","parseInt","SERVER_ADDRESS","REALM","FROM_BASE_TO_WEI","MIN_BET_VALUE","MIN_BANKROLL","axios","getUser","createSelector","state","account","jwt","jwtDecode","fixedLengthAddElementFront","array","element","maxLength","length","slice","createConstant","p","prefix","isLocalStorageAvailable","mod","localStorage","setItem","removeItem","e","c","CHANGE_NOTIFICATION","TOGGLE_THEME","showErrorMessage","message","type","types","notification","toggleTheme","nightMode","catchError","error","dispatch","Error","Sentry","scope","setExtra","sentryError","response","data","statusText","messageToShow","str","idx","indexOf","substr","extractFirstLine","CHANGE_BETS","ADD_BET","CHANGE_MY_BETS","ADD_MY_BET","loadBets","then","bets","changeBets","catch","addNewBet","bet","getState","user","allBets","id","addBet","address","myBet","TOGGLE_CHAT","CHANGE_MESSAGES","ADD_MESSAGE","DELETE_MESSAGE","CHANGE_USERS_ONLINE","toggleChat","show","loadMessages","messages","changeMessages","CHANGE_FRIENDS","ADD_FRIEND","CHANGE_RECEIVED_FRIEND_REQUESTS","ADD_RECEIVED_FRIEND_REQUEST","REMOVE_RECEIVED_FRIEND_REQUEST","CHANGE_SENT_FRIEND_REQUESTS","ADD_SENT_FRIEND_REQUEST","REMOVE_SENT_FRIEND_REQUEST","TOGGLE_FRIEND_ONLINE","showMissingWalletModal","showUserModal","userName","showRegisterModal","web3","CHANGE_WEB3","CHANGE_ACCOUNT","CHANGE_NETWORK","CHANGE_CONTRACT","CHANGE_BALANCE","changeWeb3","changeAccount","changeChainId","chainId","changeBalance","balance","stateChannelContractAbi","require","fetchAccount","__awaiter","curAccount","eth","getAccounts","accounts","fetchAccountBalance","web3State","getBalance","result","BN","div","toNumber","registerAccountChainIdListener","undefined","window","ethereum","on","fetchAllWeb3","web3Data","Web3","contract","Contract","changeContract","newChainId","request","method","params","ex","fetchChainId","getTransactionReceipt","transactionHash","requestAccounts","enable","signTypedData","from","typedData","provider","currentProvider","isMetaMask","JSON","stringify","Promise","reject","sig","recoveredAddress","recoverTypedData","CHANGE_FIRST_VISITED","CHANGE_JWT","CHANGE_USER_STATS","CHANGE_GAME_SESSIONS","registerTypes","EIP712Domain","name","Register","changeJWT","Authorization","changeAxiosAuthToken","sessionStorage","changeJWTS","authenticate","register","username","web3Account","primaryType","domain","referredBy","getItem","realm","signature","hide","initUser","stats","loadStats","gameSessions","loadGameSessions","myBets","changeMyBets","friends","receivedFriendRequests","sentFriendRequests","setUser","loadDefaultData","initialState","innerWidth","numUsers","CHANGE_VALUE","CHANGE_NUM","num","value","TOGGLE_EXPERT_VIEW","TOGGLE_HELP","TOGGLE_SOUND","showHelp","showExpertView","sound","CREATING_GAME","GAME_CREATED","ENDED_GAME","PLACE_BET","END_BET","ENDED_WITH_REASON","USER_INITIATE_CONFLICT_END","USER_ABORT_CONFLICT_END","USER_CONFLICT_END","USER_INITIATE_FORCE_END","USER_ABORT_FORCE_END","SERVER_CONFLICT_END","RESTORE_STATE","CLEAR_STATE","status","hashChain","stake","roundId","gameType","betValue","oldBalance","combineReducers","info","action","Object","assign","enabled","gameState","userHash","serverHash","serverEndHash","createTransactionHash","gameId","reasonEnded","endTransactionHash","serverSig","userSig","placeBet","serverSeed","userSeed","keccak","revealSeed","reason","conflictEndTransactionHash","previousState","conflictEndTime","time","forceEndTransactionHash","plinko","maxBetValue","maxBet","GameType","Math","min","updateNum","appReducer","isSessionStorageAvailable","firstVisited","profit","wagered","numBets","chat","map","m","messageId","deleted","friend","receivedFriendRequest","filter","friendReq","sentFriendRequest","to","online","updateFriendStatus","app","games","modal","middlewares","thunkMiddleware","dsn","tunnel","release","normalizeDepth","maxBreadcrumbs","beforeBreadcrumb","breadcrumb","hint","category","_a","xhr","truncatedResponse","n","store","createStore","compose","applyMiddleware","library","fas","far","color","className","rest","__rest","classNames","ClassNames","Style","React","FontAwesomeIcon","onClick","buttonClassName","buttonClassNames","ClassName","logo","Header","constructor","props","super","closeMenu","this","isOpen","setState","toggle","onToggleChat","showChat","onToggleTheme","showRegister","render","authenticated","connected","t","Navbar","expand","dark","container","Container","NavbarBrand","tag","RRNavLink","src","NavbarToggler","Collapse","navbar","Nav","NavItem","NavLink","IconButton","icon","key","href","withTranslation","connect","mapStateToProps","bindActionCreators","Layout","children","toggleHelp","toggleExpertView","toggleSound","endedWithReason","gameCreated","userAbortConflictEnd","canCreateGame","createGameEvent","creatingGame","canEndGame","endGameEvent","canRegularEndGame","activateGameEvent","canActivateGame","canPlaceBet","canRevealSeed","canUserInitiateConflictEnd","userInitiateConflictEndEvent","userInitiateConflictEnd","canUserConflictEnd","userConflictEndEvent","userConflictEnd","canUserInitiateForceEnd","canServerConflictEnd","isTransactionFailed","receipt","validChainId","loadContractStateCreatedGame","methods","gameIdGame","call","ContractStatus","getBlockNumber","blockNum","getPastEvents","fromBlock","max","toBlock","events","returnValues","getReasonEnded","ContractReasonEnded","loadContractGameState","logCreated","getLogGameCreated","userEndHash","syncGameState","warn","storedState","restoreState","parse","loadLocalGameState","loadServerGameState","endGame","userAddress","createTypedData","contractAddress","verifySignature","endedGame","regularEndGameEvent","forceEnd","userForceGameEnd","resolve","send","gas","userInitiateForceEnd","userInitiateForceEndEvent","requestSeed","retry","retries","minTimeout","revealSeedRequest","newServerBalance","verifySeed","resNum","calcResultNumber","userProfit","calcUserProfit","newUserBalance","revealSeedEvent","betNum","won","dataPlaceBet","placeBetEvent","gray","allClassNames","BootstrapContainer","returnError","errorMessage","BootstrapRow","BootstrapCol","BootstrapFormGroup","for","htmlFor","BootstrapLabel","block","size","outline","active","disabled","variant","BootstrapButton","filterFloat","test","NaN","popCnt","Input","onBlur","isFocus","inputValue","onFocus","onChange","event","val","target","onValue","validate","valid","isValid","componentWillReceiveProps","nextProps","isValidState","suffix","readOnly","placeholder","showValidation","isValidProp","classNameSuffix","style","defaultProps","NumericInput","isNaN","step","onNumber","round","number","precision","toFixed","toString","MIN_VALUE","MAX_VALUE","ETHER_DIV","ValueInput","onValueChange","newVal","onValueDouble","onValueHalf","InputGroup","Button","Select","handleChange","blur","BootstrapModal","ModalBody","Ether","gwei","showCurrencySymbol","colored","formatEth","HowToPlayBase","HowToPlay","PureCanvas","shouldComponentUpdate","height","width","ref","node","contextRef","getContext","Drawable","position","Vector2","x","y","multiply","add","v","subtract","sqrMagnitude","magnitude","sqrt","negate","dot","normalize","radius","oldPos","draw","ctx","beginPath","arc","PI","fillStyle","fill","startPositions","PayoutInfo","showResult","colorClass","multiplier","classNamesColorStrip","classNamesEntry","PayoutTable","payout","resultColumn","len","totalPayout","reverse","Array","keys","totalColor","index","PLINKO_PAYOUT_DIVIDER","rows","pinRadius","pins","distance","rowDistance","topOffset","i","startPosX","posY","j","posX","push","Pin","getCollisionPin","start","end","maxDistanceSqr","direction","magnitudeSqr","pin","nearestPoint","projection","distanceSqr","distanceNearestPointSqr","distFromNearestToCollisionPoint","collisionPointDist","collisionPoint","normal","Plinko","parent","activeBalls","animationActive","ballAcceleration","currentTime","accumulator","k","stepsPerSecond","speed","addBall","targetPos","resultNum","startPos","promise","ball","Ball","ballRadius","finishedCallBack","now","requestAnimationFrame","animation","renderToCanvas","canvas","clearRect","save","scale","translate","forEach","restore","simulate","results","_","rand","Rand","pos","next","yPos","simulateBall","resArray","floor","resString","join","maxSteps","steps","animateBall","dt","initialPos","initialV","newV","newPos","collisionInfo","aM","vM","sM","collisionTime","tLeft","vCollision","tmp","finalV","newTime","frameTime","finishedBalls","ballData","saveContext","onResize","Pins","NightColors","DayColors","componentDidMount","componentDidUpdate","risk","PLINKO_PAYOUT","ReactResizeDetector","handleWidth","handleHeight","Ui","onSimulate","current","angle","disableRiskRowUpdate","withdrawValue","onToggleHelp","onRiskChange","onRowsChange","onPlaceBet","onWithdraw","resultCol","Row","noGutters","Col","lg","order","xl","FormGroup","Label","xs","sm","Modal","withRef","plinkoAbi","tokenAbi","loadedSounds","ui","calcReward","playerWinnings","playPlinko","pliko_play","pow","playTokenPlinko","approve","amount","pliko_token_play","withdrawUserWinnings","getResult","get_result","loading","web3Available","loggedIn","canBet","safeBetValue","numBitsSet","ballsFalling","_b","changeValue","changeNum","segments","playSound","audio","play","playFromBegin","reward","setInterval","rewardAmount","Helmet","content","backgroundColor","zIndex","opacity","Game","createGame","seed","manualRequestSeed","conflictEnd","onToggleExpertView","onToggleSound","Section","createHashChain","checkIfEndTransactionFinished","previousGameId","createBefore","fromGweiToWei","LogGameCreated","options","cancelActiveGame","userCancelActiveGame","userEndGameConflict","Loading","Icon","spin","Failure","NotFound","DataLoader","fetchData","url","prevProps","failure","notFound","success","placement","BootstrapPopover","maxWidth","PopoverBody","CopyToClipboard","showMessage","onCopy","setTimeout","ReactCopyToClipboard","text","Popover","Overview","CopyToClipBoard","dayjs","timestamp","format","PlinkoBetInfo","Output","BootstrapCollapse","CollapseButton","rotation","Valid","Verification","validUserSeed","validServerSeed","serverAddress","validUserSig","validServerSig","validResultNum","Entry","VerificationInfo","GameSpecificInfo","BetInfo","Bet","betId","connectModal","BetModal","handleHide","MissingWallet","MissingWalletModal","inline","BootstrapForm","BootstrapFormText","preventDefault","onUsername","validateUsername","isValidUserName","Form","onSubmit","FormText","StatsEntry","ether","GameStats","Address","rel","UserInfo","User","UserModal","Modals","RegisterModal","StateLoader","userAuth","nextUserAuth","nextState","nextWeb3State","curUserAuth","curState","curWeb3State","version","storeGameState","BeforeUnload","handleBeforeUnload","returnValue","addEventListener","componentWillUnmount","removeEventListener","CloseButton","Notification","toast","wordWrap","ToastContainer","toastClassName","autoClose","hideProgressBar","closeOnClick","pauseOnHover","closeButton","App","accountBalanceTimer","setTheme","document","documentElement","setAttribute","web3Timer","removeListener","clearInterval","defaultAccount","Routes","Route","path","TrackedApp","WrappedComponent","lastPage","WithTracker","page","ga","trackPage","useLocation","pathname","displayName","withTracker","Root","Provider","Router","localizedFormat","querystring","location","search","history","replaceState","title","parseReferral","ResizeObserver","root","getElementById","s","o","a","q","arguments","l","createElement","getElementsByTagName","async","parentNode","insertBefore"],"sourceRoot":""}